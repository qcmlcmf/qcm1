define("views/section",[],function(){var e=codebox.require("hr/utils"),t=codebox.require("hr/dom"),n=codebox.require("hr/hr"),r=codebox.require("core/files"),i=n.View.extend({className:"debug-section",defaults:{dbg:null},events:{},formats:[],initialize:function(e){return i.__super__.initialize.apply(this,arguments),this.dbg=this.options.dbg,this.$title=t("<h4>",{text:this.title}),this.$container=t("<div>",{"class":"table-container"}),this.$table=t("<table>",{"class":"table"}),this.$title.appendTo(this.$el),this.$container.appendTo(this.$el),this.$table.appendTo(this.$container),this.clearLines(),this},render:function(){return this.ready()},clearLines:function(){this.$table.empty();var n=t("<tr>");e.each(this.formats,function(e){t("<th>",{text:e.title}).appendTo(n)}),n.appendTo(this.$table)},addLine:function(n){var i=t("<tr>");e.each(this.formats,function(e){var s,o=n[e.id];e.type=="file"?s=t("<a>",{href:"#",text:o,click:function(e){e.preventDefault(),r.open(o,{line:n.line})}}):s=t("<span>",{text:o}),s.appendTo(t("<td>").appendTo(i))}),i.appendTo(this.$table)},update:function(){}});return i}),define("views/locals",["views/section"],function(e){var t=codebox.require("hr/utils"),n=codebox.require("hr/dom"),r=codebox.require("hr/hr"),i=codebox.require("core/backends/rpc"),s=e.extend({title:"Locals",formats:[{id:"name",title:"Name"},{id:"value",title:"Value"}],update:function(){var e=this;return this.dbg.locals().then(function(n){e.clearLines(),t.each(n,function(t,n){e.addLine({name:n,value:t})})})}});return s}),define("views/backtrace",["views/section"],function(e){var t=codebox.require("hr/utils"),n=codebox.require("hr/dom"),r=codebox.require("hr/hr"),i=codebox.require("core/backends/rpc"),s=e.extend({title:"Backtrace",formats:[{id:"filename",title:"File",type:"file"},{id:"line",title:"Line"}],update:function(){var e=this;return this.dbg.backtrace().then(function(n){e.clearLines(),t.each(n,e.addLine,e)})}});return s}),define("views/breakpoints",["views/section"],function(e){var t=codebox.require("hr/utils"),n=codebox.require("hr/dom"),r=codebox.require("hr/hr"),i=codebox.require("core/backends/rpc"),s=e.extend({title:"Breakpoints",formats:[{id:"num",title:"#"},{id:"filename",title:"File",type:"file"},{id:"line",title:"Line"}],update:function(){var e=this;return this.dbg.breakpoints().then(function(n){e.clearLines(),t.each(n,e.addLine,e)})}});return s}),define("views/console",[],function(){var e=codebox.require("hr/utils"),t=codebox.require("hr/dom"),n=codebox.require("hr/hr"),r=n.View.extend({className:"debug-section debug-console",title:"Console",defaults:{dbg:null},events:{click:"focus"},logIcons:{log:"fa fa-blank",input:"fa fa-angle-right",error:"fa fa-times-circle"},initialize:function(e){var n=this;return r.__super__.initialize.apply(this,arguments),this.dbg=this.options.dbg,this.$title=t("<h4>",{text:this.title}),this.$container=t("<div>",{"class":"table-container"}),this.$body=t("<div>",{"class":"console-body"}),this.$input=t("<input>",{"class":"form-control input-sm",keyup:function(e){var r=e.which||e.keyCode,i=t(e.currentTarget).val();r==13&&(e.preventDefault(),n.eval(i),t(e.currentTarget).val(""))}}),this.$body.appendTo(this.$container),this.$input.appendTo(t("<div>",{"class":"line input",html:'<i class="fa fa-angle-right"></i>'}).appendTo(this.$container)),this.$title.appendTo(this.$el),this.$container.appendTo(this.$el),this},addLine:function(e){var n=t("<div>",{"class":"line "+e.type}),r=t("<pre>",{text:e.content}),i=t("<i>",{"class":this.logIcons[e.type]});i.appendTo(n),r.appendTo(n),n.appendTo(this.$body),this.$container.animate({scrollTop:this.$container[0].scrollHeight},100)},eval:function(t){return this.addLine({type:"input",content:t}),this.dbg.eval(t).then(e.bind(this.addLine,this))},focus:function(e){e&&e.preventDefault(),this.$input.focus()}});return r}),define("require-tools/less/normalize",[],function(){function r(e,r,i){if(e.indexOf("data:")===0)return e;e=t(e);var u=i.match(n),a=r.match(n);return a&&(!u||u[1]!=a[1]||u[2]!=a[2])?s(e,r):o(s(e,r),i)}function s(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));if(e.match(/^\//)||e.match(n))return e;var r=t.split("/"),i=e.split("/");r.pop();while(curPart=i.shift())curPart==".."?r.pop():r.push(curPart);return r.join("/")}function o(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var e=/([^:])\/+/g,t=function(t){return t.replace(e,"$1/")},n=/[^\:\/]*:\/\/([^\/])*/,u=function(e,n,i){n=t(n),i=t(i);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,o,u,e;while(o=s.exec(e)){u=o[3]||o[2]||o[5]||o[6]||o[4];var a;a=r(u,n,i);var f=o[5]||o[6]?1:0;e=e.substr(0,s.lastIndex-u.length-f-1)+a+e.substr(s.lastIndex-f-1),s.lastIndex=s.lastIndex+(a.length-u.length)}return e};return u.convertURIBase=r,u.absoluteURI=s,u.relativeURI=o,u}),define("require-tools/less/less",["require"],function(e){var t={};t.pluginBuilder="./less-builder";if(typeof window=="undefined")return t.load=function(e,t,n){n()},less;t.normalize=function(e,t){return e.substr(e.length-5,5)==".less"&&(e=e.substr(0,e.length-5)),e=t(e),e};var n=document.getElementsByTagName("head")[0],r=window.location.href.split("/");r[r.length-1]="",r=r.join("/");var i;window.less=window.less||{env:"development"};var s=0,o;t.inject=function(e){s<31&&(o=document.createElement("style"),o.type="text/css",n.appendChild(o),s++),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(document.createTextNode(e))};var u;return t.load=function(n,s,o,a){e(["./lessc","./normalize"],function(a,f){if(!i){var l=e.toUrl("base_url").split("/");l[l.length-1]="",i=f.absoluteURI(l.join("/"),r)+"/"}var c=s.toUrl(n+".less");c=f.absoluteURI(c,i),u=u||new a.Parser(window.less),u.parse('@import "'+c+'";',function(e,n){if(e)return o.error(e);t.inject(f(n.toCSS(),c,r)),setTimeout(o,7)})})},t}),define("require-tools/less/less!stylesheets/tab",[],function(){}),define("views/tab",["views/section","views/locals","views/backtrace","views/breakpoints","views/console","less!stylesheets/tab.less"],function(e,t,n,r,i){var s=codebox.require("hr/utils"),o=codebox.require("hr/dom"),u=codebox.require("hr/hr"),a=codebox.require("models/command"),f=codebox.require("views/tabs/base"),l=codebox.require("core/box"),c=codebox.require("core/user"),h=codebox.require("utils/dialogs"),p=codebox.require("core/debug/manager"),d=codebox.require("views/grid"),v=f.extend({className:f.prototype.className+" addon-debugger-tab",defaults:{},menuTitle:"Debugger",events:{},initialize:function(e){var s=this;return v.__super__.initialize.apply(this,arguments),this.dbg=this.options.dbg,this.console=new i({dbg:this.dbg}),this.locals=new t({dbg:this.dbg}),this.backtrace=new n({dbg:this.dbg}),this.breakpoints=new r({dbg:this.dbg}),this.listenTo(this.dbg,"close",function(){this.closeTab()}),this.listenTo(this.dbg,"update",function(){this.updateState()}),this.listenTo(this.dbg,"error",function(e){this.console.addLine({type:"error",content:e.message||e})}),this.listenTo(this.dbg,"log",function(e){this.console.addLine({type:"log",content:e})}),this.gridV=new d({columns:1}),this.gridH=new d({columns:1e3}),this.gridH.addView(this.breakpoints),this.gridH.addView(this.backtrace),this.gridH.addView(this.locals),this.gridV.addView(this.gridH),this.gridV.addView(this.console),this.gridV.appendTo(this),this.commandStart=new a({},{title:"Start",action:function(){s.dbg.start(s.options.argument)}}),this.commandStop=new a({},{title:"Stop",action:function(){s.dbg.stop()}}),this.commandNext=new a({},{title:"Next",action:function(){s.dbg.next()}}),this.commandContinue=new a({},{title:"Continue",action:function(){s.dbg.cont()}}),this.commandRestart=new a({},{title:"Restart",action:function(){s.dbg.restart()}}),this.setTabTitle("Debugger "+this.options.path),this.menu.menuSection([this.commandStart,this.commandStop,this.commandRestart]).menuSection([this.commandNext,this.commandContinue]).menuSection([{type:"checkbox",title:"Exit",action:function(e){s.closeTab()}}]),this.statusbar.add([this.commandRestart,this.commandContinue,this.commandNext,this.commandStop,this.commandStart]),this.dbg.init({tool:this.options.tool,path:this.options.path,breakpoints:p.breakpoints.all()}),this.listenTo(p.breakpoints,"change",function(e){if(e.change=="add")this.dbg.breakpointAdd({path:e.path,line:e.line});else{var t=this.dbg.getBreakpoint({path:e.path,line:e.line});t&&this.dbg.breakpointRemove(t.num)}}),this.on("tab:close",function(){this.dbg.close()},this),this},render:function(){return this.ready()},updateState:function(){this.locals.update(),this.backtrace.update(),this.breakpoints.update()}});return v}),define("settings",[],function(){var e=codebox.require("core/settings");return e.add({namespace:"debug",title:"Debug",defaults:{path:"",argument:null,tool:"auto"},fields:{path:{label:"File Path",type:"text",help:"Click left on a file and select 'debug' to update this file."},argument:{label:"Arguments",type:"text",help:"Arguments to run the file with."},tool:{label:"Debugger",type:"select",help:"Force the use of a specific debugger.",options:{auto:"Auto",pdb:"Python Debugger",gdb:"Native Debugger (GDB)"}}}})}),define("client",["views/tab","settings"],function(e,t){var n=codebox.require("hr/promise"),r=codebox.require("hr/utils"),i=codebox.require("models/file"),s=codebox.require("core/commands/toolbar"),o=codebox.require("utils/dialogs"),u=codebox.require("core/files"),a=codebox.require("core/tabs"),f=codebox.require("core/box"),l=codebox.require("core/debug/manager"),c=u.addHandler("debug",{icon:"bug",name:"Debug",valid:function(e){return!e.isDirectory()},open:function(n){return n.path()!=t.user.get("path")&&(t.user.set("path",n.path()),t.user.save()),l.open().then(function(r){return a.add(e,{dbg:r,path:n.path(),tool:t.user.get("tool")=="auto"?null:t.user.get("tool"),argument:t.user.get("argument")},{type:"debug",section:"debug"})})}});s.register("debug.open",{category:"Debug",title:"Debugger",description:"Open Debugger",icons:{"default":"bug"},offline:!1,shortcuts:["alt+d"]},function(e){e=e||t.user.get("path");if(!e){o.alert("No file specified","Click left on a file and select 'Debug' to open it with the debugger, it'll be saved in your settings as last debugged file.");return}var n=new i;return n.getByPath(e).then(function(){return c.open(n)},function(){o.alert("File not found","File "+r.escape(e)+" doesn't exists. Click left on an another file and select 'Debug' to open it with the debugger.")})})}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}(".addon-debugger-tab .component-grid .grid-section .grid-resize-bar-h,.addon-debugger-tab .component-grid .grid-section .grid-resize-bar-v{background:rgba(0,0,0,.1)}.addon-debugger-tab .debug-section h4{display:block;width:100%;background:rgba(0,0,0,.05);font-size:14px;padding:6px 8px;margin:0}.addon-debugger-tab .debug-section .table-container{position:absolute;top:27px;bottom:0;left:0;right:0;display:block;margin:0;overflow:auto}.addon-debugger-tab .debug-section .table{margin:0}.addon-debugger-tab .debug-section .table tr td,.addon-debugger-tab .debug-section .table tr th{border-top-color:rgba(0,0,0,.05)}.addon-debugger-tab .debug-section .table tr td a,.addon-debugger-tab .debug-section .table tr th a{color:inherit}.addon-debugger-tab .debug-section.debug-console .line{padding-bottom:3px;border-bottom:1px solid rgba(0,0,0,.05)}.addon-debugger-tab .debug-section.debug-console .line *{line-height:1.4em;font-size:14px}.addon-debugger-tab .debug-section.debug-console .line i{float:left;width:24px;text-align:center}.addon-debugger-tab .debug-section.debug-console .line pre{padding:0;background:0 0;color:inherit;border:none;display:block;margin:0 0 0 24px;font-family:inherit}.addon-debugger-tab .debug-section.debug-console .line.error{color:#a94442}.addon-debugger-tab .debug-section.debug-console .line.input{padding-top:3px;padding-bottom:0;border-color:transparent}.addon-debugger-tab .debug-section.debug-console .line input,.addon-debugger-tab .debug-section.debug-console .line input:focus{color:inherit;background:0 0;box-shadow:none;font-size:14px;line-height:1.4em;padding:0;height:19px;margin:0 24px 0 0;width:90%;border:none}");