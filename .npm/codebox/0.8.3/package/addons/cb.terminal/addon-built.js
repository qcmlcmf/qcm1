!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("node_modules/sh.js/build/sh",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Terminal=e()}}(function(){var e,n,r;return function i(e,t,n){function r(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return r(n?n:t)},f,f.exports,i,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){var r={};r.SCLD={"`":"◆",a:"▒",b:"	",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},r.UK=null,r.US=null,r.Dutch=null,r.Finnish=null,r.French=null,r.FrenchCanadian=null,r.German=null,r.Italian=null,r.NorwegianDanish=null,r.Spanish=null,r.Swedish=null,r.Swiss=null,r.ISOLatin=null,t.exports=r},{}],2:[function(e,t,n){function r(){this._events=this._events||{}}function i(e,t,n,r){e.addEventListener(t,n,r||!1)}function s(e,t,n,r){e.removeEventListener(t,n,r||!1)}function o(e){return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1}r.prototype.addListener=function(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)},r.prototype.removeListener=function(e,t){if(this._events[e])for(var n=this._events[e],r=n.length;r--;)if(n[r]===t||n[r].listener===t){n.splice(r,1);break}},r.prototype.on=r.prototype.addListener,r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){this._events[e]&&delete this._events[e]},r.prototype.once=function(e,t){function n(){var r=Array.prototype.slice.call(arguments);return this.removeListener(e,n),t.apply(this,r)}return n.listener=t,this.on(e,n)},r.prototype.emit=function(e){if(this._events[e])for(var t=Array.prototype.slice.call(arguments,1),n=this._events[e],r=n.length,i=0;i<r;i++)n[i].apply(this,t)},r.prototype.listeners=function(e){return this._events[e]=this._events[e]||[]},t.exports={EventEmitter:r,on:i,off:s,cancel:o}},{}],3:[function(e,n,r){function a(e,t){i.EventEmitter.call(this);var n;"object"==typeof e&&(n=e,e=n.cols,t=n.rows),this._options=n||{},this.cols=e||a.geometry[0],this.rows=t||a.geometry[1];var r=this._options.theme;if(typeof r=="string"||r instanceof String)r=o.defaults[r];r||(r=o.defaults["default"]),this.colors=o.colors(r),this.resetState(e,t)}var i=e("./events"),s=e("./utils"),o=e("./themes"),u=e("./charsets"),f=1;s.inherits(a,i.EventEmitter),a.termName="xterm",a.geometry=[80,24],a.visualBell=!1,a.popOnBell=!1,a.scrollback=1e3,a.screenKeys=!1,a.programFeatures=!1,a.debug=!1,a.focus=null,a.prototype.resetState=function(e,t){this.cursorState=this.y=this.x=this.ydisp=this.ybase=0,this.convertEol=this.cursorHidden=!1,this.state=0,this.queue="",this.writeQueue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.wraparoundMode=this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1,this.normal=null,this.virtualAltKey=this.virtualCtrlKey=this.selectionMode=!1,this.gcharset=this.charset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.writable=this.readable=!0,this.curAttr=this.defAttr=131840,this.params=[],this.currentParam=0,this.postfix=this.prefix="",this.lines=[];for(var n=this.rows;n--;)this.lines.push(this.blankLine());this.tabs,this.setupStops()},a.prototype.focus=function(){a.focus&&a.focus!==this&&a.focus.blur(),a.focus=this,this.sendFocus&&this.send("[I"),this.showCursor(),this.inputElement.focus()},a.prototype.blur=function(){if(a.focus!==this)return;a.focus=null,this.redrawCursor(),this.sendFocus&&this.send("[O"),this.inputElement.blur()},a.prototype.toggleVirtualCtrlKey=function(){this.virtualCtrlKey=!this.virtualCtrlKey,this.ctrlKeyElement.className=this.virtualCtrlKey?"active":""},a.prototype.toggleVirtualAltKey=function(){this.virtualAltKey=!this.virtualAltKey,this.altKeyElement.className=this.virtualAltKey?"active":""},a.prototype.applyVirtualKey=function(e){if(!this.virtualCtrlKey&&!this.virtualAltKey)return e;var t={altGraphKey:e.altGraphKey,altKey:e.altKey,charCode:e.charCode,ctrlKey:e.ctrlKey,keyCode:e.keyCode,metKey:e.metaKey,shiftKey:e.shiftKey,type:e.type,which:e.which,preventDefault:function(){e.preventDefault&&e.preventDefault()},stopPropagation:function(){e.stopPropagation&&e.stopPropagation()}};return this.virtualCtrlKey&&(t.ctrlKey=!0,this.toggleVirtualCtrlKey()),this.virtualAltKey&&(t.altKey=!0,this.toggleVirtualAltKey()),t},a.prototype.bindKeys=function(){if(a.focus!=this){var e=this;i.on(this.tabKeyElement,"touchend",function(t){e.keyDown({keyCode:9})},!0),i.on(this.ctrlKeyElement,"touchend",function(t){e.toggleVirtualCtrlKey()},!0),i.on(this.altKeyElement,"touchend",function(t){e.toggleVirtualAltKey()},!0),i.on(this.escKeyElement,"touchend",function(t){e.keyDown({keyCode:27})},!0),i.on(this.leftKeyElement,"touchend",function(t){e.keyDown({keyCode:37})},!0),i.on(this.downKeyElement,"touchend",function(t){e.keyDown({keyCode:40})},!0),i.on(this.upKeyElement,"touchend",function(t){e.keyDown({keyCode:38})},!0),i.on(this.rightKeyElement,"touchend",function(t){e.keyDown({keyCode:39})},!0);for(var t=0,n=[this.tabKeyElement,this.ctrlKeyElement,this.altKeyElement,this.escKeyElement,this.leftKeyElement,this.downKeyElement,this.upKeyElement,this.rightKeyElement,this.screenKeysElement];t<n.length;t++)i.on(n[t],"touchend",function(t){e.focus(),i.cancel(t)});i.on(this.inputElement,"keydown",function(t){return e.keyDown(t)},!0),i.on(this.inputElement,"keypress",function(t){return e.keyPress(t)},!0),i.on(document,"keydown",function(t){var n=(a.isMac&&t.metaKey||!a.isMac&&t.ctrlKey)&&67===t.keyCode;e.selectionMode&&!n&&48<=t.keyCode&&222>=t.keyCode&&-1===[91,92,93,144,145].indexOf(t.keyCode)&&e.inputElement.focus(),!a.isMac&&n&&t.shiftKey&&document.execCommand&&(document.execCommand("copy",!0,null),i.cancel(t))})}},a.prototype.open=function(e){var t=this,n=0,r;this.element=document.createElement("div"),this.element.className="terminal",this.element.spellcheck=!1;for(this.children=[];n<this.rows;n++)r=document.createElement("div"),r.className="terminal-row",r.setAttribute("data-row",(n+1).toString()),this.element.appendChild(r),this.children.push(r);this.inputElement=document.createElement("textarea"),this.inputElement.className="terminal-input",this.inputElement.rows="1",this.inputElement.spellcheck=!1,this.inputElement.autocorrect="off",this.inputElement.autocapitalize="off",this.containerElement=document.createElement("div"),this.containerElement.type="text",this.containerElement.spellcheck=!1,this.containerElement.className="terminal-container",this.containerElement.id="terminal_"+f++,this.sizeIndicatorElement=document.createElement("div"),this.sizeIndicatorElement.className="terminal-size-indicator",this.sizeIndicatorElement.innerHTML="80x25",this.sizeIndicatorElement.style.display="none",this.screenKeysElement=document.createElement("div"),this.screenKeysElement.className="terminal-screen-keys",this.tabKeyElement=document.createElement("button"),this.ctrlKeyElement=document.createElement("button"),this.altKeyElement=document.createElement("button"),this.escKeyElement=document.createElement("button"),this.leftKeyElement=document.createElement("button"),this.downKeyElement=document.createElement("button"),this.upKeyElement=document.createElement("button"),this.rightKeyElement=document.createElement("button"),this.tabKeyElement.innerHTML="Tab",this.ctrlKeyElement.innerHTML="Ctrl",this.altKeyElement.innerHTML="Alt",this.escKeyElement.innerHTML="Esc",this.leftKeyElement.innerHTML="←",this.downKeyElement.innerHTML="↓",this.upKeyElement.innerHTML="↑",this.rightKeyElement.innerHTML="→",this.screenKeysElement.appendChild(this.tabKeyElement),this.screenKeysElement.appendChild(this.ctrlKeyElement),this.screenKeysElement.appendChild(this.altKeyElement),this.screenKeysElement.appendChild(this.escKeyElement),this.screenKeysElement.appendChild(this.leftKeyElement),this.screenKeysElement.appendChild(this.downKeyElement),this.screenKeysElement.appendChild(this.upKeyElement),this.screenKeysElement.appendChild(this.rightKeyElement),this.containerElement.appendChild(this.element),this.containerElement.appendChild(this.inputElement),this.containerElement.appendChild(this.screenKeysElement),this.containerElement.appendChild(this.sizeIndicatorElement),e.appendChild(this.containerElement),this.screenKeysElement.style.display=navigator.userAgent.match(/(iPad|iPhone|Android)/)?"block":"none",this.refresh(0,this.rows-1),this.bindKeys(),this.focus(),i.on(document,"mousedown",function(e){if(!a.focus)return;var t=e.target||e.srcElement;if(!t)return;do if(t===a.focus.element)return;while(t=t.parentNode);a.focus.blur()}),i.on(this.element,"mousedown",function(e){var n=e.button!=null?+e.button:e.which!=null?e.which-1:null;a.isMSIE&&(n=n===1?0:n===4?1:n);if(s.getSelection())return;if(n!==2)return t.focus();t.element.contentEditable=!0,t.element.focus(),setTimeout(function(){t.inputElement.focus(),t.element.contentEditable="inherit"},1)},!0),i.on(this.inputElement,"paste",function(e){setTimeout(function(){t.commitInput("",e)},20)}),this.bindMouse(),null==a.brokenBold&&(a.brokenBold=s.isBoldBroken()),this.element.style.backgroundColor=this.colors[256],this.element.style.color=this.colors[257]},a.prototype.sizeToFit=function(){if(!s.isVisible(this.element))return;var e=500,t=500,n=document.createElement("div");n.className="terminal",n.style.width="0",n.style.height="0",n.style.visibility="hidden";var r=document.createElement("div");r.style.position="absolute",r.innerHTML="W",n.appendChild(r),this.containerElement.insertBefore(n,this.element.nextSibling);var i=this.element.clientWidth,o=this.element.clientHeight,u;for(u=1;e>u&&!(r.innerHTML+="W",r.offsetWidth>i);u++);r.innerHTML="W";for(i=1;t>i&&!(r.innerHTML+="<br />W",r.offsetHeight>o);i++);r.parentNode.removeChild(r),n.parentNode.removeChild(n),this.resize(u,i)},a.prototype.bindMouse=function(){function e(e){var t,n,i,o;switch(e.type){case"mousedown":t=null!=e.button?+e.button:null!=e.which?e.which-1:null,~navigator.userAgent.indexOf("MSIE")&&(t=1===t?0:4===t?1:t);break;case"mouseup":t=3;break;case"DOMMouseScroll":t=0>e.detail?64:65;break;case"mousewheel":t=0<e.wheelDeltaY?64:65}i=e.shiftKey?4:0,o=e.metaKey?8:0,n=e.ctrlKey?16:0,i=i|o|n,u.vt200Mouse?i&=n:u.normalMouse||(i=0),t=32+(i<<2)+t;if(n=s(e))switch(r(t,n),e.type){case"mousedown":a=t;break;case"mouseup":a=32}}function t(e){var t=a;(e=s(e))&&r(t+32,e)}function n(e,t){u.utfMouse?128>t?e.push(t):(2046<t&&(t=2046),e.push(192|t>>6),e.push(128|t&63)):(254<t&&(t=254),e.push(t))}function r(e,t){if(u.vt300Mouse){e&=3,t.x-=32,t.y-=32;var r="[24";if(0===e)r+="1";else if(1===e)r+="3";else if(2===e)r+="5";else{if(3===e)return;r+="0"}r+="~["+t.x+","+t.y+"]\r",u.send(r)}else u.decLocator?(e&=3,t.x-=32,t.y-=32,0===e?e=2:1===e?e=4:2===e?e=6:3===e&&(e=3),u.send("["+e+";"+(3===e?4:0)+";"+t.y+";"+t.x+";"+(t.page||0)+"&w")):u.urxvtMouse?(t.x-=32,t.y-=32,u.send("["+e+";"+t.x+";"+t.y+"M")):u.sgrMouse?(t.x-=32,t.y-=32,u.send("[<"+(3===(e&3)?e&-4:e)+";"+t.x+";"+t.y+(3===(e&3)?"m":"M"))):(r=[],n(r,e),n(r,t.x),n(r,t.y),u.send("[M"+String.fromCharCode.apply(String,r)))}function s(e){if(null!=e.pageX){for(var t=e.pageX,n=e.target;"terminal-row"!==n.className;)if(n=n.parentNode,null==n)return;for(var r=n;r!==document.documentElement;)t-=r.offsetLeft,r=r.parentNode;return t=Math.ceil(t/n.offsetWidth*u.cols),n=parseInt(n.getAttribute("data-row")||1,10),1>t&&(t=1),1>n&&(n=1),t>u.cols&&(t=u.cols),n>u.rows&&(n=u.rows),{x:t+32,y:n+32,down:"mousedown"===e.type,up:"mouseup"===e.type,wheel:e.type===f,move:"mousemove"===e.type}}}var o=this.element,u=this,a=32,f="onmousewheel"in window?"mousewheel":"DOMMouseScroll";i.on(o,"mousedown",function(n){if(u.mouseEvents){e(n),u.selectionMode||u.focus();if(u.vt200Mouse)return e({__proto__:n,type:"mouseup"}),i.cancel(n);u.normalMouse&&i.on(document,"mousemove",t);if(!u.x10Mouse){var r=function(n){return e(n),i.off(document,"mousemove",t),i.off(document,"mouseup",r),i.off(document,"mousedown",r),cancel(n)};i.on(document,"mouseup",r),i.on(document,"mousedown",r)}return i.cancel(n)}}),i.on(o,"mouseup",function(e){window.getSelection&&0<window.getSelection().toString().length&&(u.selectionMode=!0),setTimeout(function(){window.getSelection&&0===window.getSelection().toString().length&&(u.selectionMode=!1)},0)}),i.on(o,"touchend",function(e){u.selectionMode||u.focus(),e.stopPropagation()}),i.on(o,"click",function(e){u.selectionMode||u.focus()}),i.on(o,f,function(t){if(u.mouseEvents&&!u.x10Mouse&&!u.vt300Mouse&&!u.decLocator)return e(t),i.cancel(t)}),i.on(o,f,function(e){if(!u.mouseEvents&&!u.applicationKeypad)return"DOMMouseScroll"===e.type?u.scrollDisp(0>e.detail?-5:5):u.scrollDisp(0<e.wheelDeltaY?-5:5),i.cancel(e)})},a.prototype.destroy=function(){this.writable=this.readable=!1,this._events={},this.handler=function(){},this.write=function(){}},a.prototype.refresh=function(e,t){var n,r,i,s,o,u,f,l,c,h,p,d,v,m=a.focus===this;t-e>=this.rows/2&&(v=this.element.parentNode)&&v.removeChild(this.element),f=this.cols;for(r=e;r<=t;r++){n=r+this.ydisp,s=this.lines[n],o="",n=r===this.y&&this.cursorState&&this.ydisp===this.ybase&&!this.cursorHidden?this.x:-1,h=this.defAttr;for(i=0;i<f;i++){l=s[i][0],u=s[i][1],i===n&&(c=l,l=-1),l!==h&&(h!==this.defAttr&&(o+="</span>"),l!==this.defAttr&&(o+="<span ",-1===l?(o+='class="terminal-cursor" ',m?(p=c>>9&511,h=c&511):(p=c&511,h=c>>9&511),d=c>>18):(p=l&511,h=l>>9&511,d=l>>18),o+='style="',!m&&-1===l&&(o+="outline:1px solid "+this.colors[h]+";"),d&1&&(a.brokenBold||(o+="font-weight:bold;"),8>h&&(h+=8)),d&2&&(o+="text-decoration:underline;"),256!==p&&(o+="background-color:"+this.colors[p]+";"),257!==h&&(o+="color:"+this.colors[h]+";"),o+='">'));switch(u){case"&":o+="&amp;";break;case"<":o+="&lt;";break;case">":o+="&gt;";break;default:o=" ">=u?o+"&nbsp;":o+u}h=l}h!==this.defAttr&&(o+="</span>"),this.children[r].innerHTML=o}v&&v.appendChild(this.element)},a.prototype.redrawCursor=function(){this.refresh(this.y,this.y)},a.prototype.showCursor=function(){this.cursorState||(this.cursorState=1),this.redrawCursor()},a.prototype.scroll=function(){var e;++this.ybase===a.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.ydisp=this.ybase,e=this.ybase+this.rows-1,e-=this.rows-1-this.scrollBottom,e===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(e,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},a.prototype.scrollDisp=function(e){this.ydisp+=e,this.ydisp>this.ybase?this.ydisp=this.ybase:0>this.ydisp&&(this.ydisp=0),this.refresh(0,this.rows-1)},a.prototype.write=function(e){var t=this;this.writeQueue||setTimeout(function(){t._write(t.writeQueue),t.writeQueue=""},1),this.writeQueue+=e},a.prototype._write=function(e){var t=e.length,n=0,r;this.refreshEnd=this.refreshStart=this.y,this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.maxRange());for(;n<t;n++)switch(r=e[n],this.state){case 0:switch(r){case"":this.bell();break;case"\n":case"":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":0<this.x&&this.x--;break;case"	":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=1;break;default:" "<=r&&(this.charset&&this.charset[r]&&(r=this.charset[r]),this.x>=this.cols&&(this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll())),this.lines[this.y+this.ybase][this.x]=[this.curAttr,r],this.x++,this.updateRange(this.y))}break;case 1:switch(r){case"[":this.params=[],this.currentParam=0,this.state=2;break;case"]":this.params=[],this.currentParam=0,this.state=3;break;case"P":this.params=[],this.currentParam=0,this.state=5;break;case"_":this.state=6;break;case"^":this.state=6;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,a.charsets.US),this.state=0,n++;break;case"(":case")":case"*":case"+":case"-":case".":switch(r){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=4;break;case"/":this.gcharset=3,this.state=4,n--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=0;break;case"8":this.restoreCursor(),this.state=0;break;case"#":this.state=0,n++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.state=0;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.state=0;break;default:this.state=0,this.error("Unknown ESC control: %s.",r)}break;case 4:switch(r){case"0":r=a.charsets.SCLD;break;case"A":r=a.charsets.UK;break;case"B":r=a.charsets.US;break;case"4":r=a.charsets.Dutch;break;case"C":case"5":r=a.charsets.Finnish;break;case"R":r=a.charsets.French;break;case"Q":r=a.charsets.FrenchCanadian;break;case"K":r=a.charsets.German;break;case"Y":r=a.charsets.Italian;break;case"E":case"6":r=a.charsets.NorwegianDanish;break;case"Z":r=a.charsets.Spanish;break;case"H":case"7":r=a.charsets.Swedish;break;case"=":r=a.charsets.Swiss;break;case"/":r=a.charsets.ISOLatin,n++;break;default:r=a.charsets.US}this.setgCharset(this.gcharset,r),this.gcharset=null,this.state=0;break;case 3:if(""===r||""===r){""===r&&n++,this.params.push(this.currentParam);switch(this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title))}this.params=[],this.state=this.currentParam=0}else this.params.length?this.currentParam+=r:"0"<=r&&"9">=r?this.currentParam=10*this.currentParam+r.charCodeAt(0)-48:";"===r&&(this.params.push(this.currentParam),this.currentParam="");break;case 2:if("?"===r||">"===r||"!"===r){this.prefix=r;break}if("0"<=r&&"9">=r){this.currentParam=10*this.currentParam+r.charCodeAt(0)-48;break}if("$"===r||'"'===r||" "===r||"'"===r){this.postfix=r;break}this.params.push(this.currentParam),this.currentParam=0;if(";"===r)break;this.state=0;switch(r){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.charAttributes(this.params);break;case"n":this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":2>this.params.length&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",r)}this.postfix=this.prefix="";break;case 5:if(""===r||""===r){""===r&&n++;switch(this.prefix){case"":break;case"$q":r=this.currentParam;var i=!1;switch(r){case'"q':r='0"q';break;case'"p':r='61"p';break;case"r":r=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r";break;case"m":r="0m";break;default:this.error("Unknown DCS Pt: %s.",r),r=""}this.send("P"+ +i+"$r"+r+"\\");break;case"+p":break;case"+q":r=this.currentParam,i=!1,this.send("P"+ +i+"+r"+r+"\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=0}else this.currentParam?this.currentParam+=r:!this.prefix&&"$"!==r&&"+"!==r?this.currentParam=r:2===this.prefix.length?this.currentParam=r:this.prefix+=r;break;case 6:if(""===r||""===r)""===r&&n++,this.state=0}this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd)},a.prototype.writeln=function(e){this.write(e+"\r\n")},a.prototype.keyDown=function(e){e=this.applyVirtualKey(e);var n=this,r=null;switch(e.keyCode){case 8:if(e.shiftKey){r="\b";break}if(e.altKey){r="";break}r="";break;case 9:if(e.shiftKey){r="[Z";break}r="	";break;case 13:r="\r";break;case 27:r="";break;case 37:if(this.applicationCursor){r="OD";break}if(e.altKey){r="b";break}r="[D";break;case 39:if(this.applicationCursor){r="OC";break}if(e.altKey){r="f";break}r="[C";break;case 38:if(this.applicationCursor){r="OA";break}if(e.ctrlKey)return this.scrollDisp(-1),t(e);r="[A";break;case 40:if(this.applicationCursor){r="OB";break}if(e.ctrlKey)return this.scrollDisp(1),t(e);r="[B";break;case 46:r="[3~";break;case 45:r="[2~";break;case 36:if(this.applicationKeypad){r="OH";break}r="OH";break;case 35:if(this.applicationKeypad){r="OF";break}r="OF";break;case 33:if(e.shiftKey)return this.scrollDisp(-(this.rows-1)),i.cancel(e);r="[5~";break;case 34:if(e.shiftKey)return this.scrollDisp(this.rows-1),i.cancel(e);r="[6~";break;case 112:r="OP";break;case 113:r="OQ";break;case 114:r="OR";break;case 115:r="OS";break;case 116:r="[15~";break;case 117:r="[17~";break;case 118:r="[18~";break;case 119:r="[19~";break;case 120:r="[20~";break;case 121:r="[21~";break;case 122:r="[23~";break;case 123:r="[24~";break;default:e.ctrlKey&&!e.altKey?!a.isMac&&e.shiftKey&&86===e.keyCode?(r="",setTimeout(function(){n.commitInput("",e)},20)):65<=e.keyCode&&90>=e.keyCode?r=String.fromCharCode(e.keyCode-64):32===e.keyCode?r=String.fromCharCode(0):51<=e.keyCode&&55>=e.keyCode?r=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?r=String.fromCharCode(127):219===e.keyCode?r=String.fromCharCode(27):221===e.keyCode&&(r=String.fromCharCode(29)):a.isMac&&e.metaKey&&86===e.keyCode?(r="",setTimeout(function(){n.commitInput("",e)},20)):!e.ctrlKey&&(!a.isMac&&e.altKey||a.isMac&&e.metaKey)&&(65<=e.keyCode&&90>=e.keyCode?r=""+String.fromCharCode(e.keyCode+32):192===e.keyCode?r="`":48<=e.keyCode&&57>=e.keyCode&&(r=""+(e.keyCode-48)))}return r?(this.commitInput(r,e),i.cancel(e)):(""!==r&&this.showBufferedText(),!0)},a.prototype.showBufferedText=function(){var e=this.inputElement;setTimeout(function(){0<e.value.length&&-1===e.className.indexOf(" visible")&&(e.className+=" visible")},0)},a.prototype.commitInput=function(e,t){var n=this.inputElement.value;0<n.length&&(e=n+e,this.inputElement.value="",this.inputElement.className=this.inputElement.className.replace(" visible","")),this.emit("key",e,t),this.showCursor(),this.handler(e)},a.prototype.setgLevel=function(e){this.glevel=e,this.charset=this.charsets[e]},a.prototype.setgCharset=function(e,t){this.charsets[e]=t,this.glevel===e&&(this.charset=t)},a.prototype.keyPress=function(e){e=this.applyVirtualKey(e);var t;if(e.metaKey&&118===e.charCode)return!1;i.cancel(e);if(e.charCode)t=e.charCode;else if(null==e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}if(t&&!e.ctrlKey||t&&e.altKey&&e.ctrlKey||t&&e.altKey||t&&e.altGraphKey)t=String.fromCharCode(t),this.commitInput(t,e);return!1},a.prototype.send=function(e){var t=this;this.queue||setTimeout(function(){t.handler(t.queue),t.queue=""},1),this.queue+=e},a.prototype.bell=function(){if(a.visualBell){var e=this;this.element.style.borderColor="white",setTimeout(function(){e.element.style.borderColor=""},10),a.popOnBell&&this.focus()}},a.prototype.log=function(){if(a.debug&&console&&console.log){var e=Array.prototype.slice.call(arguments);console.log.apply(console,e)}},a.prototype.error=function(){if(a.debug&&console&&console.error){var e=Array.prototype.slice.call(arguments);console.error.apply(console,e)}},a.prototype.resize=function(e,t){var n,r,i;e<1&&(e=1),t<1&&(t=1),i=this.cols;if(i<e){r=[this.defAttr," "];for(n=this.lines.length;n--;)for(;this.lines[n].length<e;)this.lines[n].push(r)}else if(i>e)for(n=this.lines.length;n--;)for(;this.lines[n].length>e;)this.lines[n].pop();this.setupStops(i),this.cols=e,i=this.rows;if(i<t)for(r=this.element;i++<t;)this.lines.length<t+this.ybase&&this.lines.push(this.blankLine()),this.children.length<t&&(n=document.createElement("div"),n.className="terminal-row",n.setAttribute("data-row",i.toString()),r.appendChild(n),this.children.push(n));else if(i>t)for(;i-->t;)this.lines.length>t+this.ybase&&this.lines.pop(),this.children.length>t&&(r=this.children.pop(),r&&r.parentNode.removeChild(r));this.rows=t,this.y>=t&&(this.y=t-1),this.x>=e&&(this.x=e-1),this.scrollTop=0,this.scrollBottom=t-1,this.refresh(0,this.rows-1),this.normal=null,this.showSize(e,t),this.emit("resize",e,t)},a.prototype.showSize=function(e,t){var n=this.sizeIndicatorElement;n.innerHTML=e+"x"+t,n.style.display="block",void 0!=this.showSizeTimeout&&clearTimeout(this.showSizeTimeout),this.showSizeTimeout=setTimeout(function(){n.style.display="none"},2e3)},a.prototype.updateRange=function(e){e<this.refreshStart&&(this.refreshStart=e),e>this.refreshEnd&&(this.refreshEnd=e)},a.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},a.prototype.setupStops=function(e){null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);for(;e<this.cols;e+=8)this.tabs[e]=!0},a.prototype.prevStop=function(e){null==e&&(e=this.x);for(;!this.tabs[--e]&&0<e;);return e>=this.cols?this.cols-1:0>e?0:e},a.prototype.nextStop=function(e){null==e&&(e=this.x);for(;!this.tabs[++e]&&e<this.cols;);return e>=this.cols?this.cols-1:0>e?0:e},a.prototype.eraseRight=function(e,t){for(var n=this.lines[this.ybase+t],r=[this.curAttr," "];e<this.cols;e++)n[e]=r;this.updateRange(t)},a.prototype.eraseLeft=function(e,t){var n=this.lines[this.ybase+t],r=[this.curAttr," "];for(e++;e--;)n[e]=r;this.updateRange(t)},a.prototype.eraseLine=function(e){this.eraseRight(0,e)},a.prototype.blankLine=function(e){e=[e?this.curAttr:this.defAttr," "];for(var t=[],n=0;n<this.cols;n++)t[n]=e;return t},a.prototype.ch=function(e){return e?[this.curAttr," "]:[this.defAttr," "]},a.prototype.is=function(e){return 0===((this.termName||a.termName)+"").indexOf(e)},a.prototype.handler=function(e){this.emit("data",e)},a.prototype.handleTitle=function(e){this.emit("title",e)},a.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=0},a.prototype.reverseIndex=function(){var e;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),e=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-e+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=0},a.prototype.reset=function(){this.resetState(this.cols,this.rows),this.refresh(0,this.rows-1)},a.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=0},a.prototype.cursorUp=function(e){e=e[0],1>e&&(e=1),this.y-=e,0>this.y&&(this.y=0)},a.prototype.cursorDown=function(e){e=e[0],1>e&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},a.prototype.cursorForward=function(e){e=e[0],1>e&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},a.prototype.cursorBackward=function(e){e=e[0],1>e&&(e=1),this.x-=e,0>this.x&&(this.x=0)},a.prototype.cursorPos=function(e){var t;t=e[0]-1,e=2<=e.length?e[1]-1:0,0>t?t=0:t>=this.rows&&(t=this.rows-1),0>e?e=0:e>=this.cols&&(e=this.cols-1),this.x=e,this.y=t},a.prototype.eraseInDisplay=function(e){switch(e[0]){case 0:this.eraseRight(this.x,this.y);for(e=this.y+1;e<this.rows;e++)this.eraseLine(e);break;case 1:this.eraseLeft(this.x,this.y);for(e=this.y;e--;)this.eraseLine(e);break;case 2:for(e=this.rows;e--;)this.eraseLine(e)}},a.prototype.eraseInLine=function(e){switch(e[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},a.prototype.charAttributes=function(e){for(var t=e.length,n=0,r,i;n<t;n++)if(r=e[n],30<=r&&37>=r)this.curAttr=this.curAttr&-261633|r-30<<9;else if(40<=r&&47>=r)this.curAttr=this.curAttr&-512|r-40;else if(90<=r&&97>=r)r+=8,this.curAttr=this.curAttr&-261633|r-90<<9;else if(100<=r&&107>=r)r+=8,this.curAttr=this.curAttr&-512|r-100;else if(0===r)this.curAttr=this.defAttr;else if(1===r)this.curAttr|=262144;else if(4===r)this.curAttr|=524288;else if(7===r||27===r){if(7===r){if(this.curAttr>>18&4)continue;this.curAttr|=1048576}else if(27===r){if(~(this.curAttr>>18)&4)continue;this.curAttr&=-1048577}r=this.curAttr&511,i=this.curAttr>>9&511,this.curAttr=this.curAttr&-262144|r<<9|i}else 22===r?this.curAttr&=-262145:24===r?this.curAttr&=-524289:39===r?(this.curAttr&=-261633,this.curAttr|=(this.defAttr>>9&511)<<9):49===r?(this.curAttr&=-512,this.curAttr|=this.defAttr&511):38===r?5===e[n+1]&&(n+=2,r=e[n]&255,this.curAttr=this.curAttr&-261633|r<<9):48===r&&5===e[n+1]&&(n+=2,r=e[n]&255,this.curAttr=this.curAttr&-512|r)},a.prototype.deviceStatus=function(e){if(this.prefix){if("?"===this.prefix)switch(e[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R")}}else switch(e[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},a.prototype.insertChars=function(e){var t,n,r;e=e[0],1>e&&(e=1),t=this.y+this.ybase,n=this.x;for(r=[this.curAttr," "];e--&&n<this.cols;)this.lines[t].splice(n++,0,r),this.lines[t].pop()},a.prototype.cursorNextLine=function(e){e=e[0],1>e&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},a.prototype.cursorPrecedingLine=function(e){e=e[0],1>e&&(e=1),this.y-=e,0>this.y&&(this.y=0),this.x=0},a.prototype.cursorCharAbsolute=function(e){e=e[0],1>e&&(e=1),this.x=e-1},a.prototype.insertLines=function(e){var t,n;e=e[0],1>e&&(e=1),t=this.y+this.ybase,n=this.rows-1-this.scrollBottom;for(n=this.rows-1+this.ybase-n+1;e--;)this.lines.splice(t,0,this.blankLine(!0)),this.lines.splice(n,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},a.prototype.deleteLines=function(e){var t,n;e=e[0],1>e&&(e=1),t=this.y+this.ybase,n=this.rows-1-this.scrollBottom;for(n=this.rows-1+this.ybase-n;e--;)this.lines.splice(n+1,0,this.blankLine(!0)),this.lines.splice(t,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},a.prototype.deleteChars=function(e){var t,n;e=e[0],1>e&&(e=1),t=this.y+this.ybase;for(n=[this.curAttr," "];e--;)this.lines[t].splice(this.x,1),this.lines[t].push(n)},a.prototype.eraseChars=function(e){var t,n,r;e=e[0],1>e&&(e=1),t=this.y+this.ybase,n=this.x;for(r=[this.curAttr," "];e--&&n<this.cols;)this.lines[t][n++]=r},a.prototype.charPosAbsolute=function(e){e=e[0],1>e&&(e=1),this.x=e-1,this.x>=this.cols&&(this.x=this.cols-1)},a.prototype.HPositionRelative=function(e){e=e[0],1>e&&(e=1),this.x+=e,this.x>=this.cols&&(this.x=this.cols-1)},a.prototype.sendDeviceAttributes=function(e){0<e[0]||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(e[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},a.prototype.linePosAbsolute=function(e){e=e[0],1>e&&(e=1),this.y=e-1,this.y>=this.rows&&(this.y=this.rows-1)},a.prototype.VPositionRelative=function(e){e=e[0],1>e&&(e=1),this.y+=e,this.y>=this.rows&&(this.y=this.rows-1)},a.prototype.HVPosition=function(e){1>e[0]&&(e[0]=1),1>e[1]&&(e[1]=1),this.y=e[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=e[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},a.prototype.setMode=function(e){if("object"==typeof e)for(var t=e.length,n=0;n<t;n++)this.setMode(e[n]);else if(this.prefix){if("?"===this.prefix)switch(e){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,a.charsets.US),this.setgCharset(1,a.charsets.US),this.setgCharset(2,a.charsets.US),this.setgCharset(3,a.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===e,this.vt200Mouse=1e3===e,this.normalMouse=1e3<e,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:this.normal||(e={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs},this.reset(),this.normal=e,this.showCursor())}}else switch(e){case 4:this.insertMode=!0}},a.prototype.resetMode=function(e){if("object"==typeof e)for(var t=e.length,n=0;n<t;n++)this.resetMode(e[n]);else if(this.prefix){if("?"===this.prefix)switch(e){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 9:case 1e3:case 1002:case 1003:this.mouseEvents=this.normalMouse=this.vt200Mouse=this.x10Mouse=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(e){case 4:this.insertMode=!1}},a.prototype.setScrollRegion=function(e){this.prefix||(this.scrollTop=(e[0]||1)-1,this.scrollBottom=(e[1]||this.rows)-1,this.y=this.x=0)},a.prototype.saveCursor=function(e){this.savedX=this.x,this.savedY=this.y},a.prototype.restoreCursor=function(e){this.x=this.savedX||0,this.y=this.savedY||0},a.prototype.cursorForwardTab=function(e){for(e=e[0]||1;e--;)this.x=this.nextStop()},a.prototype.scrollUp=function(e){for(e=e[0]||1;e--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},a.prototype.scrollDown=function(e){for(e=e[0]||1;e--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},a.prototype.initMouseTracking=function(e){},a.prototype.resetTitleModes=function(e){},a.prototype.cursorBackwardTab=function(e){for(e=e[0]||1;e--;)this.x=this.prevStop()},a.prototype.repeatPrecedingCharacter=function(e){e=e[0]||1;for(var t=this.lines[this.ybase+this.y],n=t[this.x-1]||[this.defAttr," "];e--;)t[this.x++]=n},a.prototype.tabClear=function(e){e=e[0],0>=e?delete this.tabs[this.x]:3===e&&(this.tabs={})},a.prototype.mediaCopy=function(e){},a.prototype.setResources=function(e){},a.prototype.disableModifiers=function(e){},a.prototype.setPointerMode=function(e){},a.prototype.softReset=function(e){this.applicationCursor=this.applicationKeypad=this.wraparoundMode=this.originMode=this.insertMode=this.cursorHidden=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},a.prototype.requestAnsiMode=function(e){},a.prototype.requestPrivateMode=function(e){},a.prototype.setConformanceLevel=function(e){},a.prototype.loadLEDs=function(e){},a.prototype.setCursorStyle=function(e){},a.prototype.setCharProtectionAttr=function(e){},a.prototype.restorePrivateValues=function(e){},a.prototype.setAttrInRectangle=function(e){for(var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o,u;t<r+1;t++){o=this.lines[this.ybase+t];for(u=n;u<i;u++)o[u]=[s,o[u][1]]}this.updateRange(e[0]),this.updateRange(e[2])},a.prototype.savePrivateValues=function(e){},a.prototype.manipulateWindow=function(e){},a.prototype.reverseAttrInRectangle=function(e){},a.prototype.setTitleModeFeature=function(e){},a.prototype.setWarningBellVolume=function(e){},a.prototype.setMarginBellVolume=function(e){},a.prototype.copyRectangle=function(e){},a.prototype.enableFilterRectangle=function(e){},a.prototype.requestParameters=function(e){},a.prototype.selectChangeExtent=function(e){},a.prototype.fillRectangle=function(e){for(var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o,u;n<i+1;n++){o=this.lines[this.ybase+n];for(u=r;u<s;u++)o[u]=[o[u][0],String.fromCharCode(t)]}this.updateRange(e[1]),this.updateRange(e[3])},a.prototype.enableLocatorReporting=function(e){},a.prototype.eraseRectangle=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s,o,u;for(u=[this.curAttr," "];t<r+1;t++){s=this.lines[this.ybase+t];for(o=n;o<i;o++)s[o]=u}this.updateRange(e[0]),this.updateRange(e[2])},a.prototype.setLocatorEvents=function(e){},a.prototype.selectiveEraseRectangle=function(e){},a.prototype.requestLocatorPosition=function(e){},a.prototype.insertColumns=function(){for(var e=params[0],t=this.ybase+this.rows,n=[this.curAttr," "],r;e--;)for(r=this.ybase;r<t;r++)this.lines[r].splice(this.x+1,0,n),this.lines[r].pop();this.maxRange()},a.prototype.deleteColumns=function(){for(var e=params[0],t=this.ybase+this.rows,n=[this.curAttr," "],r;e--;)for(r=this.ybase;r<t;r++)this.lines[r].splice(this.x,1),this.lines[r].push(n);this.maxRange()},a.charsets=u,a.isMac=~navigator.userAgent.indexOf("Mac"),a.isMSIE=~navigator.userAgent.indexOf("MSIE"),a.themes=o,n.exports=a},{"./charsets":1,"./events":2,"./themes":4,"./utils":5}],4:[function(e,t,n){var r=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],i=function(e){function t(e,t,i){r.push("#"+n(e)+n(t)+n(i))}function n(e){return e=e.toString(16),2>e.length?"0"+e:e}var r=e,i=[0,95,135,175,215,255],s;for(s=0;216>s;s++)t(i[s/36%6|0],i[s/6%6|0],i[s%6]);for(s=0;24>s;s++)i=8+10*s,t(i,i,i);return r},s=i(r.slice()),o=function(e,t){return e.length===8?e=e.concat(t.slice(8)):e.length===16?e=e.concat(t.slice(16)):e.length===10?e=e.slice(0,-2).concat(t.slice(8,-2),e.slice(-2)):e.length===18&&(e=e.concat(t.slice(16,-2),e.slice(-2))),e},u=function(e){var t=e.palette.slice();return t[256]=e.background||"#000000",t[257]=e.foreground||"#f0f0f0",o(t,s)},a={"default":{palette:["#000000","#c81908","#00c01d","#c8c221","#0033c5","#c73ac5","#00c6c7","#c7c7c7","#686868","#8a8a8a","#67f86e","#fff970","#6678fc","#ff7cfd","#65fdff","#ffffff"]},blazer:{palette:["#262626","#dbbdbd","#bddbbd","#dbdbbd","#bdbddb","#dbbddb","#bddbdb","#ffffff"],name:"blazer"},chalkboard:{foreground:"#d9e6f2",background:"#29262f",cursor:"#d9e6f2",cursor_text:"#29262f",palette:["#000000","#c37372","#72c373","#c2c372","#7372c3","#c372c2","#72c2c3","#d9d9d9","#323232","#dbaaaa","#aadbaa","#dadbaa","#aaaadb","#dbaada","#aadadb","#ffffff"],name:"chalkboard"},dark_pastel:{foreground:"#ffffff",background:"#000000",cursor:"#bbbbbb",cursor_text:"#ffffff",palette:["#000000","#ff5555","#55ff55","#ffff55","#5555ff","#ff55ff","#55ffff","#bbbbbb","#555555","#ff5555","#55ff55","#ffff55","#5555ff","#ff55ff","#55ffff","#ffffff"],name:"dark_pastel"},desert:{foreground:"#ffffff",background:"#333333",cursor:"#00ff00",cursor_text:"#000000",palette:["#4d4d4d","#ff2b2b","#98fb98","#f0e68c","#cd853f","#ffdead","#ffa0a0","#f5deb3","#555555","#ff5555","#55ff55","#ffff55","#87ceff","#ff55ff","#ffd700","#ffffff"],name:"desert"},espresso:{foreground:"#ffffff",background:"#323232",cursor:"#d6d6d6",cursor_text:"#ffffff",palette:["#343434","#d25151","#a5c261","#ffc66d","#6c99bb","#d197d9","#bed6ff","#eeeeec","#535353","#f00c0c","#c2e075","#e1e38b","#8ab7d9","#efb5f7","#dcf3ff","#ffffff"],name:"espresso"},github:{foreground:"#3e3e3e",background:"#f4f4f4",cursor:"#3f3f3f",cursor_text:"#f4f4f4",palette:["#3e3e3e","#970b16","#07962a","#f8eec7","#003e8a","#e94691","#89d1ec","#ffffff","#666666","#de0000","#87d5a2","#f1d007","#2e6cba","#ffa29f","#1cfafe","#ffffff"],name:"github"},grass:{foreground:"#fff0a5",background:"#13773c",cursor:"#8c2800",cursor_text:"#ffffff",palette:["#000000","#bb0000","#00bb00","#e7b000","#0000a3","#950061","#00bbbb","#bbbbbb","#555555","#bb0000","#00bb00","#e7b000","#0000bb","#ff55ff","#55ffff","#ffffff"],name:"grass"},homebrew:{foreground:"#00ff00",background:"#000000",cursor:"#23ff18",cursor_text:"#ff0017",palette:["#000000","#990000","#00a600","#999900","#0000b2","#b200b2","#00a6b2","#bfbfbf","#666666","#e50000","#00d900","#e5e500","#0000ff","#e500e5","#00e5e5","#e5e5e5"],name:"homebrew"},hurtado:{foreground:"#dadbda",background:"#000000",cursor:"#bbbbbb",cursor_text:"#ffffff",palette:["#575757","#ff1b00","#a5df55","#fbe74a","#486387","#fc5ef0","#85e9fe","#cbcbcb","#252525","#d41c00","#a5df55","#fbe749","#89bdff","#bf00c0","#85e9fe","#dbdbdb"],name:"hurtado"},idletoes:{foreground:"#ffffff",background:"#323232",cursor:"#d6d6d6",cursor_text:"#000000",palette:["#323232","#d25252","#7fe173","#ffc66d","#4098ff","#f57fff","#bed6ff","#eeeeec","#535353","#f07070","#9dff90","#ffe48b","#5eb7f7","#ff9dff","#dcf4ff","#ffffff"],name:"idletoes"},kibble:{foreground:"#f7f7f7",background:"#0e100a",cursor:"#9fda9c",cursor_text:"#000000",palette:["#4d4d4d","#c70031","#29cf13","#d8e30e","#3449d1","#8400ff","#0798ab","#e2d1e3","#5a5a5a","#f01578","#6ce05c","#f3f79e","#97a4f7","#c495f0","#68f2e0","#ffffff"],name:"kibble"},man_page:{foreground:"#000000",background:"#fef49c",cursor:"#7f7f7f",cursor_text:"#000000",palette:["#000000","#cc0000","#00a600","#999900","#0000b2","#b200b2","#00a6b2","#cccccc","#666666","#e50000","#00d900","#e5e500","#0000ff","#e500e5","#00e5e5","#e5e5e5"],name:"man_page"},monokai_soda:{foreground:"#c4c4b5",background:"#191919",cursor:"#f6f6ec",cursor_text:"#c4c4b5",palette:["#191919","#f3005f","#97e023","#fa8419","#9c64fe","#f3005f","#57d1ea","#c4c4b5","#615e4b","#f3005f","#97e023","#dfd561","#9c64fe","#f3005f","#57d1ea","#f6f6ee"],name:"monokai_soda"},neopolitan:{foreground:"#ffffff",background:"#17130f",cursor:"#ffffff",cursor_text:"#ffffff",palette:["#17130f","#800000","#61ce3c","#fbde2d","#253b76","#ff0080","#8da6ce","#f8f8f8","#17130f","#800000","#61ce3c","#fbde2d","#253b76","#ff0080","#8da6ce","#f8f8f8"],name:"neopolitan"},novel:{foreground:"#3b2322",background:"#dfdbc3",cursor:"#73635a",cursor_text:"#000000",palette:["#000000","#cc0000","#009600","#d06b00","#0000cc","#cc00cc","#0087cc","#cccccc","#7f7f7f","#cc0000","#009600","#d06b00","#0000cc","#cc00cc","#0086cb","#ffffff"],name:"novel"},ocean:{foreground:"#ffffff",background:"#224fbc",cursor:"#7f7f7f",cursor_text:"#ffffff",palette:["#000000","#990000","#00a600","#999900","#0000b2","#b200b2","#00a6b2","#bfbfbf","#666666","#e50000","#00d900","#e5e500","#0000ff","#e500e5","#00e5e5","#e5e5e5"],name:"ocean"},pro:{foreground:"#f2f2f2",background:"#000000",cursor:"#4d4d4d",cursor_text:"#ffffff",palette:["#000000","#990000","#00a600","#999900","#1f08db","#b200b2","#00a6b2","#bfbfbf","#666666","#e50000","#00d900","#e5e500","#0000ff","#e500e5","#00e5e5","#e5e5e5"],name:"pro"},red_sands:{foreground:"#d7c9a7",background:"#79241e",cursor:"#ffffff",cursor_text:"#000000",palette:["#000000","#ff3f00","#00bb00","#e7b000","#0071ff","#bb00bb","#00bbbb","#bbbbbb","#555555","#bb0000","#00bb00","#e7b000","#0071ae","#ff55ff","#55ffff","#ffffff"],name:"red_sands"},seafoam_pastel:{foreground:"#d3e7d3",background:"#243434",cursor:"#576479",cursor_text:"#323232",palette:["#757575","#825d4d","#718c61","#ada16d","#4d7b82","#8a7167","#719393","#e0e0e0","#8a8a8a","#cf9379","#98d9aa","#fae79d","#79c3cf","#d6b2a1","#ade0e0","#e0e0e0"],name:"seafoam_pastel"},solarized_darcula:{foreground:"#d2d8d9",background:"#3d3f41",cursor:"#708183",cursor_text:"#002731",palette:["#25292a","#f24840","#629655","#b68800","#2075c7","#797fd4","#15968d","#d2d8d9","#25292a","#f24840","#629655","#b68800","#2075c7","#797fd4","#15968d","#d2d8d9"],name:"solarized_darcula"},solarized_dark:{foreground:"#708183",background:"#001e26",cursor:"#708183",cursor_text:"#002731",palette:["#002731","#d01b24","#728905","#a57705","#2075c7","#c61b6e","#259185","#e9e2cb","#001e26","#bd3612","#465a61","#52676f","#708183","#5856b9","#81908f","#fcf4dc"],name:"solarized_dark"},solarized_light:{foreground:"#52676f",background:"#fcf4dc",cursor:"#52676f",cursor_text:"#e9e2cb",palette:["#002731","#d01b24","#728905","#a57705","#2075c7","#c61b6e","#259185","#e9e2cb","#001e26","#bd3612","#465a61","#52676f","#708183","#5856b9","#81908f","#fcf4dc"],name:"solarized_light"},symfonic:{foreground:"#ffffff",background:"#000000",cursor:"#dc322f",cursor_text:"#ffffff",palette:["#000000","#dc322f","#56db3a","#ff8400","#0084d4","#b729d9","#ccccff","#ffffff","#1b1d21","#dc322f","#56db3a","#ff8400","#0084d4","#b729d9","#ccccff","#ffffff"],name:"symfonic"},terminal_basic:{foreground:"#000000",background:"#ffffff",cursor:"#7f7f7f",cursor_text:"#000000",palette:["#000000","#990000","#00a600","#999900","#0000b2","#b200b2","#00a6b2","#bfbfbf","#666666","#e50000","#00d900","#e5e500","#0000ff","#e500e5","#00e5e5","#e5e5e5"],name:"terminal_basic"},vaughn:{foreground:"#dcdccc",background:"#25234e",cursor:"#ff5555",cursor_text:"#ffffff",palette:["#24234f","#705050","#60b48a","#dfaf8f","#5555ff","#f08cc3","#8cd0d3","#709080","#709080","#dca3a3","#60b48a","#f0dfaf","#5555ff","#ec93d3","#93e0e3","#ffffff"],name:"vaughn"},zenburn:{foreground:"#dcdccc",background:"#3f3f3f",cursor:"#73635a",cursor_text:"#000000",palette:["#4d4d4d","#705050","#60b48a","#f0dfaf","#506070","#dc8cc3","#8cd0d3","#dcdccc","#709080","#dca3a3","#c3bf9f","#e0cf9f","#94bff3","#ec93d3","#93e0e3","#ffffff"],name:"zenburn"}};t.exports={defaults:a,colors:u}},{}],5:[function(e,t,n){function r(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function i(e){var t,n=e.getBoundingClientRect(),r=document.documentElement,i=window.innerWidth||r.clientWidth,s=window.innerHeight||r.clientHeight,o=function(e,t){return document.elementFromPoint(e,t)},u="contains"in e?"contains":"compareDocumentPosition",a=u=="contains"?1:16;return n.right<0||n.bottom<0||n.left>i||n.top>s?!1:(t=o(n.left,n.top))==e||e[u](t)==a||(t=o(n.right,n.top))==e||e[u](t)==a||(t=o(n.right,n.bottom))==e||e[u](t)==a||(t=o(n.left,n.bottom))==e||e[u](t)==a}function s(){var e="";return typeof window.getSelection!="undefined"?window.getSelection().toString():typeof document.selection!="undefined"&&document.selection.type=="Text"?document.selection.createRange().htmlText:null}function o(){var e=document.createElement("span");e.innerHTML="hello world",document.body.appendChild(e);var t=e.scrollWidth;e.style.fontWeight="bold";var n=e.scrollWidth;return document.body.removeChild(e),t!==n}t.exports={inherits:r,isBoldBroken:o,isVisible:i,getSelection:s}},{}]},{},[3])(3)}),define("require-tools/less/normalize",[],function(){function r(e,r,i){if(e.indexOf("data:")===0)return e;e=t(e);var u=i.match(n),a=r.match(n);return a&&(!u||u[1]!=a[1]||u[2]!=a[2])?s(e,r):o(s(e,r),i)}function s(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));if(e.match(/^\//)||e.match(n))return e;var r=t.split("/"),i=e.split("/");r.pop();while(curPart=i.shift())curPart==".."?r.pop():r.push(curPart);return r.join("/")}function o(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var e=/([^:])\/+/g,t=function(t){return t.replace(e,"$1/")},n=/[^\:\/]*:\/\/([^\/])*/,u=function(e,n,i){n=t(n),i=t(i);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,o,u,e;while(o=s.exec(e)){u=o[3]||o[2]||o[5]||o[6]||o[4];var a;a=r(u,n,i);var f=o[5]||o[6]?1:0;e=e.substr(0,s.lastIndex-u.length-f-1)+a+e.substr(s.lastIndex-f-1),s.lastIndex=s.lastIndex+(a.length-u.length)}return e};return u.convertURIBase=r,u.absoluteURI=s,u.relativeURI=o,u}),define("require-tools/less/less",["require"],function(e){var t={};t.pluginBuilder="./less-builder";if(typeof window=="undefined")return t.load=function(e,t,n){n()},less;t.normalize=function(e,t){return e.substr(e.length-5,5)==".less"&&(e=e.substr(0,e.length-5)),e=t(e),e};var n=document.getElementsByTagName("head")[0],r=window.location.href.split("/");r[r.length-1]="",r=r.join("/");var i;window.less=window.less||{env:"development"};var s=0,o;t.inject=function(e){s<31&&(o=document.createElement("style"),o.type="text/css",n.appendChild(o),s++),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(document.createTextNode(e))};var u;return t.load=function(n,s,o,a){e(["./lessc","./normalize"],function(a,f){if(!i){var l=e.toUrl("base_url").split("/");l[l.length-1]="",i=f.absoluteURI(l.join("/"),r)+"/"}var c=s.toUrl(n+".less");c=f.absoluteURI(c,i),u=u||new a.Parser(window.less),u.parse('@import "'+c+'";',function(e,n){if(e)return o.error(e);t.inject(f(n.toCSS(),c,r)),setTimeout(o,7)})})},t}),define("require-tools/less/less!stylesheets/tab",[],function(){}),define("views/tab",["node_modules/sh.js/build/sh","less!stylesheets/tab.less"],function(e){var t=codebox.require("hr/utils"),n=codebox.require("hr/dom"),r=codebox.require("hr/hr"),i=codebox.require("views/tabs/base"),s=codebox.require("core/box"),o=codebox.require("core/user"),u=o.settings("terminal"),a=i.extend({className:i.prototype.className+" addon-terminal-tab",defaults:{shellId:null,resize:!0,cwd:null},menuTitle:"Terminal",events:{contextmenu:"clickTerm",click:"clickTerm",touchstart:"clickTerm"},initialize:function(r){var i=this;return a.__super__.initialize.apply(this,arguments),this.connected=!1,this.setTabState("loading",!0),this.menu.menuSection([{type:"checkbox",title:"Exit",action:function(e){i.closeTab()}}]),this.term_el=n("<div>",{"class":"tab-panel-inner terminal-body"}).appendTo(n("<div>",{"class":"tab-panel-body"}).appendTo(this.$el)).get(0),this.term=new e({cols:80,rows:24,theme:u.get("theme","default")}),this.term.open(this.term_el),this.interval=setInterval(t.bind(this.resize,this),2e3),this.sessionId=this.options.shellId||t.uniqueId("term"),this.shell=s.openShell({shellId:this.options.shellId?this.sessionId:this.sessionId+"-"+(new Date).getSeconds(),cwd:this.options.cwd}),this.on("tab:close",function(){clearInterval(this.interval),this.shell.disconnect(),this.term.destroy()},this),this.on("tab:state",function(e){e&&this.focus()},this),this.on("tab:layout",function(){i.resize()},this),this.setTabTitle("Terminal - "+this.sessionId),this.shell.once("data",function(){i.setTabState("loading",!1),i.resize()}),this.shell.on("data",function(e){i.write(e)}),this.shell.on("connect",function(){i.connected=!0,i.trigger("terminal:ready")},this),this.shell.on("disconnect",function(){i.writeln("Connection closed"),i.closeTab()}),this.term.on("data",function(e){i.shell.write(e)}),this.term.on("resize",function(e,t){i.shell.resize(e,t)}),this.shell.connect(),setTimeout(function(){i.focus()},300),this},render:function(){return this.$el.css({"font-family":u.get("font","monospace"),"font-size":u.get("size",13)+"px","line-height":u.get("line-height",1.3)}),n(this.term_el).css({background:this.term.colors[256],"border-color":this.term.colors[256]}),this.ready()},resize:function(){if(!this.options.resize)return!1;var e=this.$el.width(),t=this.$el.height();if(e!=this._width||t!=this._height)this._width=e,this._height=t,this.term.sizeToFit();return this},focus:function(){this.term.focus()},write:function(e){return this.term.write(e),this},writeln:function(e){return this.write(e+"\r\n")},clickTerm:function(e){e.stopPropagation(),this.openTab()}});return a}),define("client",["node_modules/sh.js/build/sh","views/tab"],function(e,t){var n=codebox.require("models/command"),r=codebox.require("core/commands/toolbar"),i=codebox.require("core/box"),s=codebox.require("core/tabs"),o=codebox.require("core/settings"),u=codebox.require("core/commands/menu");o.add({namespace:"terminal",title:"Terminal",defaults:{font:"monospace",size:13,"line-height":1.3,theme:"monokai_soda"},fields:{font:{label:"Font",type:"select",options:{monospace:"Monospace",arial:"Arial","Courier New":"Courier New","'MS Sans Serif', Geneva, sans-serif;":"MS Sans Serif","'Lucida Sans Unicode', 'Lucida Grande', sans-serif":"Lucida Sans Unicode",monaco:"Monaco (Mac OS)",menlo:"Menlo (Mac OS)","Ubuntu Mono":"Ubuntu Mono (Ubuntu)",Consolas:"Consolas (Windows)","Lucida Console":"Lucida Console (Windows)"}},size:{label:"Font size",type:"number",min:8,max:20,step:1},"line-height":{label:"Line height",type:"number",min:1,max:1.9,step:.1},theme:{label:"Theme",type:"select",options:_.chain(e.themes.defaults).clone().map(function(e,t){return[t,t]}).object().value()}}});var a=r.register("terminal.open",{category:"Terminal",title:"New Terminal",description:"New Tab Terminal",icons:{"default":"terminal"},offline:!1,shortcuts:["alt+t"]},function(e,n){n=_.defaults(n||{},{cwd:null});var r=s.add(t,{shellId:e,cwd:n.cwd},{type:"terminal",section:"terminals"});return r});s.addRestorer("terminal",function(e){var n=s.add(t,{},{type:"terminal",section:"terminals"});return n});var f=n.register("terminal.list",{category:"Terminal",title:"Open Terminals",type:"menu",offline:!1,search:!1}),l=function(){return i.listShells().then(function(e){f.menu.reset(_.map(e,function(e){return{title:e,action:function(){a.run(e)}}}))})};i.on("box:shell:open box:shell:exit",l),u.getById("file").menuSection([a,f])}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}('.addon-terminal-tab{position:absolute;width:100%;height:100%;background:0 0}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body{background:#000;border-color:#000;cursor:text;font-weight:700;padding:3px;overflow:hidden}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body *{user-select:initial;-webkit-user-select:initial}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container{position:relative;width:100%;height:100%;font-family:Menlo,Monaco,"DejaVu Sans Mono",Consolas,"Andale Mono",monospace}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container div{margin:0;padding:0}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container .terminal{width:100%;height:100%;font-size:13px;line-height:18px}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container .terminal-input{position:absolute;top:0;left:-1000%;background:rgba(255,255,255,.75);color:#000;border:0;outline:0;width:100%}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container .terminal-screen-keys{position:absolute;top:0;right:0}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container .terminal-screen-keys button{background:-webkit-linear-gradient(top,#eeeef0,#d3d3d9);box-shadow:0 2px 2px rgba(0,0,0,.25),inset 0 -2px 0 rgba(0,0,0,.25),inset 0 1px 0 #fff;border:1px solid #000;border-radius:2px;padding:8px;font-size:14px;text-shadow:0 1px 0 #fff}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container .terminal-screen-keys button:focus,.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container .terminal-screen-keys button.active{outline:0;background:-webkit-linear-gradient(top,#ccccd0,#a3a3a9)}.addon-terminal-tab .tab-panel-body .tab-panel-inner.terminal-body .terminal-container .terminal-size-indicator{position:absolute;bottom:0;left:0;background-color:rgba(255,255,255,.75);color:#000;padding:0 3px}');