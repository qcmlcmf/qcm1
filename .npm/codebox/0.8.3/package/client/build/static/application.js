function diff_match_patch(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t!="string"?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function v(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function m(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,m=t&&t.split("/"),g=m,y=o.map,b=y&&y["*"];e&&e.charAt(0)==="."&&(t?(getOwn(o.pkgs,t)?g=m=[t]:g=m.slice(0,m.length-1),e=g.concat(e.split("/")),v(e),i=getOwn(o.pkgs,r=e[0]),e=e.join("/"),i&&e===r+"/"+i.main&&(e=r)):e.indexOf("./")===0&&(e=e.substring(2)));if(n&&y&&(m||b)){u=e.split("/");for(a=u.length;a>0;a-=1){l=u.slice(0,a).join("/");if(m)for(f=m.length;f>0;f-=1){s=getOwn(y,m.slice(0,f).join("/"));if(s){s=getOwn(s,l);if(s){c=s,h=a;break}}}if(c)break;!p&&b&&getOwn(b,l)&&(p=getOwn(b,l),d=a)}!c&&p&&(c=p,h=d),c&&(u.splice(0,h,c),e=u.join("/"))}return e}function g(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function y(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return g(e),t.shift(),r.require.undef(e),r.require([e]),!0}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function w(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,v=!0,g="";return e||(v=!1,e="_@r"+(p+=1)),a=b(e),f=a[0],e=a[1],f&&(f=m(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?g=o.normalize(e,function(e){return m(e,l,i)}):g=m(e,l,i):(g=m(e,l,i),a=b(g),f=a[0],g=a[1],n=!0,s=r.nameToUrl(g))),u=f&&!o&&!n?"_unnormalized"+(d+=1):"",{prefix:f,name:g,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:v,id:(f?f+"!"+g:g)+u}}function E(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function S(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=E(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function x(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function T(){globalDefQueue.length&&(apsp.apply(l,[l.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function N(e){delete u[e],delete a[e]}function C(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):C(o,t,n))}),n[r]=!0)}function k(){var e,n,i,u,f=o.waitSeconds*1e3,l=f&&r.startTime+f<(new Date).getTime(),c=[],h=[],p=!1,d=!0;if(t)return;t=!0,eachProp(a,function(t){e=t.map,n=e.id;if(!t.enabled)return;e.isDefine||h.push(t);if(!t.error)if(!t.inited&&l)y(n)?(u=!0,p=!0):(c.push(n),g(n));else if(!t.inited&&t.fetched&&e.isDefine){p=!0;if(!e.prefix)return d=!1}});if(l&&c.length)return i=makeError("timeout","Load timeout for modules: "+c,null,c),i.contextName=r.contextName,x(i);d&&each(h,function(e){C(e,{},{})}),(!l||u)&&p&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,k()},50)),t=!1}function L(e){hasProp(c,e[0])||E(w(e[0],null,!0)).init(e[1],e[2])}function A(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function O(e){var t=e.currentTarget||e.srcElement;return A(t,r.onScriptLoad,"load","onreadystatechange"),A(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function M(){var e;T();while(l.length){e=l.shift();if(e[0]===null)return x(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));L(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p=1,d=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,n=getOwn(o.pkgs,e.map.id);return t=n?getOwn(o.config,e.map.id+"/"+n.main):getOwn(o.config,e.map.id),t||{}},exports:c[e.map.id]}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&(t=this.module,t&&t.exports!==undefined&&t.exports!==this.exports?s=t.exports:s===undefined&&this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",x(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),N(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=w(e.prefix);this.depMaps.push(n),S(n,"defined",bind(this,function(n){var i,s,a,f=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,c=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(f=n.normalize(f,function(e){return m(e,l,!0)})||""),s=w(e.prefix+"!"+f,this.map.parentMap),S(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&N(e.map.id)}),x(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=w(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),E(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return x(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),c([u],i)}),n.load(e.name,c,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=w(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,S(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&S(e,"error",bind(this,this.errback))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:w,nextTick:req.nextTick,onError:x,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.pkgs,n=o.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?t==="map"?(o.map||(o.map={}),mixin(o[t],e,!0,!0)):mixin(o[t],e,!0):o[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),n[t]=e}),o.shim=n),e.packages&&(each(e.packages,function(e){var n;e=typeof e=="string"?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),o.pkgs=t),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=w(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?x(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=w(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:x(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(M(),r.nextTick(function(){M(),p=E(w(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),k()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(m(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,w(e,t,!1,!0).id)},specified:function(e){return e=w(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){T();var n=w(e,t,!0),r=getOwn(u,e);delete c[e],delete h[n.url],delete f[e],r&&(r.events.defined&&(f[e]=r.events),N(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&E(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;T();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);L(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(y(e))return;return x(makeError("nodefine","No define call for "+e,null,[e]))}L([e,i.deps||[],i.exportsFn])}k()},nameToUrl:function(e,t,n){var r,i,s,u,a,f,l,c,h;if(req.jsExtRegExp.test(e))c=e+(t||"");else{r=o.paths,i=o.pkgs,a=e.split("/");for(f=a.length;f>0;f-=1){l=a.slice(0,f).join("/"),s=getOwn(i,l),h=getOwn(r,l);if(h){isArray(h)&&(h=h[0]),a.splice(0,f,h);break}if(s){e===s.name?u=s.location+"/"+s.main:u=s.location,a.splice(0,f,u);break}}c=a.join("/"),c+=t||(/\?/.test(c)||n?"":".js"),c=(c.charAt(0)==="/"||c.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+c}return o.urlArgs?c+((c.indexOf("?")===-1?"?":"&")+o.urlArgs):c},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=O(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=O(e);if(!y(t.id))return x(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.6",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=r.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),function(){function tt(e,t){if(e!==t){if(e>t||typeof e=="undefined")return 1;if(e<t||typeof t=="undefined")return-1}return 0}function nt(e,t,n){var r=(n||0)-1,i=e?e.length:0;while(++r<i)if(e[r]===t)return r;return-1}function rt(e,t){return e.has(t)?0:-1}function it(e){return e.charCodeAt(0)}function st(e,t){var n=-1,r=e.length;while(++n<r)if(t.indexOf(e.charAt(n))<0)break;return n}function ot(e,t){var n=e.length;while(n--)if(t.indexOf(e.charAt(n))<0)break;return n}function ut(e,t){return tt(e.criteria,t.criteria)||e.index-t.index}function at(e,t){var n=e.criteria,r=t.criteria,i=-1,s=n.length;while(++i<s){var o=tt(n[i],r[i]);if(o)return o}return e.index-t.index}function ft(e){return V[e]}function lt(e){return"\\"+K[e]}function ct(){return L.pop()||[]}function ht(){return A.pop()||{criteria:null,index:0,value:null}}function pt(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function dt(e){e.length=0,L.length<a&&L.push(e)}function vt(e){e.criteria=e.value=null,A.length<a&&A.push(e)}function mt(e,t){return e=e==null?"":String(e),e?t==null?e.slice(bt(e),wt(e)+1):(t=String(t),e.slice(st(e,t),ot(e,t)+1)):e}function gt(e,t){return e=e==null?"":String(e),e?t==null?e.slice(bt(e)):(t=String(t),e.slice(st(e,t))):e}function yt(e,t){return e=e==null?"":String(e),e?t==null?e.slice(0,wt(e)+1):(t=String(t),e.slice(0,ot(e,t)+1)):e}function bt(e){var t=-1,n=e.length;while(++t<n){var r=e.charCodeAt(t);if(!(r<=160&&r>=9&&r<=13||r==32||r==160||r==5760||r==6158||r>=8192&&(r<=8202||r==8232||r==8233||r==8239||r==8287||r==12288||r==65279)))break}return t}function wt(e){var t=e.length;while(t--){var n=e.charCodeAt(t);if(!(n<=160&&n>=9&&n<=13||n==32||n==160||n==5760||n==6158||n>=8192&&(n<=8202||n==8232||n==8233||n==8239||n==8287||n==12288||n==65279)))break}return t}function Et(e){return $[e]}function St(a){function rn(e){return e&&typeof e=="object"&&!pi(e)&&Dt.call(e,"__wrapped__")?e:new sn(e)}function sn(e,t){this.__chain__=!!t,this.__wrapped__=e}function an(e){function s(){if(r)var e=xn(r,i,arguments);if(this instanceof s){var o=ln(t.prototype),u=t.apply(o,e||arguments);return Ei(u)?u:o}return t.apply(n,e||arguments)}var t=e[0],n=e[3],r=e[4],i=e[6];return _n(s,e),s}function fn(e,t,n,r,i){if(n){var s=n(e);if(typeof s!="undefined")return s}var o=Ei(e);if(!o)return e;var u=Ct.call(e);if(!z[u]||!on.nodeClass&&pt(e))return e;var a=tn[u];switch(u){case H:case B:return new a(+e);case I:case U:return new a(e);case R:return s=a(e.source,E.exec(e)),s.lastIndex=e.lastIndex,s}var f=pi(e);if(t){var l=!r;r||(r=ct()),i||(i=ct());var c=r.length;while(c--)if(r[c]==e)return i[c];s=f?a(e.length):{}}else s=f?Yn(e):Zr({},e);return f&&(Dt.call(e,"index")&&(s.index=e.index),Dt.call(e,"input")&&(s.input=e.input)),t?(r.push(e),i.push(s),(f?dn:gn)(e,function(e,o){s[o]=fn(e,t,n,r,i)}),l&&(dt(r),dt(i)),s):s}function ln(e){return Ei(e)?Ut(e):{}}function cn(e,n,r){if(typeof e!="function")return Vi;if(typeof n!="undefined"&&"prototype"in e){var i=e[l];if(typeof i=="undefined"){on.funcNames&&(i=!e.name),i=i||!on.funcDecomp;if(!i){var s=Mt.call(e);on.funcNames||(i=!S.test(s)),i||(i=N.test(s),_n(e,i))}}if(i===!1||i!==!0&&i[1]&t)return e;switch(r){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,s){return e.call(n,t,r,i,s)}}return Ir(e,n)}return e}function hn(e){function w(){var e=v?l:this;if(c)var r=xn(c,p,arguments);h&&(r=Tn(h,d,r||arguments));if(g){var i=arguments.length;if(i<f){r||(r=Yn(arguments)),a|=s,a&=~o,y||(a&=~(t|n));var E=$t(0,f-i);return hn([u,a,E,l,r,null,[]])}}r||(r=arguments),m&&(u=e[b]);if(this instanceof w){e=ln(u.prototype);var S=u.apply(e,r);return Ei(S)?S:e}return u.apply(e,r)}var u=e[0],a=e[1],f=e[2],l=e[3],c=e[4],h=e[5],p=e[6],d=e[7],v=a&t,m=a&n,g=a&r,y=a&i,b=u;return _n(w,e),w}function pn(e,t){var n=-1,r=On(),i=e?e.length:0,s=[];Cn&&t&&r===nt&&t.length>=u&&(r=rt,t=Cn(t));while(++n<i){var o=e[n];r(t,o)<0&&s.push(o)}return s}function dn(e,t){var n=-1,r=e,i=e?e.length:0;if(typeof i=="number"){on.unindexedChars&&ki(r)&&(r=r.split(""));while(++n<i)if(t(r[n],n,e)===!1)break}else gn(e,t);return e}function vn(e,t){var n=e,r=e?e.length:0;if(typeof r=="number"){on.unindexedChars&&ki(n)&&(n=n.split(""));while(r--)if(t(n[r],r,e)===!1)break}else yn(e,t);return e}function mn(e,t,n,r){var i=(r||0)-1,s=e?e.length:0,o=[];while(++i<s){var u=e[i];if(u&&typeof u=="object"&&typeof u.length=="number"&&(pi(u)||Pn(u))){t||(u=mn(u,t,n));var a=-1,f=u.length,l=o.length;o.length+=f;while(++a<f)o[l++]=u[a]}else n||o.push(u)}return o}function gn(e,t){var n=-1,r=Ai(e),i=r.length;while(++n<i){var s=r[n];if(t(e[s],s,e)===!1)break}return e}function yn(e,t){var n=Ai(e),r=n.length;while(r--){var i=n[r];if(t(e[i],i,e)===!1)break}return e}function bn(e,t,n,r,i,s){if(n){var o=n(e,t);if(typeof o!="undefined")return!!o}if(e===t)return e!==0||1/e==1/t;var u=typeof e,a=typeof t;if(e===e&&(!e||u!="function"&&u!="object")&&(!t||a!="function"&&a!="object"))return!1;if(e==null||t==null)return e===t;var f=Ct.call(e),l=Ct.call(t);f==D&&(f=q),l==D&&(l=q);if(f!=l)return!1;switch(f){case H:case B:return+e==+t;case I:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case R:case U:return e==et(t)}var c=f==P;if(!c){var h=Dt.call(e,"__wrapped__"),p=Dt.call(t,"__wrapped__");if(h||p)return bn(h?e.__wrapped__:e,p?t.__wrapped__:t,n,r,i,s);if(f!=q||!on.nodeClass&&(pt(e)||pt(t)))return!1;var d=!on.argsObject&&Pn(e)?Y:e.constructor,v=!on.argsObject&&Pn(t)?Y:t.constructor;if(d!=v&&(!Dt.call(e,"constructor")||!Dt.call(t,"constructor"))&&!(wi(d)&&d instanceof d&&wi(v)&&v instanceof v)&&"constructor"in e&&"constructor"in t)return!1}var m=!i;i||(i=ct()),s||(s=ct());var g=i.length;while(g--)if(i[g]==e)return s[g]==t;var y=0;o=!0,i.push(e),s.push(t);if(c){g=e.length,y=t.length,o=y==g;if(o||r)while(y--){var b=g,w=t[y];if(r){while(b--)if(o=bn(e[b],w,n,r,i,s))break}else if(!(o=bn(e[y],w,n,r,i,s)))break}}else Hn(t,function(t,u,a){if(Dt.call(a,u))return y++,o=Dt.call(e,u)&&bn(e[u],t,n,r,i,s)}),o&&!r&&Hn(e,function(e,t,n){if(Dt.call(n,t))return o=--y>-1});return i.pop(),s.pop(),m&&(dt(i),dt(s)),o}function wn(e,t,n,r,i){(pi(t)?dn:gn)(t,function(t,s){var o,u,a=t,f=e[s];if(t&&((u=pi(t))||Ni(t))){var l=r.length;while(l--)if(o=r[l]==t){f=i[l];break}if(!o){var c;if(n){a=n(f,t);if(c=typeof a!="undefined")f=a}c||(f=u?pi(f)?f:[]:Ni(f)?f:{}),r.push(t),i.push(f),c||wn(f,t,n,r,i)}}else n&&(a=n(f,t),typeof a=="undefined"&&(a=t)),typeof a!="undefined"&&(f=a);e[s]=f})}function En(e,t){return e+Ot(Gt()*(t-e+1))}function Sn(e,t,n){var r=-1,i=On(),s=e?e.length:0,o=Cn&&!t&&i===nt&&s>=u,a=[];if(o){var f=Cn();i=rt}else f=n?ct():a;while(++r<s){var l=e[r],c=n?n(l,r,e):l;if(t?!r||f[f.length-1]!==c:i(f,c)<0)(n||o)&&f.push(c),a.push(l)}return!o&&n&&dt(f),a}function xn(e,t,n){var r=-1,i=t.length,s=-1,o=e.length,u=$t(n.length-i,0),a=L(u+o);while(++s<o)a[s]=e[s];while(++r<i)a[t[r]]=n[r];while(i<u)a[s++]=n[i++];return a}function Tn(e,t,n){var r=-1,i=t.length,s=-1,o=$t(n.length-i,0),u=-1,a=e.length,f=L(o+a);while(++s<o)f[s]=n[s];var l=s;while(++u<a)f[l+u]=e[u];while(++r<i)f[l+partialHolders[r]]=n[s++];return f}function Nn(e,t){return function(n,r,i){var s=t?[[],[]]:{};r=rn.createCallback(r,i,3);if(pi(n)){var o=-1,u=n.length;while(++o<u){var a=n[o];e(s,a,r(a,o,n),n)}}else dn(n,function(t,n,i){e(s,t,r(t,n,i),i)});return s}}function kn(e,r,u,a,f,c,h,p){var d=r&t,v=r&n,m=r&s,g=r&o;if(!v&&!wi(e))throw new tt;m&&!f.length&&(r&=~s,m=f=!1),g&&!c.length&&(r&=~o,g=c=!1);var y=!v&&e[l];if(y&&y!==!0){y=Yn(y),y[4]&&(y[4]=Yn(y[4])),y[5]&&(y[5]=Yn(y[5])),typeof u=="number"&&(y[2]=u);var b=y[1]&t;return d&&!b&&(y[3]=a),!d&&b&&(r|=i),m&&(y[4]?Pt.apply(y[4],f):y[4]=f),g&&(y[5]?It.apply(y[5],c):y[5]=c),y[1]|=r,kn.apply(null,y)}return u==null?u=v?0:e.length:u<0&&(u=0),m&&(h=An(f)),g&&(p=An(c)),y=[e,r,u,a,f,c,h,p],r==t||r==(t|s)?an(y):hn(y)}function Ln(e){e.shadowedProps=M,e.support=on;var t=J("errorClass, errorProto, hasOwnProperty, isArguments, isObject, objectProto, nonEnumProps, stringClass, stringProto, toString","return function("+e.args+") {\n"+un(e)+"\n}");return t(j,ot,Dt,Pn,Ei,bt,nn,U,wt,Ct)}function An(e){var t=-1,n=e.length,r=[];while(++t<n)e[t]===rn&&r.push(t);return r}function On(){var e=(e=rn.indexOf)===zn?nt:e;return e}function Mn(e){return typeof e=="function"&&kt.test(Mt.call(e))}function Dn(e){var t,n;return!e||Ct.call(e)!=q||!Dt.call(e,"constructor")&&(t=e.constructor,wi(t)&&!(t instanceof t))||!on.argsClass&&Pn(e)||!on.nodeClass&&pt(e)?!1:on.ownLast?(Hn(e,function(e,t,r){return n=Dt.call(r,t),!1}),n!==!1):(Hn(e,function(e,t){n=t}),typeof n=="undefined"||Dt.call(e,n))}function Pn(e){return e&&typeof e=="object"&&typeof e.length=="number"&&Ct.call(e)==D||!1}function jn(e){var t=-1,n=e?e.length:0,r=0,i=[];while(++t<n){var s=e[t];s&&(i[r++]=s)}return i}function Fn(e){return pn(e,mn(arguments,!0,!0,1))}function In(e,t,n){var r=-1,i=e?e.length:0;t=rn.createCallback(t,n,3);while(++r<i)if(t(e[r],r,e))return r;return-1}function qn(e,t,n){var r=e?e.length:0;t=rn.createCallback(t,n,3);while(r--)if(t(e[r],r,e))return r;return-1}function Rn(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=-1;n=rn.createCallback(n,r,3);while(++o<s&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[0]:e}return Yn(t,0,i>0?i:0)}function Un(e,t,n,r){var i=typeof t;return i!="boolean"&&t!=null&&(r=n,n=t,t=!1,(i=="number"||i=="string")&&r&&r[n]===e&&(n=null)),n!=null&&(e=xr(e,n,r)),mn(e,t)}function zn(e,t,n){var r=e?e.length:0;if(typeof n=="number")n=n<0?$t(0,r+n):n||0;else if(n){var i=Zn(e,t);return r&&e[i]===t?i:-1}return nt(e,t,n)}function Wn(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&t!=null){var s=i;t=rn.createCallback(t,n,3);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return r=i-r,Yn(e,0,r>0?r:0)}function Xn(){var e=[],t=-1,n=arguments.length,r=ct(),i=On(),s=Cn&&i===nt,o=ct();while(++t<n){var a=arguments[t];if(pi(a)||Pn(a))e.push(a),r.push(s&&a.length>=u&&Cn(t?e[t]:o))}var f=e[0],l=-1,c=f?f.length:0,h=[];e:while(++l<c){var p=r[0];a=f[l];if((p?rt(p,a):i(o,a))<0){t=n,(p||o).push(a);while(--t){p=r[t];if((p?rt(p,a):i(e[t],a))<0)continue e}h.push(a)}}return dt(r),dt(o),h}function Vn(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=s;n=rn.createCallback(n,r,3);while(o--&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[s-1]:e}return i=s-i,Yn(t,i>0?i:0)}function $n(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?$t(0,r+n):Jt(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Jn(e){var t=arguments,n=0,r=t.length,i=e?e.length:0;while(++n<r){var s=-1,o=t[n];while(++s<i)e[s]===o&&(Ft.call(e,s--,1),i--)}return e}function Kn(e,t,n){e=+e||0,n=typeof n=="number"?n:+n||1,t==null&&(t=e,e=0);var r=-1,i=$t(0,Lt((t-e)/(n||1))),s=L(i);while(++r<i)s[r]=e,e+=n;return s}function Qn(e,t,n){var r=-1,i=e?e.length:0,s=[];t=rn.createCallback(t,n,3);while(++r<i){var o=e[r];t(o,r,e)&&(s.push(o),Ft.call(e,r--,1),i--)}return s}function Gn(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=rn.createCallback(t,n,3);while(++i<s&&t(e[i],i,e))r++}else t==null||n?r=1:r=t>0?t:0;return Yn(e,r)}function Yn(e,t,n){var r=-1,i=e?e.length:0;typeof t=="undefined"?t=0:t<0?t=$t(i+t,0):t>i&&(t=i),typeof n=="undefined"?n=i:n<0?n=$t(i+n,0):n>i&&(n=i),i=n-t||0;var s=L(i);while(++r<i)s[r]=e[t+r];return s}function Zn(e,t,n,r){var i=0,s=e?e.length:i;n=n?rn.createCallback(n,r,1):Vi,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function er(){return Sn(mn(arguments,!0,!0))}function tr(e,t,n,r){var i=typeof t;return i!="boolean"&&t!=null&&(r=n,n=t,t=!1,(i=="number"||i=="string")&&r&&r[n]===e&&(n=null)),n!=null&&(n=rn.createCallback(n,r,3)),Sn(e,t,n)}function nr(e){return pn(e,Yn(arguments,1))}function rr(){var e=-1,t=arguments.length;while(++e<t){var n=arguments[e];if(pi(n)||Pn(n))var r=r?pn(r,n).concat(pn(n,r)):n}return r?Sn(r):[]}function ir(){var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?Tr(kr(e,"length")):0,r=L(n<0?0:n);while(++t<n)r[t]=kr(e,t);return r}function sr(e,t){var n=-1,r=e?e.length:0,i={};!t&&r&&!pi(e[0])&&(t=[]);while(++n<r){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function or(e){return e=new sn(e),e.__chain__=!0,e}function ur(e,t,n){return t.call(n,e),e}function ar(){return this.__chain__=!0,this}function fr(){return et(this.__wrapped__)}function lr(){return this.__wrapped__}function cr(e,t){var n=arguments,r=-1,i=mn(n,!0,!1,1),s=i.length,o=typeof t;(o=="number"||o=="string")&&n[2]&&n[2][t]===e&&(s=1),on.unindexedChars&&ki(e)&&(e=e.split(""));var u=L(s);while(++r<s)u[r]=e[i[r]];return u}function hr(e,t,n){var r=e?e.length:0;n=typeof n=="number"?n:0;if(typeof r=="number"){if(n>=r)return!1;if(typeof e=="string"||!pi(e)&&ki(e))return Rt?Rt.call(e,t,n):e.indexOf(t,n)>-1;var i=On();return n=(n<0?$t(0,r+n):n)||0,i(e,t,n)>-1}var s=-1,o=!1;return dn(e,function(e){if(++s>=n)return!(o=e===t)}),o}function dr(e,t,n){var r=!0;t=rn.createCallback(t,n,3);if(pi(e)){var i=-1,s=e.length;while(++i<s)if(!t(e[i],i,e))return!1}else dn(e,function(e,n,i){return r=!!t(e,n,i)});return r}function vr(e,t,n){var r=[];t=rn.createCallback(t,n,3);if(pi(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}}else dn(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function mr(e,t,n){t=rn.createCallback(t,n,3);if(!pi(e)){var o;return dn(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}var r=-1,i=e.length;while(++r<i){var s=e[r];if(t(s,r,e))return s}}function gr(e,t,n){var r;return t=rn.createCallback(t,n,3),vn(e,function(e,n,i){if(t(e,n,i))return r=e,!1}),r}function yr(e,t,n){if(t&&typeof n=="undefined"&&pi(e)){var r=-1,i=e.length;while(++r<i)if(t(e[r],r,e)===!1)break}else dn(e,cn(t,n,3));return e}function br(e,t,n){if(t&&typeof n=="undefined"&&pi(e)){var r=e.length;while(r--)if(t(e[r],r,e)===!1)break}else vn(e,cn(t,n,3));return e}function Sr(e,t){var n=-1,r=typeof t=="function",i=e?e.length:0,s=L(typeof i=="number"?i:0);if(arguments.length<3&&pi(e))while(++n<i){var o=e[n];s[n]=r?t.call(o):o[t]()}else{var u=Yn(arguments,2);dn(e,function(e){s[++n]=(r?t:e[t]).apply(e,u)})}return s}function xr(e,t,n){var r=-1,i=e?e.length:0,s=L(typeof i=="number"?i:0);t=rn.createCallback(t,n,3);if(pi(e))while(++r<i)s[r]=t(e[r],r,e);else dn(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function Tr(e,t,n){var r=-Infinity,i=r,s=typeof t;(s=="number"||s=="string")&&n&&n[t]===e&&(t=null);if(t==null&&pi(e)){var o=-1,u=e.length;while(++o<u){var a=e[o];a>i&&(i=a)}}else t=t==null&&ki(e)?it:rn.createCallback(t,n,3),dn(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function Nr(e,t,n){var r=Infinity,i=r,s=typeof t;(s=="number"||s=="string")&&n&&n[t]===e&&(t=null);if(t==null&&pi(e)){var o=-1,u=e.length;while(++o<u){var a=e[o];a<i&&(i=a)}}else t=t==null&&ki(e)?it:rn.createCallback(t,n,3),dn(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function Lr(e,t,n,r){var i=arguments.length<3;t=rn.createCallback(t,r,4);if(pi(e)){var s=-1,o=e.length;i&&o&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else dn(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Ar(e,t,n,r){var i=arguments.length<3;return t=rn.createCallback(t,r,4),vn(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function Or(e,t,n){return t=rn.createCallback(t,n,3),vr(e,function(e,n,r){return!t(e,n,r)})}function Mr(t,n,r){t&&typeof t.length!="number"?t=Bi(t):on.unindexedChars&&ki(t)&&(t=t.split(""));if(n==null||r)return t?t[En(0,t.length-1)]:e;var i=_r(t);return i.length=Jt($t(0,n),i.length),i}function _r(e){var t=-1,n=e?e.length:0,r=L(typeof n=="number"?n:0);return dn(e,function(e){var n=En(0,++t);r[t]=r[n],r[n]=e}),r}function Dr(e){var t=e?e.length:0;return typeof t=="number"?t:Ai(e).length}function Pr(e,t,n){var r;t=rn.createCallback(t,n,3);if(pi(e)){var i=-1,s=e.length;while(++i<s)if(t(e[i],i,e))return!0}else dn(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function Hr(e,t,n){var r=-1,i=t&&pi(t),s=e?e.length:0,o=L(typeof s=="number"?s:0);i||(t=rn.createCallback(t,n,3)),dn(e,function(e,n,s){if(i){var u=t.length,a=L(u);while(u--)a[u]=e[t[u]]}else a=t(e,n,s);var f=o[++r]=ht();f.criteria=a,f.index=r,f.value=e}),s=o.length,o.sort(i?at:ut);while(s--){var u=o[s];o[s]=u.value,vt(u)}return o}function Br(e){return e&&typeof e.length=="number"?on.unindexedChars&&ki(e)?e.split(""):Yn(e):Bi(e)}function Fr(e,t){if(!wi(t))throw new tt;return function(){if(--e<1)return t.apply(this,arguments)}}function Ir(e,n){if(arguments.length<3)return kn(e,t,null,n);if(e){var r=e[l]?e[l][2]:e.length,i=Yn(arguments,2);r-=i.length}return kn(e,t|s,r,n,i)}function qr(e){var n=arguments.length>1?mn(arguments,!0,!1,1):li(e),r=-1,i=n.length;while(++r<i){var s=n[r];e[s]=kn(e[s],t,null,e)}return e}function Rr(e,r){return arguments.length<3?kn(r,t|n,null,e):kn(r,t|n|s,null,e,Yn(arguments,2))}function Ur(){var e=arguments,t=e.length,n=t;while(n--)if(!wi(e[n]))throw new tt;return function(){var n=t-1,r=e[n].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}}function zr(e,t){return typeof t!="number"&&(t=+t||(e?e.length:0)),kn(e,r,t)}function Wr(t,n,r){var i,s,o,u,a,f,l,c=0,h=!1,p=!0;if(!wi(t))throw new tt;n=$t(0,n)||0;if(r===!0){var d=!0;p=!1}else Ei(r)&&(d=r.leading,h="maxWait"in r&&($t(n,r.maxWait)||0),p="trailing"in r?r.trailing:p);var v=function(){var r=n-(Gi()-u);if(r<=0||r>n){s&&At(s);var h=l;s=f=l=e,h&&(c=Gi(),o=t.apply(a,i),!f&&!s&&(i=a=null))}else f=jt(v,r)},m=function(){f&&At(f),s=f=l=e;if(p||h!==n)c=Gi(),o=t.apply(a,i),!f&&!s&&(i=a=null)};return function(){i=arguments,u=Gi(),a=this,l=p&&(f||!d);if(h===!1)var e=d&&!f;else{!s&&!d&&(c=u);var r=h-(u-c),g=r<=0||r>h;g?(s&&(s=At(s)),c=u,o=t.apply(a,i)):s||(s=jt(m,r))}return g&&f?f=At(f):!f&&n!==h&&(f=jt(v,n)),e&&(g=!0,o=t.apply(a,i)),g&&!f&&!s&&(i=a=null),o}}function Xr(t){if(!wi(t))throw new tt;var n=Yn(arguments,1);return jt(function(){t.apply(e,n)},1)}function Vr(t,n){if(!wi(t))throw new tt;var r=Yn(arguments,2);return jt(function(){t.apply(e,r)},n)}function $r(e,t){if(!wi(e))throw new tt;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):"_"+arguments[0];return Dt.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function Jr(e){var t,n;if(!wi(e))throw new tt;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Kr(e){if(e){var t=e[l]?e[l][2]:e.length,n=Yn(arguments,1);t-=n.length}return kn(e,s,t,null,n)}function Qr(e){if(e){var t=e[l]?e[l][2]:e.length,n=Yn(arguments,1);t-=n.length}return kn(e,o,t,null,null,n)}function Gr(e,t,n){var r=!0,i=!0;if(!wi(e))throw new tt;return n===!1?r=!1:Ei(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),W.leading=r,W.maxWait=t,W.trailing=i,Wr(e,t,W)}function Yr(e,t){return kn(t,s,null,null,[e])}function Zr(e,t,n){var r=arguments,i=0,s=r.length,o=typeof n;(o=="number"||o=="string")&&r[3]&&r[3][n]===t&&(s=2);if(s>3&&typeof r[s-2]=="function")var u=cn(r[--s-1],r[s--],2);else s>2&&typeof r[s-1]=="function"&&(u=r[--s]);while(++i<s){t=r[i];if(Ei(t)){var a=-1,f=Ai(t),l=f.length;while(++a<l){var c=f[a];e[c]=u?u(e[c],t[c]):t[c]}}}return e}function ei(e,t,n,r){var i=typeof t;return i!="boolean"&&t!=null&&(r=n,n=t,t=!1,(i=="number"||i=="string")&&r&&r[n]===e&&(n=null)),fn(e,t,typeof n=="function"&&cn(n,r,1))}function ti(e,t,n){return fn(e,!0,typeof t=="function"&&cn(t,n,1))}function ni(e,t){var n=ln(e);return t?Zr(n,t):n}function ri(e,t,n){var r=arguments,i=0,s=r.length,o=typeof n;(o=="number"||o=="string")&&r[3]&&r[3][n]===t&&(s=2);while(++i<s){t=r[i];if(Ei(t)){var u=-1,a=Ai(t),f=a.length;while(++u<f){var l=a[u];typeof e[l]=="undefined"&&(e[l]=t[l])}}}return e}function ii(e,t,n){var r;return t=rn.createCallback(t,n,3),gn(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function si(e,t,n){var r;return t=rn.createCallback(t,n,3),yn(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function oi(e,t,n){return t=t&&typeof n=="undefined"?t:cn(t,n,3),Hn(e,t)}function ui(e,t,n){var r=[];Hn(e,function(e,t){r.push(t,e)});var i=r.length;t=cn(t,n,3);while(i--)if(t(r[i--],r[i],e)===!1)break;return e}function ai(e,t,n){return t=t&&typeof n=="undefined"?t:cn(t,n,3),gn(e,t)}function fi(e,t,n){var r=Ai(e),i=r.length;t=cn(t,n,3);while(i--){var s=r[i];if(t(e[s],s,e)===!1)break}return e}function li(e){var t=[];return Hn(e,function(e,n){wi(e)&&t.push(n)}),t.sort()}function ci(e,t){return e?Dt.call(e,t):!1}function hi(e,t){var n=-1,r=Ai(e),i=r.length,s={};while(++n<i){var o=r[n],u=e[o];t?Dt.call(s,u)?s[u].push(o):s[u]=[o]:s[u]=o}return s}function di(e){return e===!0||e===!1||e&&typeof e=="object"&&Ct.call(e)==H||!1}function vi(e){return e&&typeof e=="object"&&Ct.call(e)==B||!1}function mi(e){return e&&typeof e=="object"&&e.nodeType===1&&(on.nodeClass?Ct.call(e).indexOf("Element")>-1:pt(e))||!1}function gi(e){var t=!0;if(!e)return t;var n=Ct.call(e),r=e.length;return n==P||n==U||(on.argsClass?n==D:Pn(e))||n==q&&typeof r=="number"&&wi(e.splice)?!r:(gn(e,function(){return t=!1}),t)}function yi(e,t,n,r){return bn(e,t,typeof n=="function"&&cn(n,r,2))}function bi(e){return Wt(e)&&!Xt(parseFloat(e))}function wi(e){return typeof e=="function"}function Ei(e){var t=typeof e;return e&&(t=="function"||t=="object")||!1}function Si(e){return Ti(e)&&e!=+e}function xi(e){return e===null}function Ti(e){var t=typeof e;return t=="number"||e&&t=="object"&&Ct.call(e)==I||!1}function Ci(e){var t=typeof e;return e&&(t=="function"||t=="object")&&Ct.call(e)==R||!1}function ki(e){return typeof e=="string"||e&&typeof e=="object"&&Ct.call(e)==U||!1}function Li(e){return typeof e=="undefined"}function Oi(e,t,n){var r={};return t=rn.createCallback(t,n,3),gn(e,function(e,n,i){r[n]=t(e,n,i)}),r}function Mi(e,t,n){if(!Ei(e))return e;var r=arguments,i=r.length,s=typeof n;(s=="number"||s=="string")&&r[3]&&r[3][n]===t&&(i=2);if(i>3&&typeof r[i-2]=="function")var o=cn(r[--i-1],r[i--],2);else i>2&&typeof r[i-1]=="function"&&(o=r[--i]);var u=Yn(arguments,1,i),a=-1,f=ct(),l=ct();while(++a<i)wn(e,u[a],o,f,l);return dt(f),dt(l),e}function _i(e,t,n){var r={};if(typeof t!="function"){var i=mn(arguments,!0,!1,1),s=i.length;while(s--)i[s]=et(i[s]);var o=[];Hn(e,function(e,t){o.push(t)});var u=-1;o=pn(o,i),s=o.length;while(++u<s){var a=o[u];r[a]=e[a]}}else t=rn.createCallback(t,n,3),Hn(e,function(e,n,i){t(e,n,i)||(r[n]=e)});return r}function Di(e){var t=-1,n=Ai(e),r=n.length,i=L(r);while(++t<r){var s=n[t];i[t]=[s,e[s]]}return i}function Pi(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=mn(arguments,!0,!1,1),o=Ei(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=rn.createCallback(t,n,3),Hn(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Hi(e,t,n,r){var i=pi(e);if(n==null)if(i)n=[];else{var s=e&&e.constructor,o=s&&s.prototype;n=ln(o)}return t&&(t=rn.createCallback(t,r,4),(i?dn:gn)(e,function(e,r,i){return t(n,e,r,i)})),n}function Bi(e){var t=-1,n=Ai(e),r=n.length,i=L(r);while(++t<r)i[t]=e[n[t]];return i}function ji(e){return e==null?"":(e=et(e),e.charAt(0).toUpperCase()+e.slice(1))}function Fi(e){return e==null?"":et(e).replace(m,ft)}function Ii(t,n,r){var i=rn.templateSettings;t=et(t||""),r=un?ri({},r,i):i;var s=un&&ri({},r.imports,i.imports),o=un?Ai(s):["_"],u=un?Bi(s):[rn],a,f=0,l=r.interpolate||T,c="__p += '",v=Z((r.escape||T).source+"|"+l.source+"|"+(l===b?w:T).source+"|"+(r.evaluate||T).source+"|$","g");t.replace(v,function(e,n,r,i,s,o){return r||(r=i),c+=t.slice(f,o).replace(C,lt),n&&(c+="' +\n__e("+n+") +\n'"),s&&(a=!0,c+="';\n"+s+";\n__p += '"),r&&(c+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=o+e.length,e}),c+="';\n";var m=r.variable,g=m;g||(m="obj",c="with ("+m+") {\n"+c+"\n}\n"),c=(a?c.replace(h,""):c).replace(p,"$1").replace(d,"$1;"),c="function("+m+") {\n"+(g?"":m+" || ("+m+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var y="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+_++ +"]")+"\n*/";try{var E=J(o,"return "+c+y).apply(e,u)}catch(S){throw S.source=c,S}return n?E(n):(E.source=c,E)}function zi(e){return e==null?"":(e=et(e),e.indexOf(";")<0?e:e.replace(v,Et))}function Wi(e){return function(){return e}}function Xi(e,t,n){var r=typeof e;return r=="function"||e==null?(typeof t=="undefined"||!("prototype"in e))&&e||cn(e,t,n):r!="object"?Zi(e):$i(e)}function Vi(e){return e}function $i(e){e||(e={});var t=Ai(e),n=t[0],r=e[n];return t.length==1&&r===r&&!Ei(r)?function(e){if(!Dt.call(e,n))return!1;var t=e[n];return r===t&&(r!==0||1/r==1/t)}:function(n){var r=t.length,i=!1;while(r--){var s=t[r];if(!(i=Dt.call(n,s)&&bn(n[s],e[s],null,!0)))break}return i}}function Ji(e,t,n){var r=!0,i=t&&li(t);if(!t||!n&&!i.length)n==null&&(n=t),t=e,e=rn,i=li(t);n===!1?r=!1:Ei(n)&&"chain"in n&&(r=n.chain);var s=-1,o=wi(e),u=i?i.length:0;while(++s<u){var a=i[s],f=e[a]=t[a];o&&(e.prototype[a]=function(t){return function(){var n=this.__chain__,i=this.__wrapped__,s=[i];Pt.apply(s,arguments);var o=t.apply(e,s);if(r||n){if(i===o&&Ei(o))return this;o=new e(o),o.__chain__=n}return o}}(f))}}function Ki(){return a._=Nt,this}function Qi(){}function Zi(e){return function(t){return t[e]}}function es(e,t,n){var r=e==null,i=t==null;n==null&&(i&&typeof e=="boolean"?(n=e,e=1):typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0;if(n||e%1||t%1){var s=Gt();return Jt(e+s*(t-e+parseFloat("1e-"+((s+"").length-1))),t)}return En(e,t)}function ts(t,n,r){var i=t==null?e:t[n];return typeof i=="undefined"?r:wi(i)?t[n]():i}function ns(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=L(e);t=cn(t,n,1);while(++r<e)i[r]=t(r);return i}function rs(e){var t=++c;return et(e==null?"":e)+t}a=a?xt.defaults(Q.Object(),a,xt.pick(Q,O)):Q;var L=a.Array,A=a.Boolean,V=a.Date,$=a.Error,J=a.Function,K=a.Math,G=a.Number,Y=a.Object,Z=a.RegExp,et=a.String,tt=a.TypeError,st=L.prototype,ot=$.prototype,bt=Y.prototype,wt=et.prototype,Tt=(Tt=a.window)&&Tt.document,Nt=a._,Ct=bt.toString,kt=Z("^"+et(Ct).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=K.ceil,At=a.clearTimeout,Ot=K.floor,Mt=J.prototype.toString,_t=Mn(_t=Y.getPrototypeOf)&&_t,Dt=bt.hasOwnProperty,Pt=st.push,Ht=bt.propertyIsEnumerable,Bt=Mn(Bt=a.Set)&&Bt,jt=a.setTimeout,Ft=st.splice,It=st.unshift,qt=function(){try{var e={},t=Mn(t=Y.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Rt=Mn(Rt=wt.contains)&&Rt,Ut=Mn(Ut=Y.create)&&Ut,zt=Mn(zt=L.isArray)&&zt,Wt=a.isFinite,Xt=a.isNaN,Vt=Mn(Vt=Y.keys)&&Vt,$t=K.max,Jt=K.min,Kt=Mn(Kt=V.now)&&Kt,Qt=a.parseInt,Gt=K.random,Yt=Mn(Yt=wt.trim)&&!Yt.call(k)&&Yt,Zt=Mn(Zt=wt.trimLeft)&&!Zt.call(k)&&Zt,en=Mn(en=wt.trimRight)&&!en.call(k)&&en,tn={};tn[P]=L,tn[H]=A,tn[B]=V,tn[F]=J,tn[q]=Y,tn[I]=G,tn[R]=Z,tn[U]=et;var nn={};nn[P]=nn[B]=nn[I]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},nn[H]=nn[U]={constructor:!0,toString:!0,valueOf:!0},nn[j]=nn[F]=nn[R]={constructor:!0,toString:!0},nn[q]={constructor:!0},function(){var e=M.length;while(e--){var t=M[e];for(var n in nn)Dt.call(nn,n)&&!Dt.call(nn[n],t)&&(nn[n][t]=!1)}}(),sn.prototype=rn.prototype;var on=rn.support={};(function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments);on.argsClass=Ct.call(arguments)==D,on.argsObject=arguments.constructor==Y&&!(arguments instanceof L),on.enumErrorProps=Ht.call(ot,"message")||Ht.call(ot,"name"),on.enumPrototypes=Ht.call(e,"prototype"),on.funcDecomp=!Mn(a.WinRTError)&&N.test(St),on.funcNames=typeof J.name=="string",on.nonEnumArgs=r!=0,on.nonEnumShadows=!/valueOf/.test(n),on.ownLast=n[0]!="x",on.spliceObjects=(Ft.call(t,0,1),!t[0]),on.unindexedChars="x"[0]+Y("x")[0]!="xx";try{on.dom=Tt.createDocumentFragment().nodeType===11}catch(i){on.dom=!1}try{on.nodeClass=Ct.call(Tt)!=q||!!({toString:0}+"")}catch(i){on.nodeClass=!0}})(1),rn.templateSettings={escape:g,evaluate:y,interpolate:b,variable:"",imports:{_:rn}};var un=Ii("var result = <%= init %>;\nif (!isObject(object)) {\n  return result;\n}<% if (support.nonEnumArgs) { %>\nvar length = object.length;\nif (length && isArguments(object)) {\n  key = -1;\n  while (++key < length) {\n    key += '';\n    <%= loop %>;\n  }\n  return result;\n}<% } %><% if (support.enumPrototypes) { %>\nvar skipProto = typeof object == 'function';\n<% } %><% if (support.enumErrorProps) { %>\nvar skipErrorProps = object === errorProto || object instanceof Error;\n<% } %><%var conditions = [];\nif (support.enumPrototypes) { conditions.push('!(skipProto && key == \\'prototype\\')'); }\nif (support.enumErrorProps) { conditions.push('!(skipErrorProps && (key == \\'message\\' || key == \\'name\\'))'); }%>\nfor (var key in object) {\n<%  if (useHas) { conditions.push('hasOwnProperty.call(object, key)'); }\n  if (conditions.length) { %>  if (<%= conditions.join(' && ') %>) {\n  <% } %>  <%= loop %>;  <% if (conditions.length) { %>\n  }<% } %>\n}\n<% if (support.nonEnumShadows) { %>\nif (object !== objectProto) {\n  var ctor = object.constructor,\n      isProto = object === (ctor && ctor.prototype),\n      className = object === stringProto ? stringClass : object === errorProto ? errorClass : toString.call(object),\n      nonEnum = nonEnumProps[className];\n  <% for (var index = 0; index < 7; index++) { %>\n  key = '<%= shadowedProps[index] %>';\n  if ((!(isProto && nonEnum[key]) && hasOwnProperty.call(object, key))<%      if (!useHas) { %> || (!nonEnum[key] && object[key] !== objectProto[key])<% }    %>) {\n    <%= loop %>;\n  }  <% } %>\n}<% } %>\nreturn result;");Ut||(ln=function(){function e(){}return function(t){if(Ei(t)){e.prototype=t;var n=new e;e.prototype=null}return n||a.Object()}}());var Cn=Bt&&function(e){var t=new Bt,n=e?e.length:0;t.push=t.add;while(n--)t.push(e[n]);return t},_n=qt?function(e,t){X.value=t,qt(e,l,X)}:Qi;on.argsClass||(Pn=function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&Dt.call(e,"callee")&&!Ht.call(e,"callee")||!1});var Hn=Ln({args:"object, callback",init:"object",loop:"if (callback(object[key], key, object) === false) {\n    return result;\n  }",useHas:!1}),Bn=Ln({args:"object",init:"[]",loop:"result.push(key)",useHas:!0}),pr=Nn(function(e,t,n){Dt.call(e,n)?e[n]++:e[n]=1}),wr=Nn(function(e,t,n){Dt.call(e,n)?e[n].push(t):e[n]=[t]}),Er=Nn(function(e,t,n){e[n]=t}),Cr=Nn(function(e,t,n){e[n?0:1].push(t)},!0),kr=xr,jr=vr,pi=zt||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&Ct.call(e)==P||!1};on.dom||(mi=function(e){return e&&typeof e=="object"&&e.nodeType===1&&!Ni(e)||!1}),wi(/x/)&&(wi=function(e){return typeof e=="function"&&Ct.call(e)==F});var Ni=_t?function(e){if(!e||Ct.call(e)!=q||!on.argsClass&&Pn(e))return!1;var t=e.valueOf,n=Mn(t)&&(n=_t(t))&&_t(n);return n?e==n||_t(e)==n:Dn(e)}:Dn,Ai=Vt?function(e){return Ei(e)?on.enumPrototypes&&typeof e=="function"||on.nonEnumArgs&&e.length&&Pn(e)?Bn(e):Vt(e):[]}:Bn,qi=Yt?function(e,t){return e==null?"":t==null?Yt.call(e):mt(e,t)}:mt,Ri=Zt?function(e,t){return e==null?"":t==null?Zt.call(e):gt(e,t)}:gt,Ui=en?function(e,t){return e==null?"":t==null?en.call(e):yt(e,t)}:yt,Gi=Kt||function(){return(new V).getTime()},Yi=Qt(k+"08")==8?Qt:function(e,t){return e=qi(e),Qt(e,+t||(x.test(e)?16:10))};return rn.after=Fr,rn.assign=Zr,rn.at=cr,rn.bind=Ir,rn.bindAll=qr,rn.bindKey=Rr,rn.chain=or,rn.compact=jn,rn.compose=Ur,rn.constant=Wi,rn.countBy=pr,rn.create=ni,rn.createCallback=Xi,rn.curry=zr,rn.debounce=Wr,rn.defaults=ri,rn.defer=Xr,rn.delay=Vr,rn.difference=Fn,rn.filter=vr,rn.flatten=Un,rn.forEach=yr,rn.forEachRight=br,rn.forIn=oi,rn.forInRight=ui,rn.forOwn=ai,rn.forOwnRight=fi,rn.functions=li,rn.groupBy=wr,rn.indexBy=Er,rn.initial=Wn,rn.intersection=Xn,rn.invert=hi,rn.invoke=Sr,rn.keys=Ai,rn.map=xr,rn.mapValues=Oi,rn.matches=$i,rn.max=Tr,rn.memoize=$r,rn.merge=Mi,rn.min=Nr,rn.omit=_i,rn.once=Jr,rn.pairs=Di,rn.partial=Kr,rn.partialRight=Qr,rn.partition=Cr,rn.pick=Pi,rn.pluck=kr,rn.property=Zi,rn.pull=Jn,rn.range=Kn,rn.reject=Or,rn.remove=Qn,rn.rest=Gn,rn.shuffle=_r,rn.slice=Yn,rn.sortBy=Hr,rn.tap=ur,rn.throttle=Gr,rn.times=ns,rn.toArray=Br,rn.transform=Hi,rn.union=er,rn.uniq=tr,rn.values=Bi,rn.where=jr,rn.without=nr,rn.wrap=Yr,rn.xor=rr,rn.zip=ir,rn.zipObject=sr,rn.callback=Xi,rn.collect=xr,rn.drop=Gn,rn.each=yr,rn.eachRight=br,rn.extend=Zr,rn.methods=li,rn.object=sr,rn.select=vr,rn.tail=Gn,rn.unique=tr,rn.unzip=ir,Ji(Zr({},rn)),rn.capitalize=ji,rn.clone=ei,rn.cloneDeep=ti,rn.contains=hr,rn.escape=Fi,rn.every=dr,rn.find=mr,rn.findIndex=In,rn.findKey=ii,rn.findLast=gr,rn.findLastIndex=qn,rn.findLastKey=si,rn.has=ci,rn.identity=Vi,rn.indexOf=zn,rn.isArguments=Pn,rn.isArray=pi,rn.isBoolean=di,rn.isDate=vi,rn.isElement=mi,rn.isEmpty=gi,rn.isEqual=yi,rn.isFinite=bi,rn.isFunction=wi,rn.isNaN=Si,rn.isNull=xi,rn.isNumber=Ti,rn.isObject=Ei,rn.isPlainObject=Ni,rn.isRegExp=Ci,rn.isString=ki,rn.isUndefined=Li,rn.lastIndexOf=$n,rn.mixin=Ji,rn.noConflict=Ki,rn.noop=Qi,rn.now=Gi,rn.parseInt=Yi,rn.random=es,rn.reduce=Lr,rn.reduceRight=Ar,rn.result=ts,rn.runInContext=St,rn.size=Dr,rn.some=Pr,rn.sortedIndex=Zn,rn.template=Ii,rn.trim=qi,rn.trimLeft=Ri,rn.trimRight=Ui,rn.unescape=zi,rn.uniqueId=rs,rn.all=dr,rn.any=Pr,rn.detect=mr,rn.findWhere=mr,rn.foldl=Lr,rn.foldr=Ar,rn.include=hr,rn.inject=Lr,Ji(function(){var e={};return gn(rn,function(t,n){rn.prototype[n]||(e[n]=t)}),e}(),!1),rn.first=Rn,rn.last=Vn,rn.sample=Mr,rn.take=Rn,rn.head=Rn,gn(rn,function(e,t){var n=t!=="sample";rn.prototype[t]||(rn.prototype[t]=function(t,r){var i=this.__chain__,s=e(this.__wrapped__,t,r);return!i&&(t==null||r&&(!n||typeof t!="function"))?s:new sn(s,i)})}),rn.VERSION=f,rn.prototype.chain=ar,rn.prototype.toString=fr,rn.prototype.value=lr,rn.prototype.valueOf=lr,dn(["join","pop","shift"],function(e){var t=st[e];rn.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new sn(n,e):n}}),dn(["push","reverse","sort","unshift"],function(e){var t=st[e];rn.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),dn(["concat","splice"],function(e){var t=st[e];rn.prototype[e]=function(){return new sn(t.apply(this.__wrapped__,arguments),this.__chain__)}}),on.spliceObjects||dn(["pop","shift","splice"],function(e){var t=st[e],n=e=="splice";rn.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=t.apply(r,arguments);return r.length===0&&delete r[0],e||n?new sn(i,e):i}}),rn._baseForIn=Hn,rn._iteratorTemplate=un,rn._shimKeys=Bn,rn}var e,t=1,n=2,r=4,i=8,s=16,o=32,u=40,a=40,f="2.4.1",l="__lodash@"+f+"__",c=0,h=/\b__p \+= '';/g,p=/\b(__p \+=) '' \+/g,d=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v=/&(?:amp|lt|gt|quot|#39);/g,m=/[&<>"']/g,g=/<%-([\s\S]+?)%>/g,y=/<%([\s\S]+?)%>/g,b=/<%=([\s\S]+?)%>/g,w=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,E=/\w*$/,S=/^\s*function[ \n\r\t]+\w/,x=/^0[xX]/,T=/($^)/,N=/\bthis\b/,C=/['\n\r\t\u2028\u2029\\]/g,k=" 	\f\n\r\u2028\u2029",L=[],A=[],O=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","isNaN","parseInt","setTimeout","TypeError","window","WinRTError"],M=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_=0,D="[object Arguments]",P="[object Array]",H="[object Boolean]",B="[object Date]",j="[object Error]",F="[object Function]",I="[object Number]",q="[object Object]",R="[object RegExp]",U="[object String]",z={};z[F]=!1,z[D]=z[P]=z[H]=z[B]=z[I]=z[q]=z[R]=z[U]=!0;var W={leading:!1,maxWait:0,trailing:!1},X={configurable:!1,enumerable:!1,value:null,writable:!1},V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},J={"function":!0,object:!0},K={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Q=J[typeof window]&&window||this,G=J[typeof exports]&&exports&&!exports.nodeType&&exports,Y=J[typeof module]&&module&&!module.nodeType&&module,Z=G&&Y&&typeof global=="object"&&global;Z&&(Z.global===Z||Z.window===Z||Z.self===Z)&&(Q=Z);var et=Y&&Y.exports===G&&G,xt=St();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Q._=xt,define("underscore",[],function(){return xt})):G&&Y?et?(Y.exports=xt)._=xt:G._=xt:Q._=xt}.call(this),function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}(typeof window!="undefined"?window:this,function(window,noGlobal){function isArraylike(e){var t=e.length,n=jQuery.type(e);return n==="function"||jQuery.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function winnow(e,t,n){if(jQuery.isFunction(t))return jQuery.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return jQuery.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(risSimple.test(t))return jQuery.filter(t,e,n);t=jQuery.filter(t,e)}return jQuery.grep(e,function(e){return indexOf.call(t,e)>=0!==n})}function sibling(e,t){while((e=e[t])&&e.nodeType!==1);return e}function createOptions(e){var t=optionsCache[e]={};return jQuery.each(e.match(rnotwhite)||[],function(e,n){t[n]=!0}),t}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(e,t,n){var r;if(n===undefined&&e.nodeType===1){r="data-"+t.replace(rmultiDash,"-$1").toLowerCase(),n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:rbrace.test(n)?jQuery.parseJSON(n):n}catch(i){}data_user.set(e,t,n)}else n=undefined}return n}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(e){}}function manipulationTarget(e,t){return jQuery.nodeName(e,"table")&&jQuery.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function disableScript(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function restoreScript(e){var t=rscriptTypeMasked.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function setGlobalEval(e,t){var n=0,r=e.length;for(;n<r;n++)data_priv.set(e[n],"globalEval",!t||data_priv.get(t[n],"globalEval"))}function cloneCopyEvent(e,t){var n,r,i,s,o,u,a,f;if(t.nodeType!==1)return;if(data_priv.hasData(e)){s=data_priv.access(e),o=data_priv.set(t,s),f=s.events;if(f){delete o.handle,o.events={};for(i in f)for(n=0,r=f[i].length;n<r;n++)jQuery.event.add(t,i,f[i][n])}}data_user.hasData(e)&&(u=data_user.access(e),a=jQuery.extend({},u),data_user.set(t,a))}function getAll(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&jQuery.nodeName(e,t)?jQuery.merge([e],n):n}function fixInput(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&rcheckableType.test(e.type))t.checked=e.checked;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function actualDisplay(e,t){var n=jQuery(t.createElement(e)).appendTo(t.body),r=window.getDefaultComputedStyle?window.getDefaultComputedStyle(n[0]).display:jQuery.css(n[0],"display");return n.detach(),r}function defaultDisplay(e){var t=document,n=elemdisplay[e];if(!n){n=actualDisplay(e,t);if(n==="none"||!n)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=iframe[0].contentDocument,t.write(),t.close(),n=actualDisplay(e,t),iframe.detach();elemdisplay[e]=n}return n}function curCSS(e,t,n){var r,i,s,o,u=e.style;return n=n||getStyles(e),n&&(o=n.getPropertyValue(t)||n[t]),n&&(o===""&&!jQuery.contains(e.ownerDocument,e)&&(o=jQuery.style(e,t)),rnumnonpx.test(o)&&rmargin.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),o!==undefined?o+"":o}function addGetHookIf(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function vendorPropName(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=cssPrefixes.length;while(i--){t=cssPrefixes[i]+n;if(t in e)return t}return r}function setPositiveNumber(e,t,n){var r=rnumsplit.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function augmentWidthOrHeight(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=jQuery.css(e,n+cssExpand[s],!0,i)),r?(n==="content"&&(o-=jQuery.css(e,"padding"+cssExpand[s],!0,i)),n!=="margin"&&(o-=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i))):(o+=jQuery.css(e,"padding"+cssExpand[s],!0,i),n!=="padding"&&(o+=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i)));return o}function getWidthOrHeight(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=getStyles(e),o=jQuery.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=curCSS(e,t,s);if(i<0||i==null)i=e.style[t];if(rnumnonpx.test(i))return i;r=o&&(support.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+augmentWidthOrHeight(e,t,n||(o?"border":"content"),r,s)+"px"}function showHide(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=data_priv.get(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&isHidden(r)&&(s[o]=data_priv.access(r,"olddisplay",defaultDisplay(r.nodeName)))):s[o]||(i=isHidden(r),(n&&n!=="none"||!i)&&data_priv.set(r,"olddisplay",i?n:jQuery.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function Tween(e,t,n,r,i){return new Tween.prototype.init(e,t,n,r,i)}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(e,t){var n,r=0,i={height:e};t=t?1:0;for(;r<4;r+=2-t)n=cssExpand[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function createTween(e,t,n){var r,i=(tweeners[t]||[]).concat(tweeners["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function defaultPrefilter(e,t,n){var r,i,s,o,u,a,f,l=this,c={},h=e.style,p=e.nodeType&&isHidden(e),d=data_priv.get(e,"fxshow");n.queue||(u=jQuery._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,l.always(function(){l.always(function(){u.unqueued--,jQuery.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],f=jQuery.css(e,"display"),f==="none"&&(f=defaultDisplay(e.nodeName)),f==="inline"&&jQuery.css(e,"float")==="none"&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",l.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(rfxtypes.exec(i)){delete t[r],s=s||i==="toggle";if(i===(p?"hide":"show")){if(i!=="show"||!d||d[r]===undefined)continue;p=!0}c[r]=d&&d[r]||jQuery.style(e,r)}}if(!jQuery.isEmptyObject(c)){d?"hidden"in d&&(p=d.hidden):d=data_priv.access(e,"fxshow",{}),s&&(d.hidden=!p),p?jQuery(e).show():l.done(function(){jQuery(e).hide()}),l.done(function(){var t;data_priv.remove(e,"fxshow");for(t in c)jQuery.style(e,t,c[t])});for(r in c)o=createTween(p?d[r]:0,r,l),r in d||(d[r]=o.start,p&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function propFilter(e,t){var n,r,i,s,o;for(n in e){r=jQuery.camelCase(n),i=t[r],s=e[n],jQuery.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=jQuery.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Animation(e,t,n){var r,i,s=0,o=animationPrefilters.length,u=jQuery.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=fxNow||createFxNow(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:jQuery.extend({},t),opts:jQuery.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:fxNow||createFxNow(),duration:n.duration,tweens:[],createTween:function(t,n){var r=jQuery.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;propFilter(l,f.opts.specialEasing);for(;s<o;s++){r=animationPrefilters[s].call(f,e,l,f.opts);if(r)return r}return jQuery.map(l,createTween,f),jQuery.isFunction(f.opts.start)&&f.opts.start.call(e,f),jQuery.fx.timer(jQuery.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function addToPrefiltersOrTransports(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function inspectPrefiltersOrTransports(e,t,n,r){function o(u){var a;return i[u]=!0,jQuery.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===transports;return o(t.dataTypes[0])||!i["*"]&&o("*")}function ajaxExtend(e,t){var n,r,i=jQuery.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&jQuery.extend(!0,e,r),e}function ajaxHandleResponses(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==a[0]&&a.unshift(s),n[s]}function ajaxConvert(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function buildParams(e,t,n,r){var i;if(jQuery.isArray(t))jQuery.each(t,function(t,i){n||rbracket.test(e)?r(e,i):buildParams(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&jQuery.type(t)==="object")for(i in t)buildParams(e+"["+i+"]",t[i],n,r);else r(e,t)}function getWindow(e){return jQuery.isWindow(e)?e:e.nodeType===9&&e.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,trim="".trim,support={},document=window.document,version="2.1.0",jQuery=function(e,t){return new jQuery.fn.init(e,t)},rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(e,t){return t.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:slice.call(this)},pushStack:function(e){var t=jQuery.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return jQuery.each(this,e,t)},map:function(e){return this.pushStack(jQuery.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!jQuery.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((e=arguments[u])!=null)for(t in e){n=o[t],r=e[t];if(o===r)continue;f&&r&&(jQuery.isPlainObject(r)||(i=jQuery.isArray(r)))?(i?(i=!1,s=n&&jQuery.isArray(n)?n:[]):s=n&&jQuery.isPlainObject(n)?n:{},o[t]=jQuery.extend(f,s,r)):r!==undefined&&(o[t]=r)}return o},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return jQuery.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isPlainObject:function(e){if(jQuery.type(e)!=="object"||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!hasOwn.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?class2type[toString.call(e)]||"object":typeof e},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(e){return e.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:function(e){return e==null?"":trim.call(e)},makeArray:function(e,t){var n=t||[];return e!=null&&(isArraylike(Object(e))?jQuery.merge(n,typeof e=="string"?[e]:e):push.call(n,e)),n},inArray:function(e,t,n){return t==null?-1:indexOf.call(t,e,n)},merge:function(e,t){var n=+t.length,r=0,i=e.length;for(;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&u.push(r);else for(i in e)r=t(e[i],i,n),r!=null&&u.push(r);return concat.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return typeof t=="string"&&(n=e[t],t=e,e=n),jQuery.isFunction(e)?(r=slice.call(arguments,2),i=function(){return e.apply(t||this,r.concat(slice.call(arguments)))},i.guid=e.guid=e.guid||jQuery.guid++,i):undefined},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){class2type["[object "+t+"]"]=t.toLowerCase()});var Sizzle=function(e){function rt(e,t,r,i){var s,o,u,a,f,h,v,m,w,E;(t?t.ownerDocument||t:b)!==c&&l(t),t=t||c,r=r||[];if(!e||typeof e!="string")return r;if((a=t.nodeType)!==1&&a!==9)return[];if(p&&!i){if(s=G.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return r;if(o.id===u)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&g(t,o)&&o.id===u)return r.push(o),r}else{if(s[2])return _.apply(r,t.getElementsByTagName(e)),r;if((u=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return _.apply(r,t.getElementsByClassName(u)),r}if(n.qsa&&(!d||!d.test(e))){m=v=y,w=t,E=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){h=dt(e),(v=t.getAttribute("id"))?m=v.replace(Z,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=h.length;while(f--)h[f]=m+vt(h[f]);w=Y.test(e)&&ht(t.parentNode)||t,E=h.join(",")}if(E)try{return _.apply(r,w.querySelectorAll(E)),r}catch(S){}finally{v||t.removeAttribute("id")}}}return xt(e.replace(R,"$1"),t,r,i)}function it(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function st(e){return e[y]=!0,e}function ot(e){var t=c.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ut(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function at(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e){return e&&typeof e.getElementsByTagName!==C&&e}function pt(){}function dt(e,t){var n,i,s,o,u,a,f,l=x[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=U.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=z.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(R," ")}),u=u.slice(n.length);for(o in r.filter)(i=$[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?rt.error(e):x(e,a).slice(0)}function vt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function mt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=E++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[w,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[y]||(t[y]={});if((u=a[r])&&u[0]===w&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function yt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function bt(e,t,n,r,i,s){return r&&!r[y]&&(r=bt(r)),i&&!i[y]&&(i=bt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||St(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?yt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=yt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=yt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function wt(e){var t,n,i,s=e.length,o=r.relative[e[0].type],a=o||r.relative[" "],f=o?1:0,l=mt(function(e){return e===t},a,!0),c=mt(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,r){return!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;f<s;f++)if(n=r.relative[e[f].type])h=[mt(gt(h),n)];else{n=r.filter[e[f].type].apply(null,e[f].matches);if(n[y]){i=++f;for(;i<s;i++)if(r.relative[e[i].type])break;return bt(f>1&&gt(h),f>1&&vt(e.slice(0,f-1).concat({value:e[f-2].type===" "?"*":""})).replace(R,"$1"),n,f<i&&wt(e.slice(f,i)),i<s&&wt(e=e.slice(i)),i<s&&vt(e))}h.push(n)}return gt(h)}function Et(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,a,f,l){var h,p,d,v=0,m="0",g=s&&[],y=[],b=u,E=s||i&&r.find.TAG("*",l),S=w+=b==null?1:Math.random()||.1,x=E.length;l&&(u=o!==c&&o);for(;m!==x&&(h=E[m])!=null;m++){if(i&&h){p=0;while(d=e[p++])if(d(h,o,a)){f.push(h);break}l&&(w=S)}n&&((h=!d&&h)&&v--,s&&g.push(h))}v+=m;if(n&&m!==v){p=0;while(d=t[p++])d(g,y,o,a);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=O.call(f));y=yt(y)}_.apply(f,y),l&&!s&&y.length>0&&v+t.length>1&&rt.uniqueSort(f)}return l&&(w=S,u=b),g};return n?st(s):s}function St(e,t,n){var r=0,i=t.length;for(;r<i;r++)rt(e,t[r],n);return n}function xt(e,t,i,s){var u,a,f,l,c,h=dt(e);if(!s&&h.length===1){a=h[0]=h[0].slice(0);if(a.length>2&&(f=a[0]).type==="ID"&&n.getById&&t.nodeType===9&&p&&r.relative[a[1].type]){t=(r.find.ID(f.matches[0].replace(et,tt),t)||[])[0];if(!t)return i;e=e.slice(a.shift().value.length)}u=$.needsContext.test(e)?0:a.length;while(u--){f=a[u];if(r.relative[l=f.type])break;if(c=r.find[l])if(s=c(f.matches[0].replace(et,tt),Y.test(a[0].type)&&ht(t.parentNode)||t)){a.splice(u,1),e=s.length&&vt(a);if(!e)return _.apply(i,s),i;break}}}return o(e,h)(s,t,!p,i,Y.test(e)&&ht(t.parentNode)||t),i}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y="sizzle"+ -(new Date),b=e.document,w=0,E=0,S=it(),x=it(),T=it(),N=function(e,t){return e===t&&(f=!0),0},C=typeof undefined,k=1<<31,L={}.hasOwnProperty,A=[],O=A.pop,M=A.push,_=A.push,D=A.slice,P=A.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=j.replace("w","w#"),I="\\["+B+"*("+j+")"+B+"*(?:([*^$|!~]?=)"+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+B+"*\\]",q=":("+j+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),U=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),X=new RegExp(q),V=new RegExp("^"+F+"$"),$={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),tt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{_.apply(A=D.call(b.childNodes),b.childNodes),A[b.childNodes.length].nodeType}catch(nt){_={apply:A.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=rt.support={},s=rt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=rt.setDocument=function(e){var t,i=e?e.ownerDocument||e:b,o=i.defaultView;if(i===c||i.nodeType!==9||!i.documentElement)return c;c=i,h=i.documentElement,p=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){l()},!1):o.attachEvent&&o.attachEvent("onunload",function(){l()})),n.attributes=ot(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ot(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(i.getElementsByClassName)&&ot(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),n.getById=ot(function(e){return h.appendChild(e).id=y,!i.getElementsByName||!i.getElementsByName(y).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==C&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==C&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==C)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==C&&p)return t.getElementsByClassName(e)},v=[],d=[];if(n.qsa=Q.test(i.querySelectorAll))ot(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||d.push("\\["+B+"*(?:value|"+H+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&d.push("name"+B+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(n.matchesSelector=Q.test(m=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=d.length&&new RegExp(d.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),g=t||Q.test(h.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===b&&g(b,e)?-1:t===i||t.ownerDocument===b&&g(b,t)?1:a?P.call(a,e)-P.call(a,t):0:r&4?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],l=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:a?P.call(a,e)-P.call(a,t):0;if(s===o)return at(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)l.unshift(n);while(u[r]===l[r])r++;return r?at(u[r],l[r]):u[r]===b?-1:l[r]===b?1:0},i},rt.matches=function(e,t){return rt(e,null,null,t)},rt.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(W,"='$1']");if(n.matchesSelector&&p&&(!v||!v.test(t))&&(!d||!d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return rt(t,c,null,[e]).length>0},rt.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},rt.attr=function(e,t){(e.ownerDocument||e)!==c&&l(e);var i=r.attrHandle[t.toLowerCase()],s=i&&L.call(r.attrHandle,t.toLowerCase())?i(e,t,!p):undefined;return s!==undefined?s:n.attributes||!p?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},rt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},rt.uniqueSort=function(e){var t,r=[],i=0,s=0;f=!n.detectDuplicates,a=!n.sortStable&&e.slice(0),e.sort(N);if(f){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return a=null,e},i=rt.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=rt.selectors={cacheLength:50,createPseudo:st,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||rt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&rt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return $.CHILD.test(e[0])?null:(e[3]&&e[4]!==undefined?e[2]=e[4]:n&&X.test(n)&&(t=dt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(et,tt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&S(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=rt.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),b=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&b){l=m[y]||(m[y]={}),f=l[e]||[],p=f[0]===w&&f[1],h=f[0]===w&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[w,p,h];break}}else if(b&&(f=(t[y]||(t[y]={}))[e])&&f[0]===w)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){b&&((c[y]||(c[y]={}))[e]=[w,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||rt.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=P.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:st(function(e){var t=[],n=[],r=o(e.replace(R,"$1"));return r[y]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return rt(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:st(function(e){return V.test(e||"")||rt.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ft(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=lt(t);return pt.prototype=r.filters=r.pseudos,r.setFilters=new pt,o=rt.compile=function(e,t){var n,r=[],i=[],s=T[e+" "];if(!s){t||(t=dt(e)),n=t.length;while(n--)s=wt(t[n]),s[y]?r.push(s):i.push(s);s=T(e,Et(i,r))}return s},n.sortStable=y.split("").sort(N).join("")===y,n.detectDuplicates=!!f,l(),n.sortDetached=ot(function(e){return e.compareDocumentPosition(c.createElement("div"))&1}),ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ut("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!ot(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ut("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ot(function(e){return e.getAttribute("disabled")==null})||ut(H,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),rt}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?jQuery.find.matchesSelector(r,e)?[r]:[]:jQuery.find.matches(e,jQuery.grep(t,function(e){return e.nodeType===1}))},jQuery.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if(typeof e!="string")return this.pushStack(jQuery(e).filter(function(){for(t=0;t<n;t++)if(jQuery.contains(i[t],this))return!0}));for(t=0;t<n;t++)jQuery.find(e,i[t],r);return r=this.pushStack(n>1?jQuery.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(winnow(this,e||[],!1))},not:function(e){return this.pushStack(winnow(this,e||[],!0))},is:function(e){return!!winnow(this,typeof e=="string"&&rneedsContext.test(e)?jQuery(e):e||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(e,t){var n,r;if(!e)return this;if(typeof e=="string"){e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?n=[null,e,null]:n=rquickExpr.exec(e);if(n&&(n[1]||!t)){if(n[1]){t=t instanceof jQuery?t[0]:t,jQuery.merge(this,jQuery.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:document,!0));if(rsingleTag.test(n[1])&&jQuery.isPlainObject(t))for(n in t)jQuery.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=document.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=document,this.selector=e,this}return!t||t.jquery?(t||rootjQuery).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):jQuery.isFunction(e)?typeof rootjQuery.ready!="undefined"?rootjQuery.ready(e):e(jQuery):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),jQuery.makeArray(e,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9)if(e.nodeType===1){if(i&&jQuery(e).is(n))break;r.push(e)}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}}),jQuery.fn.extend({has:function(e){var t=jQuery(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++)if(jQuery.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=rneedsContext.test(e)||typeof e!="string"?jQuery(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&jQuery.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?jQuery.unique(s):s)},index:function(e){return e?typeof e=="string"?indexOf.call(jQuery(e),this[0]):indexOf.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),jQuery.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return jQuery.dir(e,"parentNode")},parentsUntil:function(e,t,n){return jQuery.dir(e,"parentNode",n)},next:function(e){return sibling(e,"nextSibling")},prev:function(e){return sibling(e,"previousSibling")},nextAll:function(e){return jQuery.dir(e,"nextSibling")},prevAll:function(e){return jQuery.dir(e,"previousSibling")},nextUntil:function(e,t,n){return jQuery.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return jQuery.dir(e,"previousSibling",n)},siblings:function(e){return jQuery.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return jQuery.sibling(e.firstChild)},contents:function(e){return e.contentDocument||jQuery.merge([],e.childNodes)}},function(e,t){jQuery.fn[e]=function(n,r){var i=jQuery.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=jQuery.filter(r,i)),this.length>1&&(guaranteedUnique[e]||jQuery.unique(i),rparentsprev.test(e)&&i.reverse()),this.pushStack(i)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(e){e=typeof e=="string"?optionsCache[e]||createOptions(e):jQuery.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){t=e.memory&&c,n=!0,o=i||0,i=0,s=u.length,r=!0;for(;u&&o<s;o++)if(u[o].apply(c[0],c[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(a?a.length&&f(a.shift()):t?u=[]:l.disable())},l={add:function(){if(u){var n=u.length;(function o(t){jQuery.each(t,function(t,n){var r=jQuery.type(n);r==="function"?(!e.unique||!l.has(n))&&u.push(n):n&&n.length&&r!=="string"&&o(n)})})(arguments),r?s=u.length:t&&(i=n,f(t))}return this},remove:function(){return u&&jQuery.each(arguments,function(e,t){var n;while((n=jQuery.inArray(t,u,n))>-1)u.splice(n,1),r&&(n<=s&&s--,n<=o&&o--)}),this},has:function(e){return e?jQuery.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],s=0,this},disable:function(){return u=a=t=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,t||l.disable(),this},locked:function(){return!a},fireWith:function(e,t){return u&&(!n||a)&&(t=t||[],t=[e,t.slice?t.slice():t],r?a.push(t):f(t)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},jQuery.extend({Deferred:function(e){var t=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return jQuery.Deferred(function(n){jQuery.each(t,function(t,s){var o=jQuery.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&jQuery.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?jQuery.extend(e,r):r}},i={};return r.pipe=r.then,jQuery.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=slice.call(arguments),r=n.length,i=r!==1||e&&jQuery.isFunction(e.promise)?r:0,s=i===1?e:jQuery.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?slice.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&jQuery.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}});var readyList;jQuery.fn.ready=function(e){return jQuery.ready.promise().done(e),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(e){e?jQuery.readyWait++:jQuery.ready(!0)},ready:function(e){if(e===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(e!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")}}),jQuery.ready.promise=function(e){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(e)},jQuery.ready.promise();var access=jQuery.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(jQuery.type(n)==="object"){i=!0;for(u in n)jQuery.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,jQuery.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(jQuery(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s};jQuery.acceptData=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(e){if(!Data.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=Data.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,jQuery.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),s=this.cache[i];if(typeof t=="string")s[t]=n;else if(jQuery.isEmptyObject(s))jQuery.extend(this.cache[i],t);else for(r in t)s[r]=t[r];return s},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&typeof t=="string"&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,jQuery.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,s=this.key(e),o=this.cache[s];if(t===undefined)this.cache[s]={};else{jQuery.isArray(t)?r=t.concat(t.map(jQuery.camelCase)):(i=jQuery.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(rnotwhite)||[])),n=r.length;while(n--)delete o[r[n]]}},hasData:function(e){return!jQuery.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(e){return data_user.hasData(e)||data_priv.hasData(e)},data:function(e,t,n){return data_user.access(e,t,n)},removeData:function(e,t){data_user.remove(e,t)},_data:function(e,t,n){return data_priv.access(e,t,n)},_removeData:function(e,t){data_priv.remove(e,t)}}),jQuery.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=data_user.get(s);if(s.nodeType===1&&!data_priv.get(s,"hasDataAttrs")){n=o.length;while(n--)r=o[n].name,r.indexOf("data-")===0&&(r=jQuery.camelCase(r.slice(5)),dataAttr(s,r,i[r]));data_priv.set(s,"hasDataAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){data_user.set(this,e)}):access(this,function(t){var n,r=jQuery.camelCase(e);if(s&&t===undefined){n=data_user.get(s,e);if(n!==undefined)return n;n=data_user.get(s,r);if(n!==undefined)return n;n=dataAttr(s,r,undefined);if(n!==undefined)return n;return}this.each(function(){var n=data_user.get(this,r);data_user.set(this,r,t),e.indexOf("-")!==-1&&n!==undefined&&data_user.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){data_user.remove(this,e)})}}),jQuery.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=data_priv.get(e,t),n&&(!r||jQuery.isArray(n)?r=data_priv.access(e,t,jQuery.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=jQuery.queue(e,t),r=n.length,i=n.shift(),s=jQuery._queueHooks(e,t),o=function(){jQuery.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return data_priv.get(e,n)||data_priv.access(e,n,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(e,[t+"queue",n])})})}}),jQuery.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?jQuery.queue(this[0],e):t===undefined?this:this.each(function(){var n=jQuery.queue(this,e,t);jQuery._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&jQuery.dequeue(this,e)})},dequeue:function(e){return this.each(function(){jQuery.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=jQuery.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=data_priv.get(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(e,t){return e=t||e,jQuery.css(e,"display")==="none"||!jQuery.contains(e.ownerDocument,e)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var e=document.createDocumentFragment(),t=e.appendChild(document.createElement("div"));t.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.get(e);if(!m)return;n.handler&&(s=n,n=s.handler,i=s.selector),n.guid||(n.guid=jQuery.guid++),(a=m.events)||(a=m.events={}),(o=m.handle)||(o=m.handle=function(t){return typeof jQuery!==strundefined&&jQuery.event.triggered!==t.type?jQuery.event.dispatch.apply(e,arguments):undefined}),t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p)continue;c=jQuery.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=jQuery.event.special[p]||{},l=jQuery.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&jQuery.expr.match.needsContext.test(i),namespace:d.join(".")},s),(h=a[p])||(h=a[p]=[],h.delegateCount=0,(!c.setup||c.setup.call(e,r,d,o)===!1)&&e.addEventListener&&e.addEventListener(p,o,!1)),c.add&&(c.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),jQuery.event.global[p]=!0}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.hasData(e)&&data_priv.get(e);if(!m||!(a=m.events))return;t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in a)jQuery.event.remove(e,p+t[f],n,r,!0);continue}c=jQuery.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],(i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)&&(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&jQuery.removeEvent(e,p,m.handle),delete a[p])}jQuery.isEmptyObject(a)&&(delete m.handle,data_priv.remove(e,"events"))},trigger:function(e,t,n,r){var i,s,o,u,a,f,l,c=[n||document],h=hasOwn.call(e,"type")?e.type:e,p=hasOwn.call(e,"namespace")?e.namespace.split("."):[];s=o=n=n||document;if(n.nodeType===3||n.nodeType===8)return;if(rfocusMorph.test(h+jQuery.event.triggered))return;h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,e=e[jQuery.expando]?e:new jQuery.Event(h,typeof e=="object"&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=t==null?[e]:jQuery.makeArray(t,[e]),l=jQuery.event.special[h]||{};if(!r&&l.trigger&&l.trigger.apply(n,t)===!1)return;if(!r&&!l.noBubble&&!jQuery.isWindow(n)){u=l.delegateType||h,rfocusMorph.test(u+h)||(s=s.parentNode);for(;s;s=s.parentNode)c.push(s),o=s;o===(n.ownerDocument||document)&&c.push(o.defaultView||o.parentWindow||window)}i=0;while((s=c[i++])&&!e.isPropagationStopped())e.type=i>1?u:l.bindType||h,f=(data_priv.get(s,"events")||{})[e.type]&&data_priv.get(s,"handle"),f&&f.apply(s,t),f=a&&s[a],f&&f.apply&&jQuery.acceptData(s)&&(e.result=f.apply(s,t),e.result===!1&&e.preventDefault());return e.type=h,!r&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(c.pop(),t)===!1)&&jQuery.acceptData(n)&&a&&jQuery.isFunction(n[h])&&!jQuery.isWindow(n)&&(o=n[a],o&&(n[a]=null),jQuery.event.triggered=h,n[h](),jQuery.event.triggered=undefined,o&&(n[a]=o)),e.result},dispatch:function(e){e=jQuery.event.fix(e);var t,n,r,i,s,o=[],u=slice.call(arguments),a=(data_priv.get(this,"events")||{})[e.type]||[],f=jQuery.event.special[e.type]||{};u[0]=e,e.delegateTarget=this;if(f.preDispatch&&f.preDispatch.call(this,e)===!1)return;o=jQuery.event.handlers.call(this,e,a),t=0;while((i=o[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(s.namespace))e.handleObj=s,e.data=s.data,r=((jQuery.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return f.postDispatch&&f.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||e.type!=="click"))for(;a!==this;a=a.parentNode||this)if(a.disabled!==!0||e.type!=="click"){r=[];for(n=0;n<u;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?jQuery(i,this).index(a)>=0:jQuery.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return e.pageX==null&&t.clientX!=null&&(n=e.target.ownerDocument||document,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.which&&s!==undefined&&(e.which=s&1?1:s&2?3:s&4?2:0),e}},fix:function(e){if(e[jQuery.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=rmouseEvent.test(i)?this.mouseHooks:rkeyEvent.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new jQuery.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=document),e.target.nodeType===3&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(e){return jQuery.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=jQuery.extend(new jQuery.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?jQuery.event.trigger(i,null,t):jQuery.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},jQuery.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},jQuery.Event=function(e,t){if(!(this instanceof jQuery.Event))return new jQuery.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.getPreventDefault&&e.getPreventDefault()?returnTrue:returnFalse):this.type=e,t&&jQuery.extend(this,t),this.timeStamp=e&&e.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){jQuery.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!jQuery.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){jQuery.event.simulate(t,e.target,jQuery.event.fix(e),!0)};jQuery.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=data_priv.access(r,t);i||r.addEventListener(e,n,!0),data_priv.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=data_priv.access(r,t)-1;i?data_priv.access(r,t,i):(r.removeEventListener(e,n,!0),data_priv.remove(r,t))}}}),jQuery.fn.extend({on:function(e,t,n,r,i){var s,o;if(typeof e=="object"){typeof t!="string"&&(n=n||t,t=undefined);for(o in e)this.on(o,t,n,e[o],i);return this}n==null&&r==null?(r=t,n=t=undefined):r==null&&(typeof t=="string"?(r=n,n=undefined):(r=n,n=t,t=undefined));if(r===!1)r=returnFalse;else if(!r)return this;return i===1&&(s=r,r=function(e){return jQuery().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,jQuery(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=returnFalse),this.each(function(){jQuery.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){jQuery.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return jQuery.event.trigger(e,t,n,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(e,t,n){var r,i,s,o,u=e.cloneNode(!0),a=jQuery.contains(e.ownerDocument,e);if(!support.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!jQuery.isXMLDoc(e)){o=getAll(u),s=getAll(e);for(r=0,i=s.length;r<i;r++)fixInput(s[r],o[r])}if(t)if(n){s=s||getAll(e),o=o||getAll(u);for(r=0,i=s.length;r<i;r++)cloneCopyEvent(s[r],o[r])}else cloneCopyEvent(e,u);return o=getAll(u,"script"),o.length>0&&setGlobalEval(o,!a&&getAll(e,"script")),u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l=t.createDocumentFragment(),c=[],h=0,p=e.length;for(;h<p;h++){i=e[h];if(i||i===0)if(jQuery.type(i)==="object")jQuery.merge(c,i.nodeType?[i]:i);else if(!rhtml.test(i))c.push(t.createTextNode(i));else{s=s||l.appendChild(t.createElement("div")),o=(rtagName.exec(i)||["",""])[1].toLowerCase(),u=wrapMap[o]||wrapMap._default,s.innerHTML=u[1]+i.replace(rxhtmlTag,"<$1></$2>")+u[2],f=u[0];while(f--)s=s.lastChild;jQuery.merge(c,s.childNodes),s=l.firstChild,s.textContent=""}}l.textContent="",h=0;while(i=c[h++]){if(r&&jQuery.inArray(i,r)!==-1)continue;a=jQuery.contains(i.ownerDocument,i),s=getAll(l.appendChild(i),"script"),a&&setGlobalEval(s);if(n){f=0;while(i=s[f++])rscriptType.test(i.type||"")&&n.push(i)}}return l},cleanData:function(e){var t,n,r,i,s,o,u=jQuery.event.special,a=0;for(;(n=e[a])!==undefined;a++){if(jQuery.acceptData(n)){s=n[data_priv.expando];if(s&&(t=data_priv.cache[s])){r=Object.keys(t.events||{});if(r.length)for(o=0;(i=r[o])!==undefined;o++)u[i]?jQuery.event.remove(n,i):jQuery.removeEvent(n,i,t.handle);data_priv.cache[s]&&delete data_priv.cache[s]}}delete data_user.cache[n[data_user.expando]]}}}),jQuery.fn.extend({text:function(e){return access(this,function(e){return e===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=e})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?jQuery.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&jQuery.cleanData(getAll(n)),n.parentNode&&(t&&jQuery.contains(n.ownerDocument,n)&&setGlobalEval(getAll(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++)e.nodeType===1&&(jQuery.cleanData(getAll(e,!1)),e.textContent="");return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return jQuery.clone(this,e,t)})},html:function(e){return access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&t.nodeType===1)return t.innerHTML;if(typeof e=="string"&&!rnoInnerhtml.test(e)&&!wrapMap[(rtagName.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(rxhtmlTag,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(jQuery.cleanData(getAll(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,jQuery.cleanData(getAll(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=concat.apply([],e);var n,r,i,s,o,u,a=0,f=this.length,l=this,c=f-1,h=e[0],p=jQuery.isFunction(h);if(p||f>1&&typeof h=="string"&&!support.checkClone&&rchecked.test(h))return this.each(function(n){var r=l.eq(n);p&&(e[0]=h.call(this,n,r.html())),r.domManip(e,t)});if(f){n=jQuery.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,n.childNodes.length===1&&(n=r);if(r){i=jQuery.map(getAll(n,"script"),disableScript),s=i.length;for(;a<f;a++)o=n,a!==c&&(o=jQuery.clone(o,!0,!0),s&&jQuery.merge(i,getAll(o,"script"))),t.call(this[a],o,a);if(s){u=i[i.length-1].ownerDocument,jQuery.map(i,restoreScript);for(a=0;a<s;a++)o=i[a],rscriptType.test(o.type||"")&&!data_priv.access(o,"globalEval")&&jQuery.contains(u,o)&&(o.src?jQuery._evalUrl&&jQuery._evalUrl(o.src):jQuery.globalEval(o.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){jQuery.fn[e]=function(e){var n,r=[],i=jQuery(e),s=i.length-1,o=0;for(;o<=s;o++)n=o===s?this:this.clone(!0),jQuery(i[o])[t](n),push.apply(r,n.get());return this.pushStack(r)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};(function(){function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",r.appendChild(i);var n=window.getComputedStyle(s,null);e=n.top!=="1%",t=n.width==="4px",r.removeChild(i)}var e,t,n="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",r=document.documentElement,i=document.createElement("div"),s=document.createElement("div");s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=s.style.backgroundClip==="content-box",i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",i.appendChild(s),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return t==null&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(document.createElement("div"));return t.style.cssText=s.style.cssText=n,t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(window.getComputedStyle(t,null).marginRight),r.removeChild(i),s.innerHTML="",e}})})(),jQuery.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=curCSS(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=jQuery.camelCase(t),a=e.style;t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(a,u)),o=jQuery.cssHooks[t]||jQuery.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=rrelNum.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(jQuery.css(e,t)),s="number");if(n==null||n!==n)return;s==="number"&&!jQuery.cssNumber[u]&&(n+="px"),!support.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)a[t]="",a[t]=n},css:function(e,t,n,r){var i,s,o,u=jQuery.camelCase(t);return t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(e.style,u)),o=jQuery.cssHooks[t]||jQuery.cssHooks[u],o&&"get"in o&&(i=o.get(e,!0,n)),i===undefined&&(i=curCSS(e,t,r)),i==="normal"&&t in cssNormalTransform&&(i=cssNormalTransform[t]),n===""||n?(s=parseFloat(i),n===!0||jQuery.isNumeric(s)?s||0:i):i}}),jQuery.each(["height","width"],function(e,t){jQuery.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&rdisplayswap.test(jQuery.css(e,"display"))?jQuery.swap(e,cssShow,function(){return getWidthOrHeight(e,t,r)}):getWidthOrHeight(e,t,r)},set:function(e,n,r){var i=r&&getStyles(e);return setPositiveNumber(e,n,r?augmentWidthOrHeight(e,t,r,jQuery.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(e,t){if(t)return jQuery.swap(e,{display:"inline-block"},curCSS,[e,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(e,t){jQuery.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+cssExpand[r]+t]=s[r]||s[r-2]||s[0];return i}},rmargin.test(e)||(jQuery.cssHooks[e+t].set=setPositiveNumber)}),jQuery.fn.extend({css:function(e,t){return access(this,function(e,t,n){var r,i,s={},o=0;if(jQuery.isArray(t)){r=getStyles(e),i=t.length;for(;o<i;o++)s[t[o]]=jQuery.css(e,t[o],!1,r);return s}return n!==undefined?jQuery.style(e,t,n):jQuery.css(e,t)},e,t,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(jQuery.cssNumber[n]?"":"px")},cur:function(){var e=Tween.propHooks[this.prop];return e&&e.get?e.get(this):Tween.propHooks._default.get(this)},run:function(e){var t,n=Tween.propHooks[this.prop];return this.options.duration?this.pos=t=jQuery.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=jQuery.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){jQuery.fx.step[e.prop]?jQuery.fx.step[e.prop](e):e.elem.style&&(e.elem.style[jQuery.cssProps[e.prop]]!=null||jQuery.cssHooks[e.prop])?jQuery.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},jQuery.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=rfxnum.exec(t),s=i&&i[3]||(jQuery.cssNumber[e]?"":"px"),o=(jQuery.cssNumber[e]||s!=="px"&&+r)&&rfxnum.exec(jQuery.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,jQuery.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(e,t){jQuery.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],tweeners[n]=tweeners[n]||[],tweeners[n].unshift(t)},prefilter:function(e,t){t?animationPrefilters.unshift(e):animationPrefilters.push(e)}}),jQuery.speed=function(e,t,n){var r=e&&typeof e=="object"?jQuery.extend({},e):{complete:n||!n&&t||jQuery.isFunction(e)&&e,duration:e,easing:n&&t||t&&!jQuery.isFunction(t)&&t};r.duration=jQuery.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in jQuery.fx.speeds?jQuery.fx.speeds[r.duration]:jQuery.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){jQuery.isFunction(r.old)&&r.old.call(this),r.queue&&jQuery.dequeue(this,r.queue)},r},jQuery.fn.extend({fadeTo:function(e,t,n,r){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=jQuery.isEmptyObject(e),s=jQuery.speed(t,n,r),o=function(){var t=Animation(this,jQuery.extend({},e),s);(i||data_priv.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=jQuery.timers,o=data_priv.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&rrun.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&jQuery.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=data_priv.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=jQuery.timers,o=r?r.length:0;n.finish=!0,jQuery.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),jQuery.each(["toggle","show","hide"],function(e,t){var n=jQuery.fn[t];jQuery.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(genFx(t,!0),e,r,i)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){jQuery.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),jQuery.timers=[],jQuery.fx.tick=function(){var e,t=0,n=jQuery.timers;fxNow=jQuery.now();for(;t<n.length;t++)e=n[t],!e()&&n[t]===e&&n.splice(t--,1);n.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(e){jQuery.timers.push(e),e()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(e,t){return e=jQuery.fx?jQuery.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=document.createElement("input"),t=document.createElement("select"),n=t.appendChild(document.createElement("option"));e.type="checkbox",support.checkOn=e.value!=="",support.optSelected=n.selected,t.disabled=!0,support.optDisabled=!n.disabled,e=document.createElement("input"),e.value="t",e.type="radio",support.radioValue=e.value==="t"}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(e,t){return access(this,jQuery.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){jQuery.removeAttr(this,e)})}}),jQuery.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(!e||s===3||s===8||s===2)return;if(typeof e.getAttribute===strundefined)return jQuery.prop(e,t,n);if(s!==1||!jQuery.isXMLDoc(e))t=t.toLowerCase(),r=jQuery.attrHooks[t]||(jQuery.expr.match.bool.test(t)?boolHook:nodeHook);if(n===undefined)return r&&"get"in r&&(i=r.get(e,t))!==null?i:(i=jQuery.find.attr(e,t),i==null?undefined:i);if(n!==null)return r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n);jQuery.removeAttr(e,t)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(rnotwhite);if(s&&e.nodeType===1)while(n=s[i++])r=jQuery.propFix[n]||n,jQuery.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!support.radioValue&&t==="radio"&&jQuery.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),boolHook={set:function(e,t,n){return t===!1?jQuery.removeAttr(e,n):e.setAttribute(n,n),n}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(e,t){var n=attrHandle[t]||jQuery.find.attr;attrHandle[t]=function(e,t,r){var i,s;return r||(s=attrHandle[t],attrHandle[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,attrHandle[t]=s),i}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(e,t){return access(this,jQuery.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[jQuery.propFix[e]||e]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(!e||o===3||o===8||o===2)return;return s=o!==1||!jQuery.isXMLDoc(e),s&&(t=jQuery.propFix[t]||t,i=jQuery.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||rfocusable.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=typeof e=="string"&&e,a=0,f=this.length;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).addClass(e.call(this,t,this.className))});if(u){t=(e||"").match(rnotwhite)||[];for(;a<f;a++){n=this[a],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=jQuery.trim(r),n.className!==o&&(n.className=o)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u=arguments.length===0||typeof e=="string"&&e,a=0,f=this.length;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).removeClass(e.call(this,t,this.className))});if(u){t=(e||"").match(rnotwhite)||[];for(;a<f;a++){n=this[a],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?jQuery.trim(r):"",n.className!==o&&(n.className=o)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):jQuery.isFunction(e)?this.each(function(n){jQuery(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,i=jQuery(this),s=e.match(rnotwhite)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(n===strundefined||n==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||e===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(rclass," ").indexOf(t)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=jQuery.valHooks[i.type]||jQuery.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(rreturn,""):n==null?"":n);return}return r=jQuery.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,jQuery(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":jQuery.isArray(i)&&(i=jQuery.map(i,function(e){return e==null?"":e+""})),t=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),jQuery.extend({valHooks:{select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!jQuery.nodeName(n.parentNode,"optgroup"))){t=jQuery(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=jQuery.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=jQuery.inArray(jQuery(r).val(),s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(e,t){if(jQuery.isArray(t))return e.checked=jQuery.inArray(jQuery(e).val(),t)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){jQuery.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),jQuery.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(e){return JSON.parse(e+"")},jQuery.parseXML=function(e){var t,n;if(!e||typeof e!="string")return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+e),t};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ajaxExtend(ajaxExtend(e,jQuery.ajaxSettings),t):ajaxExtend(jQuery.ajaxSettings,e)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(e,t){function S(e,t,s,u){var f,m,g,b,E,S=t;if(y===2)return;y=2,o&&clearTimeout(o),n=undefined,i=u||"",w.readyState=e>0?4:0,f=e>=200&&e<300||e===304,s&&(b=ajaxHandleResponses(l,w,s)),b=ajaxConvert(l,b,w,f);if(f)l.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(jQuery.lastModified[r]=E),E=w.getResponseHeader("etag"),E&&(jQuery.etag[r]=E)),e===204||l.type==="HEAD"?S="nocontent":e===304?S="notmodified":(S=b.state,m=b.data,g=b.error,f=!g);else{g=S;if(e||!S)S="error",e<0&&(e=0)}w.status=e,w.statusText=(t||S)+"",f?p.resolveWith(c,[m,S,w]):p.rejectWith(c,[w,S,g]),w.statusCode(v),v=undefined,a&&h.trigger(f?"ajaxSuccess":"ajaxError",[w,l,f?m:g]),d.fireWith(c,[w,S]),a&&(h.trigger("ajaxComplete",[w,l]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof e=="object"&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=jQuery.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?jQuery(c):jQuery.event,p=jQuery.Deferred(),d=jQuery.Callbacks("once memory"),v=l.statusCode||{},m={},g={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(y===2){if(!s){s={};while(t=rheaders.exec(i))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return y===2?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=g[n]=g[n]||e,m[e]=t),this},overrideMimeType:function(e){return y||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),S(0,t),this}};p.promise(w).complete=d.add,w.success=w.done,w.error=w.fail,l.url=((e||l.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=jQuery.trim(l.dataType||"*").toLowerCase().match(rnotwhite)||[""],l.crossDomain==null&&(u=rurl.exec(l.url.toLowerCase()),l.crossDomain=!(!u||u[1]===ajaxLocParts[1]&&u[2]===ajaxLocParts[2]&&(u[3]||(u[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=jQuery.param(l.data,l.traditional)),inspectPrefiltersOrTransports(prefilters,l,t,w);if(y===2)return w;a=l.global,a&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!rnoContent.test(l.type),r=l.url,l.hasContent||(l.data&&(r=l.url+=(rquery.test(r)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=rts.test(r)?r.replace(rts,"$1_="+nonce++):r+(rquery.test(r)?"&":"?")+"_="+nonce++)),l.ifModified&&(jQuery.lastModified[r]&&w.setRequestHeader("If-Modified-Since",jQuery.lastModified[r]),jQuery.etag[r]&&w.setRequestHeader("If-None-Match",jQuery.etag[r])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):l.accepts["*"]);for(f in l.headers)w.setRequestHeader(f,l.headers[f]);if(!l.beforeSend||l.beforeSend.call(c,w,l)!==!1&&y!==2){b="abort";for(f in{success:1,error:1,complete:1})w[f](l[f]);n=inspectPrefiltersOrTransports(transports,l,t,w);if(!n)S(-1,"No Transport");else{w.readyState=1,a&&h.trigger("ajaxSend",[w,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){w.abort("timeout")},l.timeout));try{y=1,n.send(m,S)}catch(E){if(!(y<2))throw E;S(-1,E)}}return w}return w.abort()},getJSON:function(e,t,n){return jQuery.get(e,t,n,"json")},getScript:function(e,t){return jQuery.get(e,undefined,t,"script")}}),jQuery.each(["get","post"],function(e,t){jQuery[t]=function(e,n,r,i){return jQuery.isFunction(n)&&(i=i||r,r=n,n=undefined),jQuery.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){jQuery.fn[t]=function(e){return this.on(t,e)}}),jQuery._evalUrl=function(e){return jQuery.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(e){var t;return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapAll(e.call(this,t))}):(this[0]&&(t=jQuery(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapInner(e.call(this,t))}):this.each(function(){var t=jQuery(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=jQuery.isFunction(e);return this.each(function(n){jQuery(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},jQuery.expr.filters.visible=function(e){return!jQuery.expr.filters.hidden(e)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(e,t){var n,r=[],i=function(e,t){t=jQuery.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(e)||e.jquery&&!jQuery.isPlainObject(e))jQuery.each(e,function(){i(this.name,this.value)});else for(n in e)buildParams(n,e[n],t,i);return r.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=jQuery.prop(this,"elements");return e?jQuery.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(e)&&(this.checked||!rcheckableType.test(e))}).map(function(e,t){var n=jQuery(this).val();return n==null?null:jQuery.isArray(n)?jQuery.map(n,function(e){return{name:t.name,value:e.replace(rCRLF,"\r\n")}}):{name:t.name,value:n.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.ActiveXObject&&jQuery(window).on("unload",function(){for(var e in xhrCallbacks)xhrCallbacks[e]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(e){var t;if(support.cors||xhrSupported&&!e.crossDomain)return{send:function(n,r){var i,s=e.xhr(),o=++xhrId;s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete xhrCallbacks[o],t=s.onload=s.onerror=null,e==="abort"?s.abort():e==="error"?r(s.status,s.statusText):r(xhrSuccessStatus[s.status]||s.status,s.statusText,typeof s.responseText=="string"?{text:s.responseText}:undefined,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=xhrCallbacks[o]=t("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return jQuery.globalEval(e),e}}}),jQuery.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),jQuery.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=jQuery("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i(e.type==="error"?404:200,e.type)}),document.head.appendChild(t[0])},abort:function(){n&&n()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[e]=!0,e}}),jQuery.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,o=e.jsonp!==!1&&(rjsonp.test(e.url)?"url":typeof e.data=="string"&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp")return r=e.jsonpCallback=jQuery.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(rjsonp,"$1"+r):e.jsonp!==!1&&(e.url+=(rquery.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||jQuery.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=window[r],window[r]=function(){s=arguments},n.always(function(){window[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,oldCallbacks.push(r)),s&&jQuery.isFunction(i)&&i(s[0]),s=i=undefined}),"script"}),jQuery.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||document;var r=rsingleTag.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=jQuery.buildFragment([e],t,i),i&&i.length&&jQuery(i).remove(),jQuery.merge([],r.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(e,t,n){if(typeof e!="string"&&_load)return _load.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u),e=e.slice(0,u)),jQuery.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(i="POST"),o.length>0&&jQuery.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?jQuery("<div>").append(jQuery.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])}),this},jQuery.expr.filters.animated=function(e){return jQuery.grep(jQuery.timers,function(t){return e===t.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=jQuery.css(e,"position"),c=jQuery(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=jQuery.css(e,"top"),a=jQuery.css(e,"left"),f=(l==="absolute"||l==="fixed")&&(s+a).indexOf("auto")>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),jQuery.isFunction(t)&&(t=t.call(e,n,u)),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},jQuery.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){jQuery.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},s=r&&r.ownerDocument;if(!s)return;return t=s.documentElement,jQuery.contains(t,r)?(typeof r.getBoundingClientRect!==strundefined&&(i=r.getBoundingClientRect()),n=getWindow(s),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(!this[0])return;var e,t,n=this[0],r={top:0,left:0};return jQuery.css(n,"position")==="fixed"?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),jQuery.nodeName(e[0],"html")||(r=e.offset()),r.top+=jQuery.css(e[0],"borderTopWidth",!0),r.left+=jQuery.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-jQuery.css(n,"marginTop",!0),left:t.left-r.left-jQuery.css(n,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||docElem;while(e&&!jQuery.nodeName(e,"html")&&jQuery.css(e,"position")==="static")e=e.offsetParent;return e||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;jQuery.fn[e]=function(r){return access(this,function(e,r,i){var s=getWindow(e);if(i===undefined)return s?s[t]:e[r];s?s.scrollTo(n?window.pageXOffset:i,n?i:window.pageYOffset):e[r]=i},e,r,arguments.length,null)}}),jQuery.each(["top","left"],function(e,t){jQuery.cssHooks[t]=addGetHookIf(support.pixelPosition,function(e,n){if(n)return n=curCSS(e,t),rnumnonpx.test(n)?jQuery(e).position()[t]+"px":n})}),jQuery.each({Height:"height",Width:"width"},function(e,t){jQuery.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){jQuery.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return access(this,function(t,n,r){var i;return jQuery.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?jQuery.css(t,n,o):jQuery.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(e){return window.$===jQuery&&(window.$=_$),e&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery}),define("jQuery",function(e){return function(){var t,n;return t||e.$}}(this)),define("hr/dom",["jQuery"],function(e){return e}),define("hr/utils",["underscore","hr/dom"],function(e,t){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}});var n=function(e){return t.extend(!0,{},e)},r=function(t){return t!=null&&(t.prototype==={}.prototype||t.prototype===Object.prototype)&&e.isObject(t)&&!e.isArray(t)&&!e.isFunction(t)&&!e.isDate(t)&&!e.isRegExp(t)&&!e.isArguments(t)},i=function(t){return e.filter(e.keys(t),function(e){return r(t[e])})},s=function(t){return e.filter(e.keys(t),function(n){return e.isArray(t[n])})},o=e.partial(t.extend,!0),u=function(n){return!t.isArray(n)||n.length==0?0:e.reduce(n,function(e,t){return e+=t})},a=function(e){return t("<div>").html(e).text()},f=function(t,n){var r=[],i=function(t,n){return e.size(t)==0?n:t+"."+n},s=function(t,o){var u,a;o=o||"",e.each(t,function(t,f){u=i(o,f),a=e.isObject(t)&&!e.isArray(t),a&&s(t,u),(n==1||!a)&&r.push(u)})};return s(t),r},l=function(t){var n=[],r=function(t,n){return e.size(t)==0?n:t+"."+n},i=function(t,s){var o,u;s=s||"",e.each(t,function(t,a){o=r(s,a),u=e.isObject(t)&&!e.isArray(t),u&&t._t!="a"&&i(t,o),n.push(o)})};return i(t),n};return e.mixin({deepClone:n,isBasicObject:r,basicObjects:i,arrays:s,deepExtend:o,sum:u,removeHtml:a,deepkeys:f,diffkeys:l}),e}),!function a(e,t,n){function r(s,o){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=t[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,a,e,t,n)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e){window.Q=e("./q")},{"./q":2}],2:[function(e,t){function n(e){return function(){return G.apply(e,arguments)}}function r(e){return e===Object(e)}function i(e){return"[object StopIteration]"===st(e)||e instanceof $}function s(e,t){if(W&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(ut)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+ut+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];f(i)||u(i)||!i||n.push(i)}return n.join("\n")}function u(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function f(e){var t=a(e);if(!t)return!1;var n=t[0],r=t[1];return n===V&&r>=J&&ht>=r}function l(){if(W)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=a(n);if(!r)return;return V=r[0],r[1]}}function c(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function h(e){return b(e)?e:w(e)?M(e):O(e)}function p(){function e(e){t=e,s.source=e,Z(n,function(t,n){Q(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=nt(p.prototype),s=nt(m.prototype);if(s.promiseDispatch=function(e,i,s){var o=Y(arguments);n?(n.push(o),"when"===i&&s[1]&&r.push(s[1])):Q(function(){t.promiseDispatch.apply(t,o)})},s.valueOf=c(function(){if(n)return s;var e=y(t);return b(e)&&(t=e),e},"valueOf","inspect"),s.inspect=function(){return t?t.inspect():{state:"pending"}},h.longStackSupport&&W)try{throw new Error}catch(o){s.stack=o.stack.substring(o.stack.indexOf("\n")+1)}return i.promise=s,i.resolve=function(n){t||e(h(n))},i.fulfill=function(n){t||e(O(n))},i.reject=function(n){t||e(A(n))},i.notify=function(e){t||Z(r,function(t,n){Q(function(){n(e)})},void 0)},i}function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=p();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function v(e){return d(function(t,n){for(var r=0,i=e.length;i>r;r++)h(e[r]).then(t,n)})}function m(e,t,n){void 0===t&&(t=function(e){return A(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=nt(m.prototype);if(r.promiseDispatch=function(n,i,s){var o;try{o=e[i]?e[i].apply(r,s):t.call(r,i,s)}catch(u){o=A(u)}n&&n(o)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=c(function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value})}return r}function g(e,t,n,r){return h(e).then(t,n,r)}function y(e){if(b(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function b(e){return r(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function w(e){return r(e)&&"function"==typeof e.then}function E(e){return b(e)&&"pending"===e.inspect().state}function S(e){return!b(e)||"fulfilled"===e.inspect().state}function x(e){return b(e)&&"rejected"===e.inspect().state}function T(){lt||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",at),lt=!0}function N(){for(var e=0;e<at.length;e++){var t=at[e];t&&"undefined"!=typeof t.stack?console.warn("Unhandled rejection reason:",t.stack):console.warn("Unhandled rejection reason (no stack):",t)}}function C(){at.length=0,ft.length=0,lt=!1,ct||(ct=!0,"undefined"!=typeof process&&process.on&&process.on("exit",N))}function k(e,t){ct&&(ft.push(e),at.push(t),T())}function L(e){if(ct){var t=et(ft,e);-1!==t&&(ft.splice(t,1),at.splice(t,1))}}function A(e){var t=m({when:function(t){return t&&L(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return k(t,e),t}function O(e){return m({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return it(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function M(e){var t=p();return Q(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function _(e){return m({isDef:function(){}},function(t,n){return F(e,t,n)},function(){return h(e).inspect()})}function D(e,t,n){return h(e).spread(t,n)}function P(e){return function(){function t(e,t){var o;if(ot){try{o=n[e](t)}catch(u){return A(u)}return o.done?o.value:g(o.value,r,s)}try{o=n[e](t)}catch(u){return i(u)?u.value:A(u)}return g(o,r,s)}var n=e.apply(this,arguments),r=t.bind(t,"next"),s=t.bind(t,"throw");return r()}}function H(e){h.done(h.async(e)())}function B(e){throw new $(e)}function j(e){return function(){return D([this,I(arguments)],function(t,n){return e.apply(t,n)})}}function F(e,t,n){return h(e).dispatch(t,n)}function I(e){return g(e,function(e){var t=0,n=p();return Z(e,function(r,i,s){var o;b(i)&&"fulfilled"===(o=i.inspect()).state?e[s]=o.value:(++t,g(i,function(r){e[s]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function q(e){return g(e,function(e){return e=tt(e,h),g(I(tt(e,function(e){return g(e,K,K)})),function(){return e})})}function R(e){return g(e,function(e){return I(tt(e,function(t,n){return g(t,function(t){return e[n]={state:"fulfilled",value:t},e[n]},function(t){return e[n]={state:"rejected",reason:t},e[n]})})).thenResolve(e)})}function U(e,t){return h(e).then(void 0,void 0,t)}function z(e,t){return h(e).nodeify(t)}var W=!1;try{throw new Error}catch(X){W=!!X.stack}var V,$,J=l(),K=function(){},Q=function(){function e(){for(;t.next;){t=t.next;var n=t.task;t.task=void 0;var i=t.domain;i&&(t.domain=void 0,i.enter());try{n()}catch(o){if(s)throw i&&i.exit(),setTimeout(e,0),i&&i.enter(),o;setTimeout(function(){throw o},0)}i&&i.exit()}r=!1}var t={task:void 0,next:null},n=t,r=!1,i=void 0,s=!1;if(Q=function(e){n=n.next={task:e,domain:s&&process.domain,next:null},r||(r=!0,i())},"undefined"!=typeof process&&process.nextTick)s=!0,i=function(){process.nextTick(e)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var o=new MessageChannel;o.port1.onmessage=e,i=function(){o.port2.postMessage(0)}}else i=function(){setTimeout(e,0)};return Q}(),G=Function.call,Y=n(Array.prototype.slice),Z=n(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),et=n(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),tt=n(Array.prototype.map||function(e,t){var n=this,r=[];return Z(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),nt=Object.create||function(e){function t(){}return t.prototype=e,new t},rt=n(Object.prototype.hasOwnProperty),it=Object.keys||function(e){var t=[];for(var n in e)rt(e,n)&&t.push(n);return t},st=n(Object.prototype.toString);$="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ot;try{new Function("(function* (){ yield 1; })"),ot=!0}catch(X){ot=!1}var ut="From previous event:";h.resolve=h,h.nextTick=Q,h.longStackSupport=!1,h.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(n)}},h.promise=d,h.passByCopy=function(e){return e},m.prototype.passByCopy=function(){return this},h.join=function(e,t){return h(e).join(t)},m.prototype.join=function(e){return h([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},h.race=v,m.prototype.race=function(){return this.then(h.race)},h.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return A(n)}}function i(e){if("function"==typeof t){s(e,u);try{return t(e)}catch(n){return A(n)}}return A(e)}function o(e){return"function"==typeof n?n(e):e}var u=this,a=p(),f=!1;return Q(function(){u.promiseDispatch(function(e){f||(f=!0,a.resolve(r(e)))},"when",[function(e){f||(f=!0,a.resolve(i(e)))}])}),u.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=o(e)}catch(r){if(n=!0,!h.onerror)throw r;h.onerror(r)}n||a.notify(t)}]),a.promise},h.when=g,m.prototype.thenResolve=function(e){return this.then(function(){return e})},h.thenResolve=function(e,t){return h(e).thenResolve(t)},m.prototype.thenReject=function(e){return this.then(function(){throw e})},h.thenReject=function(e,t){return h(e).thenReject(t)},h.nearer=y,h.isPromise=b,h.isPromiseAlike=w,h.isPending=E,m.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=S,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=x,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var at=[],ft=[],lt=!1,ct=!0;h.resetUnhandledRejections=C,h.getUnhandledReasons=function(){return at.slice()},h.stopUnhandledRejectionTracking=function(){C(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",N),ct=!1},C(),h.reject=A,h.fulfill=O,h.master=_,h.spread=D,m.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},h.async=P,h.spawn=H,h["return"]=B,h.promised=j,h.dispatch=F,m.prototype.dispatch=function(e,t){var n=this,r=p();return Q(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},h.get=function(e,t){return h(e).dispatch("get",[t])},m.prototype.get=function(e){return this.dispatch("get",[e])},h.set=function(e,t,n){return h(e).dispatch("set",[t,n])},m.prototype.set=function(e,t){return this.dispatch("set",[e,t])},h.del=h["delete"]=function(e,t){return h(e).dispatch("delete",[t])},m.prototype.del=m.prototype["delete"]=function(e){return this.dispatch("delete",[e])},h.mapply=h.post=function(e,t,n){return h(e).dispatch("post",[t,n])},m.prototype.mapply=m.prototype.post=function(e,t){return this.dispatch("post",[e,t])},h.send=h.mcall=h.invoke=function(e,t){return h(e).dispatch("post",[t,Y(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},h.fapply=function(e,t){return h(e).dispatch("apply",[void 0,t])},m.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},h["try"]=h.fcall=function(e){return h(e).dispatch("apply",[void 0,Y(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},h.fbind=function(e){var t=h(e),n=Y(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(Y(arguments))])}},m.prototype.fbind=function(){var e=this,t=Y(arguments);return function(){return e.dispatch("apply",[this,t.concat(Y(arguments))])}},h.keys=function(e){return h(e).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},h.all=I,m.prototype.all=function(){return I(this)},h.allResolved=c(q,"allResolved","allSettled"),m.prototype.allResolved=function(){return q(this)},h.allSettled=R,m.prototype.allSettled=function(){return R(this)},h.fail=h["catch"]=function(e,t){return h(e).then(void 0,t)},m.prototype.fail=m.prototype["catch"]=function(e){return this.then(void 0,e)},h.progress=U,m.prototype.progress=function(e){return this.then(void 0,void 0,e)},h.fin=h["finally"]=function(e,t){return h(e)["finally"](t)},m.prototype.fin=m.prototype["finally"]=function(e){return e=h(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},h.done=function(e,t,n,r){return h(e).done(t,n,r)},m.prototype.done=function(e,t,n){var r=function(e){Q(function(){if(s(e,i),!h.onerror)throw e;h.onerror(e)})},i=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},h.timeout=function(e,t,n){return h(e).timeout(t,n)},m.prototype.timeout=function(e,t){var n=p(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},h.delay=function(e,t){return void 0===t&&(t=e,e=void 0),h(e).delay(t)},m.prototype.delay=function(e){return this.then(function(t){var n=p();return setTimeout(function(){n.resolve(t)},e),n.promise})},h.nfapply=function(e,t){return h(e).nfapply(t)},m.prototype.nfapply=function(e){var t=p(),n=Y(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},h.nfcall=function(e){var t=Y(arguments,1);return h(e).nfapply(t)},m.prototype.nfcall=function(){var e=Y(arguments),t=p();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},h.nfbind=h.denodeify=function(e){var t=Y(arguments,1);return function(){var n=t.concat(Y(arguments)),r=p();return n.push(r.makeNodeResolver()),h(e).fapply(n).fail(r.reject),r.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),h.denodeify.apply(void 0,e)},h.nbind=function(e,t){var n=Y(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(Y(arguments)),s=p();return i.push(s.makeNodeResolver()),h(r).fapply(i).fail(s.reject),s.promise}},m.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),h.nbind.apply(void 0,e)},h.nmapply=h.npost=function(e,t,n){return h(e).npost(t,n)},m.prototype.nmapply=m.prototype.npost=function(e,t){var n=Y(t||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},h.nsend=h.nmcall=h.ninvoke=function(e,t){var n=Y(arguments,2),r=p();return n.push(r.makeNodeResolver()),h(e).dispatch("post",[t,n]).fail(r.reject),r.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(e){var t=Y(arguments,1),n=p();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},h.nodeify=z,m.prototype.nodeify=function(e){return e?(this.then(function(t){Q(function(){e(null,t)})},function(t){Q(function(){e(t)})}),void 0):this},t.exports=h;var ht=l()},{}]},{},[1]),define("q",function(e){return function(){var t,n;return t||e.Q}}(this)),define("hr/promise",["q"],function(e){return e}),define("hr/configs",["hr/utils"],function(e){var t={revision:0,args:{},version:"0.5.3",logLevel:"log",logLevels:{},baseUrl:"/",staticDirectory:"static",resources:{loader:"http"},defaultLocale:"en",extend:function(){var n=Array.prototype.slice.call(arguments,0);n.splice(0,0,t),e.deepExtend.apply(e,n)}};return t}),define("hr/class",["hr/utils"],function(e){var t=/\s+/,n=function(t){this.options=e.extend({},t||{}),e.defaults(this.options,this.defaults),this.cid=e.uniqueId("class"),this.initialize.apply(this,arguments)};n.extend=function(t,n){var r=this,i;t&&e.has(t,"constructor")?i=t.constructor:i=function(){return r.apply(this,arguments)},e.extend(i,r,n);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,t&&e.extend(i.prototype,t),i.__super__=r.prototype,i},n=n.extend({defaults:{},initialize:function(){return this},on:function(e,t,n){return!this.multipleEvents("on",e,[t,n])||!t?this:(this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push({callback:t,context:n,ctx:n||this}),this)},once:function(t,n,r){if(!this.multipleEvents("once",t,[n,r])||!n)return this;var i=this,s=e.once(function(){i.off(t,s),n.apply(this,arguments)});return s._callback=n,this.on(t,s,r)},off:function(t,n,r){if(!this._events||!this.multipleEvents("off",t,[n,r]))return this;if(!t&&!n&&!r)return this._events=void 0,this;var i=t?[t]:e.keys(this._events);for(var s=0,o=i.length;s<o;s++){t=i[s];var u=this._events[t];if(!u)continue;if(!n&&!r){delete this._events[t];continue}var a=[];for(var f=0,l=u.length;f<l;f++){var c=u[f];(n&&n!==c.callback&&n!==c.callback._callback||r&&r!==c.context)&&a.push(c)}a.length?this._events[t]=a:delete this._events[t]}return this},stopListening:function(t,n,r){var i=this._listeningTo;if(!i)return this;var s=!n&&!r;!r&&typeof n=="object"&&(r=this),t&&((i={})[t.cid]=t);for(var o in i)t=i[o],t.off(n,r,this),(s||e.isEmpty(t._events))&&delete this._listeningTo[o];return this},triggerOnly:function(e){if(!this._events)return this;var t=Array.prototype.slice.call(arguments,1),n=this._events[e],r=this._events.all;return n&&this.triggerEvents(n,t),r&&this.triggerEvents(r,arguments),this},trigger:function(e){var t=Array.prototype.slice.call(arguments,0);if(!this.multipleEvents("trigger",e,t))return this;var n=0;do n=e.indexOf(":",n+1),t[0]=e.slice(0,n===-1?undefined:n),this.triggerOnly.apply(this,t);while(n!==-1);return this},triggerEvents:function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},multipleEvents:function(e,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)this[e].apply(this,[i,n[i]].concat(r));return!1}if(t.test(n)){var s=n.split(t);for(var o=0,u=s.length;o<u;o++)this[e].apply(this,[s[o]].concat(r));return!1}return!0}});var r={listenTo:"on",listenToOnce:"once"};return e.each(r,function(e,t){n.prototype[t]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={}),s=t.cid;return i[s]=t,!r&&typeof n=="object"&&(r=this),t[e](n,r,this),this}}),n.prototype.bind=n.prototype.on,n.prototype.unbind=n.prototype.off,n}),define("hr/logger",["hr/configs","hr/class"],function(e,t){var n=t.extend({initialize:function(){return this.handler=this.options.handler||console,this.namespace=this.options.namespace||"base",_.isFunction(this.handler)&&(this.handler={},_.each(n.levels,function(e,t){this.handler[t]=this.options.handler},this)),_.each(n.levels,function(e,t){this.addMethod(t)},this),this},printLog:function(t){var n=Array.prototype.slice.call(arguments,1),r=e.logLevels[this.namespace]||e.logLevel;if(this.logLevel(t)<this.logLevel(r))return this;n.splice(0,0,"["+this.namespace+"] ["+t+"]");var i=Function.prototype.bind.call(this.handler[t],this.handler);i.apply(this.handler[t],n)},addMethod:function(e){var t=e;return this[e]=_.bind(function(){var t=Array.prototype.slice.call(arguments,0);return t.splice(0,0,e),this.printLog.apply(this,t)},this),this[e]},logLevel:function(e){return n.levels[e]||0},exception:function(e,t){this.error(t,e.stack),this.error(e)}},{namespaces:{},logging:null,levels:{log:0,debug:1,warn:2,error:3,none:4},addNamespace:function(e,t){return n.namespaces[e]==null&&(n.namespaces[e]=new n({namespace:e,handler:t})),n.namespaces[e]}});return n.logging=n.addNamespace("base"),n}),define("hr/queue",["hr/utils","hr/promise","hr/class"],function(e,t,n){var r=n.extend({initialize:function(){return this.tasks=[],this.empty=!0,this.defaultTask=this.options.task,this.defaultContext=this.options.context,this},defer:function(t,n,r){e.isFunction(t)||(r=t,t=null,n=null),e.isArray(r)||(r=[r]);var i=Q.defer();return this.tasks.push({task:t,args:r||[],context:n,result:i}),this.empty==1&&this.startNext(),i.promise},startTask:function(t){var n=t.task||this.defaultTask;Q(n.apply(t.context||this.defaultContext,t.args)).then(function(){t.result.resolve.apply(t.result,arguments)},function(){t.result.reject.apply(t.result,arguments)}).fin(e.bind(this.startNext,this))},startNext:function(){if(e.size(this.tasks)>0){this.empty=!1;var t=this.tasks.shift();this.startTask(t),this.trigger("tasks:next")}else this.empty=!0,this.trigger("tasks:finish")},size:function(){return e.size(this.tasks)},isComplete:function(){return this.empty==1}});return r}),define("hr/urls",["hr/utils","hr/configs"],function(e,t){var n={join:function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(e.join("/"))},normalize:function(e){return e.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")},base:function(){var e=Array.prototype.slice.call(arguments,0);return e.splice(0,0,t.baseUrl),n.join.apply(n,e)},"static":function(){var e=Array.prototype.slice.call(arguments,0);return e.splice(0,0,t.staticDirectory),n.base.apply(n,e)},route:function(t,n,r){r=r||"",n=n||{};var i=t;return i=i.replace("#!/","#").replace("#!","#").replace("#",""),e.map(n,function(e,t){i=i.replace(":"+t,e)}),r+"#/"+i},extendRules:function(t){e.extend(n,t)},redirect:function(t,r){r==null&&(r="base"),e.isString(r)&&(r=n[r]),t=r(t),window.location.href=t}};return n}),define("hr/storage",["hr/utils","hr/configs","hr/logger"],function(e,t,n){var r=n.addNamespace("storage"),i={storage:function(){return typeof window.localStorage=="undefined"?null:localStorage},usedSpace:function(){var e=100,t=i.storage();return t.length},has:function(t){var n=i.storage();return n==null?!1:e.isUndefined(n[t])==0},get:function(t){var n=i.storage();if(n==null)return null;if(e.isUndefined(n[t])!=0)return null;try{return JSON.parse(n[t])}catch(s){return r.error("Error parsing ",n[t],s),n[t]}},set:function(e,t){var n=i.storage();return n==null?null:(n[e]=JSON.stringify(t),i.get(e))},remove:function(e){var t=i.storage();return t==null?!1:(t.removeItem(e),!0)},clear:function(){var e=i.storage();return e==null?!1:(e.clear(),!0)}};return i}),define("hr/cache",["hr/utils","hr/configs","hr/logger","hr/storage"],function(e,t,n,r){var i=n.addNamespace("cache"),s=["get","set","remove"],o={init:function(){var e=r.storage();if(e==null)return!1;Object.keys(e).forEach(function(n){n.indexOf("cache_")==0&&n.indexOf("cache_"+t.revision)&&e.removeItem(n)})},key:function(e,n){return n=JSON.stringify(n),"cache_"+t.revision+"_"+e+"_"+n},get:function(e,t){var n=o.key(e,t),i=(new Date).getTime(),s=r.get(n);return s==null?null:s.expiration==-1||s.expiration>i?s.value:(r.remove(n),null)},remove:function(e,t){var n=o.key(e,t),i=(new Date).getTime();r.remove(n)},set:function(e,t,n,i){var s=o.key(e,t),u=(new Date).getTime();return i>0?i=u+i*1e3:i=-1,r.set(s,{expiration:i,value:n}),o.get(t)},clear:function(){var e=r.storage();if(e==null)return!1;Object.keys(e).forEach(function(t){/^(cache_)/.test(t)&&e.removeItem(t)})},namespace:function(t){var n={};return e.each(s,function(r){n[r]=e.partial(o[r],t)}),n}};return o}),define("hr/requests",["hr/promise","hr/configs","hr/class","hr/logger"],function(e,t,n,r){var i=r.addNamespace("requests"),s=n.extend({defaults:{url:null,method:"GET",params:{},dataType:"text",options:{}},execute:function(){return this.xhr=$.ajax(_.extend({},{type:this.options.method,url:this.options.url,data:this.options.params,dataType:this.options.dataType,context:this,success:function(e){i.debug("Result for request ",this.options),this.trigger("done",e)},error:function(e,t,n){i.error("Error for request ",this.options),this.trigger("error",{status:t,error:n,content:e.responseText,xhr:e})}},this.options.options)),this}},{_execute:function(t,n,r){var i=e.defer();n=n||{},n=_.extend(n,r,{url:t});var o=new s(n);return o.on("done",function(e){i.resolve(e)}),o.on("error",function(e){var t=new Error(e.textStatus+": "+e.content);t.textStatus=e.textStatus,t.httpRes=e.content,i.reject(t)}),o.execute(),i.promise},get:function(e,t,n){return s._execute(e,n,{method:"GET",params:t})},getJSON:function(e,t,n){return s._execute(e,n,{method:"GET",params:t,dataType:"json"})},post:function(e,t,n){return s._execute(e,n,{method:"POST",params:t})},put:function(e,t,n){return s._execute(e,n,{method:"PUT",params:t})},"delete":function(e,t,n){return s._execute(e,n,{method:"DELETE",params:t})},head:function(e,t,n){return s._execute(e,n,{method:"HEAD",params:t})}});return s}),define("hr/resources",["hr/utils","hr/promise","hr/configs","hr/logger","hr/cache","hr/requests","hr/urls"],function(e,t,n,r,i,s,o){var u=r.addNamespace("resources"),a=i.namespace("resources"),f={loaders:{},namespaces:{},load:function(t,n,r,i){var s=Q.defer(),o=e.extend({},f.namespaces[t]||{},i||{}),a=o.loader||t;return f.loaders[a]==null?(u.error("Loader doesn't exists ",a,"namespace=",t),s.reject(),s.promise):(f.loaders[a](n,s,r,o),s.promise)},addLoader:function(e,t){f.loaders[e]=t},addNamespace:function(t,r){r=r||{},r=e.defaults(r,{loader:n.resources.loader}),r=e.extend(r,{namespace:t}),f.namespaces[t]=r}};return f.addLoader("text",function(e,t,n,r){t.resolve(e)}),f.addLoader("require",function(t,n,r,i){e.defaults(i,{mode:"text",base:"",extension:""}),t=i.mode+"!"+o.join(i.base,t)+i.extension,u.debug("Load using require ",t);try{var s=require(t);n.resolve(s)}catch(a){u.exception(a,"Error loading using require:"),n.reject(null)}}),f.addLoader("http",function(t,n,r,i){e.defaults(i,{base:"./",extension:""});var f=o.static(i.base,t)+i.extension,l=a.get(f);if(l!=null){n.resolve(l);return}u.debug("Load ressource using http ",t),s.get(f).then(function(e){a.set(f,e),n.resolve(e)},function(){u.error("Error loading using http : ",t),n.reject(null)})}),f}),define("hr/i18n",["hr/dom","hr/utils","hr/promise","hr/configs","hr/urls","hr/logger","hr/resources"],function($,_,Q,configs,Urls,Logger,Resources){var logging=Logger.addNamespace("i18n"),i18n={};return i18n.defaultLocale="en",i18n.defaultSeparator=".",i18n.locale=null,i18n.locales=[],i18n.interpolate=function(e,t){t=t||{};var n=_.template(e);return _.extend(t,{_:_,hr:{configs:configs,urls:Urls}}),n(t)},i18n.currentLocale=function(){return i18n.locale||i18n.defaultLocale},i18n.setCurrentLocale=function(e){i18n.locale=e},i18n.loadLocale=function(lng,options){return options=_.defaults({},options||{},{loader:"i18n"}),_.isArray(lng)||(lng=[lng]),Q.all(_.map(lng,function(lang){return Resources.load(options.loader,lang).then(function(content){_.isString(content)&&(content=eval("("+content+")")),i18n.translations[lang]=content,i18n.locales.push(lang),i18n.locales=_.uniq(i18n.locales)},function(){logging.error("Error loading locale "+lng)})}))},i18n.missingTranslation=function(){var e='[missing "'+this.currentLocale(),t=arguments.length;for(var n=0;n<t;n++)e+="."+arguments[n];return e+='" translation]',e},i18n.lookup=function(e,t){var t=t||{},n=e,r=i18n.translations,i=t.locale||i18n.currentLocale(),s=r[i]||{},o;typeof e=="object"&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);while(s&&e.length>0)o=e.shift(),s=s[o];return s},i18n.translate=function(e,t){var n=this.lookup(e,t);try{return this.interpolate(n,t)}catch(r){return logging.error(r),this.missingTranslation(e)}},i18n.translations={},i18n.t=i18n.translate,i18n.defaultLocale=configs.defaultLocale,i18n.locale=configs.defaultLocale,i18n}),define("hr/offline",["hr/dom","hr/logger","hr/class"],function(e,t,n){var r=t.addNamespace("offline"),i=n.extend({initialize:function(){var t=this;i.__super__.initialize.apply(this,arguments),this.state=!0,this.available=typeof window.applicationCache!="undefined",e(window).bind("online offline",function(){t.check()}),this.available&&window.applicationCache.addEventListener("updateready",function(){t.trigger("update")})},checkUpdate:function(){if(!this.available)return;return window.applicationCache.status===window.applicationCache.UPDATEREADY&&this.trigger("update"),window.applicationCache.status===window.applicationCache.UPDATEREADY},setState:function(e){if(e==this.state)return;this.state=e,r.log("state ",this.state),this.trigger("state",this.state)},check:function(){var e=navigator.onLine;return this.setState(e),Q(e)},isConnected:function(){return this.state}});return new i}),define("hr/template",["hr/utils","hr/promise","hr/configs","hr/class","hr/logger","hr/urls","hr/resources","hr/i18n","hr/offline"],function(e,t,n,r,i,s,o,u,a){var f=i.addNamespace("templates"),l=r.extend({defaults:{template:null,loader:"templates",args:{}},initialize:function(){var t=this;return this.template=this.options.template,this.args=this.options.args||{},this.view=this.options.view||null,e.extend(this.args,{_:e,hr:{configs:n,urls:s,i18n:u,offline:a},view:{component:function(e,n,r,i){r=r||e;if(!t.view)throw new Error("Error in template "+t.template+" : try to import component in a non view-related template ");if(l.components[e]==null)throw new Error("Error in template "+t.template+" : try to import component "+e);var s=new l.components[e].Class(n||{},t.view);t.view.addComponent(r,s);var o=$("<component/>",{"data-component":s.cid});return o[0].outerHTML}},template:{args:this.args,name:this.template,"import":function(e,t,n){return n=n||e,this.args.view.component("template",{template:e,args:t},n)},htmlid:function(t){return e.escape(t)}}},l.options),this},setContent:function(n){return this.content=n,this.content!=null&&(this.generate=t.fbind(e.template(this.content))),this},load:function(e){var t=this;return this.template=e||this.template,o.load(this.options.loader,this.template).then(function(e){t.setContent(e),t.trigger("loaded")},function(){t.setContent(null),t.trigger("error")}),this},render:function(e){var n=this,r=t.defer();return this.view!=null&&(e=e||this.view.$el),this.on("loaded",function(){if(this.content==null)return;this.view!=null&&this.view.clearComponents(),this.generate(this.args).then(function(t){e.html(t),n.view!=null&&n.view.renderComponents(),n.trigger("updated"),r.resolve(e)},function(e){f.exception(e,"Error with template:"),r.reject(e)})},this),this.load(),r.promise}},{options:{},components:{},registerComponent:function(e,t){l.components[e]={id:e,Class:t}},extendContext:function(t){l.options=e.extend(l.options||{},t)}});return l}),define("hr/view",["hr/dom","hr/utils","hr/promise","hr/class","hr/logger","hr/queue","hr/template"],function(e,t,n,r,i,s,o){var u=i.addNamespace("templates"),a=/^(\S+)\s*(.*)$/,f=r.extend({tagName:"div",template:null,templateLoader:"templates",initialize:function(e,t){return f.__super__.initialize.call(this,e),this._ensureElement(),this.delegateEvents(),this.renderQueue=new s,this.components={},this.parent=t||this,this.model=this.options.model||null,this.is_ready=!1,this.countComponents=0,this},remove:function(){return this.undelegateEvents(),this.$el.remove(),this.stopListening(),this.off(),this},detach:function(){return this.trigger("detach"),this.$el.detach(),this},appendTo:function(t){return t instanceof e||(t=t.$el),this.$el.appendTo(t),this},$:function(e){return this.$el.find(e)},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e?t:e(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},_ensureElement:function(){if(!this.el){var n=t.extend({},t.result(this,"attributes"));this.id&&(n.id=t.result(this,"id")),this.className&&(n["class"]=t.result(this,"className"));var r=e("<"+t.result(this,"tagName")+">").attr(n);this.setElement(r,!1)}else this.setElement(t.result(this,"el"),!1)},delegateEvents:function(e){if(!e&&!(e=t.result(this,"events")))return this;this.undelegateEvents();for(var n in e){var r=e[n];t.isFunction(r)||(r=this[e[n]]);if(!r)continue;var i=n.match(a),s=i[1],o=i[2];r=t.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},finish:function(){return this.trigger("render"),this},ready:function(){return this.delegateEvents(),this.finish(),this.is_ready||(this.trigger("ready"),this.is_ready=!0),this},empty:function(){return this.eachComponent(function(e){e.remove()},this),this.$el.empty(),this},defer:function(e){var n=Q.defer();return t.isFunction(e)&&n.promise.done(e),this.on("ready",function(){n.resolve(this)},this),this.is_ready&&n.resolve(this),n.promise},render:function(){var e=t.result(this,"template");if(e)return this.renderTemplate(e)},update:function(){return this.renderQueue.defer(this.render,this)},templateContext:function(){return this.options},addComponent:function(e,n){return n.parent=this,this.components[e]!=null?(t.isArray(this.components[e])||(this.components[e]=[this.components[e]]),this.components[e].push(n)):this.components[e]=n,this.countComponents=this.countComponents+1,this},clearComponents:function(){return this.eachComponent(function(e){e.remove()}),this.countComponents=0,this.components={},this.trigger("components:clear"),this},renderComponents:function(){var e=0,n=t.bind(function(){e+=1,e>=this.countComponents&&this.ready()},this);if(t.size(this.components)==0)return this.ready(),this;var r=t.bind(Q.fbind(function(e){return this.$("component[data-component='"+e.cid+"']").replaceWith(e.$el),e.defer(t.once(n)),Q.try(function(){e.update()}).fail(function(e){u.exception(e,"Error rendering component:")})}),this);return t.each(this.components,function(e,n){t.isArray(e)?t.each(e,r):r(e)}),this.trigger("components:render"),this},eachComponent:function(e,n){return n!=null&&(e=t.bind(e,n)),t.each(this.components,function(n,r){t.isArray(n)?t.each(n,e):e(n)}),this},renderTemplate:function(e,n,r){e=e||this.template,n=n||t.result(this,"templateContext"),r=r||t.result(this,"templateLoader");var i=new o({template:e,args:n,loader:r,view:this});return i.render()}},{Template:o});return f.Template.registerComponent("template",f.extend({template:function(){return this.options.template},templateContext:function(){return this.options.args}})),f}),define("hr/head",["hr/dom","hr/utils","hr/view"],function(e,t,n){var r=n.extend({el:e("head"),initialize:function(){return r.__super__.initialize.apply(this,arguments),this._title="",this._preTitle="",this.app=this.options.app,this},completeTitle:function(e){return this._preTitle.length>0&&(e=this._preTitle+" "+e),t.size(e)==0?this.app.name:e+" - "+this.app.name},meta:function(n,r,i){if(t.isObject(n)){t.each(n,function(e,t){this.meta(t,e)},this);return}i==null&&(i="name");var s=this.$("meta["+i+'="'+n+'"]');return s.length===0&&(s=e("<meta>",{}).attr(i,n).appendTo("head")),r!=null?(s.attr("content",r),this):s.attr("content")},link:function(n,r,i){if(t.isObject(n)){t.each(n,function(e,t){this.link(t,e)},this);return}var s=this.$('link[rel="'+n+'"]');s.length===0&&(s=e("<link>",{}).attr("rel",n).appendTo(this.$el)),i!=null&&s.attr("type",i);if(r==null)return s.attr("href");s.attr("href",r)},title:function(t,n){var r=this.$("title");r.length===0&&(r=e("<title>",{}).appendTo(this.$el));if(t==null)return r.attr("content");this._title=t,n!==!1&&(t=this.completeTitle(t)),r.text(t)},preTitle:function(e){if(e==null)return this._preTitle;this._preTitle=e,this.title(this._title)},description:function(e){return this.meta("description",e)},setCrawling:function(e,n){t.isNull(n)&&(n=e);var r="";return r=e?"index":"noindex",r=r+","+(n?"follow":"nofollow"),this.meta("robots",r),this},render:function(){return this}});return r}),define("hr/history",["hr/dom","hr/utils","hr/configs","hr/class","hr/logger","hr/urls"],function(e,t,n,r,i,s){var o=i.addNamespace("history"),u=new(r.extend({initialize:function(){return this.handlers=[],this.started=!1,this},route:function(e,t){return this.handlers.unshift({route:e,callback:t}),this},start:function(){if(this.started)return o.warn("routing history already started"),!1;var n=this,r=e(window),i=document.location.protocol+"//"+(document.location.hostname||document.location.host);return o.log("start routing history"),r.bind("hashchange",t.bind(this._handleCurrentState,this)),this._handleCurrentState(),this.started=!0,!0},navigate:function(e,t){url=s.route(e,t),o.log("navigate to ",url),window.location.hash=url},_handleState:function(e){if(e==null)return this;e.length>0&&e[0]=="/"&&(e=e.replace("/",""));var n=t.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0});return o.log("handle state ",e,n!=null),this},_handleCurrentState:function(){var e=window.location.hash.replace("#","");return this._handleState(e)}}));return u}),define("hr/router",["hr/dom","hr/utils","hr/class","hr/history","hr/logger"],function(e,t,n,r,i){var s=i.addNamespace("routing"),o=/:\w+/g,u=/\*\w+/g,a=/[-[\]{}()+?.,\\^$|#\s]/g,f=n.extend({routes:{},initialize:function(){return this.route(t.result(this,"routes")),this},route:function(e,n,i){return t.isObject(e)&&t.isRegExp(e)==0?(t.each(e,function(e,t){this.route(t,e,e)},this),this):(t.isRegExp(e)||(e=f.routeToRegExp(e)),s.log("add route ",n,e),r.route(e,t.bind(function(t){var r=f.extractParameters(e,t);s.log("route callback ",t,n,r),i&&i.apply(this,r),this.trigger.apply(this,["route:"+n].concat(r))},this)),this)},start:function(){return s.log("start routing"),r.start(),this},navigate:function(){return r.navigate.apply(r,arguments),this}},{routeToRegExp:function(e){return e=e.replace(a,"\\$&").replace(o,"([^/]+)").replace(u,"(.*?)"),new RegExp("^"+e+"$")},extractParameters:function(e,t){return e.exec(t).slice(1)}});return f}),define("hr/application",["hr/dom","hr/utils","hr/view","hr/head","hr/router","hr/logger"],function(e,t,n,r,i,s){var o=s.addNamespace("application"),u=n.extend({el:e("body"),Head:r,name:null,metas:{},links:{},Router:i,routes:{},initialize:function(){return u.__super__.initialize.apply(this,arguments),this.head=new this.Head({app:this}),this.head.meta(this.metas),this.head.link(this.links),this.title(""),this.route(t.result(this,"routes")),this.on("ready",t.once(function(){o.log("Application is ready"),this.router&&this.router.start()}),this),this},run:function(){o.log("Run application",this.name);var e=require("hr/hr");return e.Cache.init(),e.app=this,this.update(),this},title:function(){return this.head.title.apply(this.head,arguments)},route:function(e,n){var r;return t.isObject(e)&&!t.isRegExp(e)?(t.each(e,function(e,t){this.route(t,e)},this),this):(r=this[n],r==null&&(r=function(){var e=t.values(arguments);e.unshift("route:"+n),this.trigger.apply(this,e)}),this.router||(this.router=new this.Router),this.router.route(e,n,t.bind(r,this)),this)}});return u}),function(){var e={};typeof t!="undefined"&&(e=t);var t=e;e.version="0.0.11",e.config={textDiffMinLength:60,detectArrayMove:!0,includeValueOnArrayMove:!1};var n=typeof Array.prototype.indexOf=="function"?function(e,t){return e.indexOf(t)}:function(e,t){var n=e.length;for(var r=0;r<n;r++)if(e[r]===t)return r;return-1},r={diff:function(t,r,i,s){var o=0,u=0,a,f,l=t.length,c=r.length,h,p=[],d=[],v=typeof i=="function"?function(e,t,n,r){if(e===t)return!0;if(typeof e!="object"||typeof t!="object")return!1;var s,o;return typeof n=="number"?(s=p[n],typeof s=="undefined"&&(p[n]=s=i(e))):s=i(e),typeof r=="number"?(o=d[r],typeof o=="undefined"&&(d[r]=o=i(t))):o=i(t),s===o}:function(e,t){return e===t},m=function(e,n){return v(t[e],r[n],e,n)},g=function(e,n){if(!s)return;if(typeof t[e]!="object"||typeof r[n]!="object")return;var i=s(t[e],r[n]);if(typeof i=="undefined")return;h||(h={_t:"a"}),h[n]=i};while(o<l&&o<c&&m(o,o))g(o,o),o++;while(u+o<l&&u+o<c&&m(l-1-u,c-1-u))g(l-1-u,c-1-u),u++;if(o+u===l){if(l===c)return h;h=h||{_t:"a"};for(a=o;a<c-u;a++)h[a]=[r[a]];return h}if(o+u===c){h=h||{_t:"a"};for(a=o;a<l-u;a++)h["_"+a]=[t[a],0,0];return h}var y=this.lcs(t.slice(o,l-u),r.slice(o,c-u),{areTheSameByIndex:function(e,t){return m(e+o,t+o)}});h=h||{_t:"a"};var b=[];for(a=o;a<l-u;a++)n(y.indices1,a-o)<0&&(h["_"+a]=[t[a],0,0],b.push(a));var w=b.length;for(a=o;a<c-u;a++){var E=n(y.indices2,a-o);if(E<0){var S=!1;if(e.config.detectArrayMove&&w>0)for(f=0;f<w;f++)if(m(b[f],a)){h["_"+b[f]].splice(1,2,a,3),e.config.includeValueOnArrayMove||(h["_"+b[f]][0]=""),g(b[f],a),b.splice(f,1),S=!0;break}S||(h[a]=[r[a]])}else g(y.indices1[E]+o,y.indices2[E]+o)}return h},getArrayIndexBefore:function(e,t){var n,r=t;for(var i in e)if(e.hasOwnProperty(i)&&s(e[i])){i.slice(0,1)==="_"?n=parseInt(i.slice(1),10):n=parseInt(i,10);if(e[i].length===1){if(n<t)r--;else if(n===t)return-1}else if(e[i].length===3)if(e[i][2]===0)n<=t&&r++;else if(e[i][2]===3){n<=t&&r++;if(e[i][1]>t)r--;else if(e[i][1]===t)return n}}return r},patch:function(e,t,n,r){var i,s,o=function(e,t){return e-t},u=function(e){return function(t,n){return t[e]-n[e]}},a=[],f=[],l=[];for(i in t)if(i!=="_t")if(i[0]=="_"){if(t[i][2]!==0&&t[i][2]!==3)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+t[i][2]);a.push(parseInt(i.slice(1),10))}else t[i].length===1?f.push({index:parseInt(i,10),value:t[i][0]}):l.push({index:parseInt(i,10),diff:t[i]});a=a.sort(o);for(i=a.length-1;i>=0;i--){s=a[i];var c=t["_"+s],h=e.splice(s,1)[0];c[2]===3&&f.push({index:c[1],value:h})}f=f.sort(u("index"));var p=f.length;for(i=0;i<p;i++){var d=f[i];e.splice(d.index,0,d.value)}var v=l.length;if(v>0){if(typeof n!="function")throw new Error("to patch items in the array an objectInnerPatch function must be provided");for(i=0;i<v;i++){var m=l[i];n(e,m.index.toString(),m.diff,r)}}return e},lcs:function(e,t,n){n.areTheSameByIndex=n.areTheSameByIndex||function(n,r){return e[n]===t[r]};var r=this.lengthMatrix(e,t,n),i=this.backtrack(r,e,t,e.length,t.length);return typeof e=="string"&&typeof t=="string"&&(i.sequence=i.sequence.join("")),i},lengthMatrix:function(e,t,n){var r=e.length,i=t.length,s,o,u=[r+1];for(s=0;s<r+1;s++){u[s]=[i+1];for(o=0;o<i+1;o++)u[s][o]=0}u.options=n;for(s=1;s<r+1;s++)for(o=1;o<i+1;o++)n.areTheSameByIndex(s-1,o-1)?u[s][o]=u[s-1][o-1]+1:u[s][o]=Math.max(u[s-1][o],u[s][o-1]);return u},backtrack:function(e,t,n,r,i){if(r===0||i===0)return{sequence:[],indices1:[],indices2:[]};if(e.options.areTheSameByIndex(r-1,i-1)){var s=this.backtrack(e,t,n,r-1,i-1);return s.sequence.push(t[r-1]),s.indices1.push(r-1),s.indices2.push(i-1),s}return e[r][i-1]>e[r-1][i]?this.backtrack(e,t,n,r,i-1):this.backtrack(e,t,n,r-1,i)}};e.sequenceDiffer=r,e.dateReviver=function(e,t){var n;if(typeof t=="string"){n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/.exec(t);if(n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6]))}return t};var i=function(){var t;e.config.diff_match_patch&&(t=new e.config.diff_match_patch.diff_match_patch),typeof diff_match_patch!="undefined"&&(typeof diff_match_patch=="function"?t=new diff_match_patch:typeof diff_match_patch=="object"&&typeof diff_match_patch.diff_match_patch=="function"&&(t=new diff_match_patch.diff_match_patch));if(t)return e.config.textDiff=function(e,n){return t.patch_toText(t.patch_make(e,n))},e.config.textPatch=function(e,n){var r=t.patch_apply(t.patch_fromText(n),e);for(var i=0;i<r[1].length;i++)if(!r[1][i])throw new Error("text patch failed");return r[0]},!0},s=e.isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return typeof e=="object"&&e instanceof Array},o=e.isDate=function(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"},u=function(t,n){return r.diff(t,n,e.config.objectHash,e.diff)},a=function(e,t){var n,r,i,s;s=function(i){r=f(e[i],t[i]),typeof r!="undefined"&&(typeof n=="undefined"&&(n={}),n[i]=r)};for(i in t)t.hasOwnProperty(i)&&s(i);for(i in e)e.hasOwnProperty(i)&&typeof t[i]=="undefined"&&s(i);return n},f=e.diff=function(t,n){var r,f,l,c,h;if(t===n)return;if(t!==t&&n!==n)return;r=typeof n,f=typeof t,l=n===null,c=t===null,f=="object"&&o(t)&&(f="date");if(r=="object"&&o(n)){r="date";if(f=="date"&&t.getTime()===n.getTime())return}if(l||c||r=="undefined"||r!=f||r=="number"||f=="number"||r=="boolean"||f=="boolean"||r=="string"||f=="string"||r=="date"||f=="date"||r==="object"&&s(n)!=s(t)){h=[];if(typeof t!="undefined")if(typeof n!="undefined"){var p=r=="string"&&f=="string"&&Math.min(t.length,n.length)>e.config.textDiffMinLength;p&&!e.config.textDiff&&i(),p&&e.config.textDiff?h.push(e.config.textDiff(t,n),0,2):(h.push(t),h.push(n))}else h.push(t),h.push(0,0);else h.push(n);return h}return s(n)?u(t,n):a(t,n)},l=function(e,t){return s(e)?e[parseInt(t,10)]:e[t]};e.getByKey=l;var c=function(e,t,n){if(s(e)&&e._key){var r=e._key;typeof e._key!="function"&&(r=function(t){return t[e._key]});for(var i=0;i<e.length;i++)if(r(e[i])===t){typeof n=="undefined"?(e.splice(i,1),i--):e[i]=n;return}typeof n!="undefined"&&e.push(n);return}typeof n=="undefined"?s(e)?e.splice(t,1):delete e[t]:e[t]=n},h=function(t){return e.config.textDiffReverse||(e.config.textDiffReverse=function(e){var t,n,r,i,s,o=null,u=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,a,f,l,c=function(){f!==null&&(r[f]="-"+r[f].slice(1)),l!==null&&(r[l]="+"+r[l].slice(1),f!==null&&(s=r[f],r[f]=r[l],r[l]=s)),r[a]="@@ -"+o[3]+","+o[4]+" +"+o[1]+","+o[2]+" @@",o=null,a=null,f=null,l=null};r=e.split("\n");for(t=0,n=r.length;t<n;t++){i=r[t];var h=i.slice(0,1);h==="@"?(o!==null,o=u.exec(i),a=t,f=null,l=null,r[a]="@@ -"+o[3]+","+o[4]+" +"+o[1]+","+o[2]+" @@"):h=="+"?(f=t,r[t]="-"+r[t].slice(1)):h=="-"&&(l=t,r[t]="+"+r[t].slice(1))}return o!==null,r.join("\n")}),e.config.textDiffReverse(t)},p=e.reverse=function(e){var t,n;if(typeof e=="undefined")return;if(e===null)return null;if(typeof e=="object"&&!o(e)){if(s(e)){if(e.length<3)return e.length===1?[e[0],0,0]:[e[1],e[0]];if(e[2]===0)return[e[0]];if(e[2]===2)return[h(e[0]),0,2];throw new Error("invalid diff type")}n={};if(e._t==="a"){for(t in e)if(e.hasOwnProperty(t)&&t!=="_t"){var i,u=t;t.slice(0,1)==="_"?i=parseInt(t.slice(1),10):i=parseInt(t,10);if(s(e[t]))if(e[t].length===1)u="_"+i;else if(e[t].length===2)u=r.getArrayIndexBefore(e,i);else if(e[t][2]===0)u=i.toString();else{if(e[t][2]===3){u="_"+e[t][1],n[u]=[e[t][0],i,3];continue}u=r.getArrayIndexBefore(e,i)}else u=r.getArrayIndexBefore(e,i);n[u]=p(e[t])}n._t="a"}else for(t in e)e.hasOwnProperty(t)&&(n[t]=p(e[t]));return n}return typeof e=="string"&&e.slice(0,2)==="@@"?h(e):e},d=e.patch=function(n,o,u,a){var f,h,p="",v;typeof o!="string"?(a=u,u=o,o=null):typeof n!="object"&&(o=null),a&&(p+=a),p+="/",o!==null&&(p+=o);if(typeof u=="object")if(s(u)){if(u.length<3)return h=u[u.length-1],o!==null&&c(n,o,h),h;if(u[2]!==0){if(u[2]===2){e.config.textPatch||i();if(!e.config.textPatch)throw new Error("textPatch function not found");try{h=e.config.textPatch(l(n,o),u[0])}catch(m){throw new Error('cannot apply patch at "'+p+'": '+m)}return o!==null&&c(n,o,h),h}throw u[2]===3?new Error("Not implemented diff type: "+u[2]):new Error("invalid diff type: "+u[2])}if(o===null)return;c(n,o)}else if(u._t=="a"){v=o===null?n:l(n,o);if(typeof v!="object"||!s(v))throw new Error('cannot apply patch at "'+p+'": array expected');r.patch(v,u,t.patch,p)}else{v=o===null?n:l(n,o);if(typeof v!="object"||s(v))throw new Error('cannot apply patch at "'+p+'": object expected');for(f in u)u.hasOwnProperty(f)&&d(v,f,u[f],p)}return n},v=e.unpatch=function(e,t,n,r){return typeof t!="string"?d(e,p(t),n):d(e,t,p(n),r)};typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?module.exports=e:typeof define=="function"&&define.amd?define("jsondiffpatch",e):typeof window!="undefined"?window.jsondiffpatch=e:self.jsondiffpatch=e}(),define("hr/model",["hr/utils","jsondiffpatch","hr/class","hr/logger"],function(e,t,n,r){var i=r.addNamespace("models"),s=n.extend({defaults:{},idAttribute:"id",initialize:function(t,n){return n=n||{},n=e.deepExtend({},e.result(this,"defaults"),n),this._prevAttributes=null,this.collection=this.options.collection,this.attributes={},this.set(n,{silent:!0}),this},toJSON:function(t){return e.deepClone(this.attributes)},get:function(t,n,r){var i,s,o;r=e.defaults(r||{},{}),i=t.split("."),s=this.attributes;while(s&&i.length>0)currentScope=i.shift(),s=s[currentScope];return i.length==0&&e.isUndefined(s)==0?s:n},set:function(n,r,i){var s,o,u,a,f,l;if(typeof n=="object")s=n,i=r;else{s={},u=n.split("."),o=s;for(var c in u){var n=u[c];c==u.length-1?o[n]=r:(o[n]={},o=o[n])}}i=e.defaults(i||{},{silent:!1}),f=e.deepExtend({},this.attributes||{},s),i.silent||(l=t.diff(this._prevAttributes,f),e.size(l)==0&&(l=t.diff(this.attributes,f))),this._prevAttributes=this._prevAttributes==null?e.deepClone(f):this.attributes,this.attributes=f;var h=this.id;return this.idAttribute in this.attributes?this.id=this.attributes[this.idAttribute]:this.id=this.cid,h!=this.id&&this.trigger("id",this.id,h),i.silent||(l=e.diffkeys(l),e.each(l,function(e){this.trigger("change:"+e,e)},this),l.length>0&&this.trigger("set",l)),this},del:function(t){var n,r,i,s;return i=t.split("."),r=this.attributes,e.each(i,function(t,n){n==e.size(i)-1?delete r[t]:r=r[t]}),this.trigger("set"),this.trigger("del"),this},destroy:function(e){return this.trigger("destroy",this,this.collection,e),this.off(),this},clear:function(t){return t=e.defaults(t||{},{silent:!1}),this.attributes={},t.silent||(this.trigger("clear"),this.trigger("change")),this},reset:function(t,n){return n=e.defaults(n||{},{silent:!1}),this.clear({silent:!0}),this.set(t,n),n.silent||this.trigger("reset"),this},has:function(e){return this.get(e)!=null}});return s}),define("hr/collection",["hr/utils","hr/promise","hr/class","hr/model","hr/logger","hr/queue"],function(e,t,n,r,i,s){var o=i.addNamespace("collections"),u=n.extend({model:r,defaults:{loader:null,loaderArgs:[],startIndex:0,limit:10,models:[]},initialize:function(e){return u.__super__.initialize.call(this,e),this.queue=new s,this.models=[],this._byId={},this._totalCount=null,this.reset(this.options.models||[],{silent:!0}),this},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},at:function(e){return this.models[e]},where:function(t){return e.isEmpty(t)?[]:this.filter(function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},pluck:function(t){return e.map(this.models,function(e){return e.get(t)})},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t=t||{},e.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},reset:function(t,n){n=e.defaults(n||{},{totalCount:!1});if(e.size(t)==2&&t.list!=null&&t.n!=null)return this._totalCount=t.n,this.reset(t.list,n);for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],n);return n.previousModels=this.models,this.options.startIndex=0,this.models=[],this._byId={},n.totalCount&&(this._totalCount=null),this.add(t,e.extend({silent:!0},n||{})),n=e.defaults(n||{},{silent:!1}),n.silent||this.trigger("reset",this,n),this},add:function(t,n){var r,i;return e.isArray(t)?(e.each(t,function(t){this.add(t,e.clone(n))},this),this):e.size(t)==2&&t.list!=null&&t.n!=null?(this._totalCount=t.n,this.add(t.list,n)):(n=e.defaults({},n||{},{at:this.models.length,merge:!1,silent:!1}),t=this._prepareModel(t),(i=this.get(t))?(n.merge&&i.set(t.toJSON()),this):(this._byId[t.id]=t,this.listenTo(t,"all",this._onModelEvent),this.listenTo(t,"id",this._onModelId),r=n.at,this.models.splice(r,0,t),n.silent?this:(n.index=r,this.trigger("add",t,this,n),this.comparator&&this.sort({silent:n.silent}),this)))},_removeReference:function(e,t){this===e.collection&&delete e.collection,this.stopListening(e)},remove:function(t,n){var r;return e.isArray(t)?(e.each(t,function(e){this.remove(e,n)},this),this):(n=e.defaults(n||{},{silent:!1}),t=this._prepareModel(t),e.each(this.models,function(e,n){if(!e||t.id==e.id){this.models.splice(n,1),r=n;return}},this),delete this._byId[t.id],n.silent?this:(n.index=r,this._totalCount!=null&&(this._totalCount=e.max([0,this._totalCount-1])),this.trigger("remove",t,this,n),this._removeReference(t),this))},pipe:function(t){t.listenTo(this,"add",function(e){this.add(e)}),t.listenTo(this,"remove",function(e){this.remove(e)}),t.listenTo(this,"reset",function(t,n){e.each(n.previousModels,function(e){this.remove(e)},this),collection.each(function(e){this.add(e)},this)}),this.each(function(e){t.add(e)})},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(t,n){return t=this._prepareModel(t,n),this.add(t,e.extend({at:0},n)),t},shift:function(e){var t=this.at(0);return this.remove(t,e),t},_prepareModel:function(e,t){t||(t={});if(e instanceof r)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(t,n)}return e},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this.remove(t,r),this.trigger.apply(this,arguments)},_onModelId:function(e,t){var n=this.get(e);n&&this.remove(n),this._byId[e]=this._byId[t],delete this._byId[t]},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]},count:function(){return e.size(this.models)},totalCount:function(){return this._totalCount||this.count()},hasMore:function(){return this.totalCount()-this.count()},getMore:function(n){this.queue.defer(function(){n=e.defaults(n||{},{refresh:!1});var r,i=this;return this.options.loader==null?this:(n.refresh&&(this.options.startIndex=0,this._totalCount=null,this.reset([])),this._totalCount==null||this.hasMore()>0||n.refresh?(this.options.startIndex=this.options.startIndex||0,r=t(this[this.options.loader].apply(this,this.options.loaderArgs||[])),r.done(function(){i.options.startIndex=i.options.startIndex+i.options.limit})):r=t.reject(),r)},this)},refresh:function(){return this.getMore({refresh:!0}),this}}),a=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];return e.each(a,function(t){u.prototype[t]=function(){return e[t].apply(e,[this.models].concat(e.toArray(arguments)))}}),u}),define("hr/list",["hr/utils","hr/view","hr/logger","hr/collection"],function(e,t,n,r){var i=n.addNamespace("lists"),s=t.extend({tagName:"li",initialize:function(){return s.__super__.initialize.apply(this,arguments),this.collection=this.options.collection,this.list=this.options.list,this}}),o=t.extend({tagName:"ul",className:"",Item:s,Collection:r,defaults:{collection:{},searchAttribute:null,displayEmptyList:!0,displayHasMore:!0,loadAtInit:!0,baseFilter:null},events:{"click *[data-list-action='showmore']":"getItems"},initialize:function(){return o.__super__.initialize.apply(this,arguments),this._filter=null,this.items={},this.options.collection instanceof r?this.collection=this.options.collection:this.collection=new this.Collection(this.options.collection),this.listenTo(this.collection,"reset",function(){this.resetModels()}),this.listenTo(this.collection,"sort",function(){this.orderItems()}),this.listenTo(this.collection,"add",function(e,t,n){this.addModel(e,n)}),this.listenTo(this.collection,"remove",function(e){this.removeModel(e)}),this.listenTo(this.collection.queue,"tasks",function(){this.update()}),this.resetModels({silent:!0}),this.options.loadAtInit&&this.getItems(),this.options.baseFilter&&this.filter(this.options.baseFilter),this.update()},remove:function(){return e.each(this.items,function(e){e.remove()}),o.__super__.remove.apply(this,arguments)},addModel:function(t,n){var r,i;return n=e.defaults(n||{},{silent:!1,render:!0,at:e.size(this.items)}),this.items[t.id]!=null&&this.removeModel(t),r=new this.Item({model:t,list:this,collection:this.collection}),this.listenTo(t,"set",function(){r.update(),this.applyFilter(r)}),this.listenTo(t,"id",function(){this.items[newId]=this.items[oldId],delete this.items[oldId]}),r.update(),i=this.Item.prototype.tagName,this.Item.prototype.className&&(i=i+"."+this.Item.prototype.className.split(" ")[0]),n.at>0?this.$("> "+i).eq(n.at-1).after(r.$el):this.$el.prepend(r.$el),this.items[t.id]=r,this.applyFilter(r),n.silent||this.trigger("add",t),n.render&&this.update(),this},orderItems:function(){return e.each(this.items,function(e){e.detach()},this),this.collection.each(function(e){var t=this.items[e.id];if(!t){i.warn("sort list with non existant item");return}t.appendTo(this)},this),this},removeModel:function(t,n){return n=e.defaults(n||{},{silent:!1,render:!0}),this.stopListening(t),this.items[t.id]==null?this:(this.items[t.id].remove(),this.items[t.id]=null,delete this.items[t.id],n.silent||this.trigger("remove",t),n.render&&this.update(),this)},resetModels:function(t){return t=e.defaults(t||{},{silent:!1,render:!0}),e.each(this.items,function(e){this.removeModel(e.model,{silent:!0,render:!1})},this),this.items={},this.$el.empty(),this.collection.forEach(function(e){this.addModel(e,{silent:!0,render:!1})},this),t.silent||this.trigger("reset"),t.render&&this.update(),this},refresh:function(){return this.collection.refresh(),this},size:function(){return this.collection.size()},count:function(){return e.reduce(this.items,function(e,t){return this.applyFilter(t)&&(e+=1),e},0,this)},totalCount:function(){return this.collection.totalCount()},hasMore:function(){return this.collection.hasMore()},getItems:function(){return this.collection.getMore(),this},getItemsList:function(t){return e.map(this.items,function(e){return this.$(this.Item.prototype.tagName).index(e.$el)},this)},applyFilter:function(e){var t=e.$el.hasClass("hr-list-fiter-on"),n=this._filter==null||!!this._filter(e.model,e);return e.$el.toggleClass("hr-list-fiter-on",!n),t==n&&this.trigger("filter",e,n),n},filter:function(t,n){return e.isFunction(t)?this._filter=e.bind(t,n):this._filter=null,this.count()},clearFilter:function(){return this.filter(null)},search:function(t,n){var r=0,i;return n=e.defaults(n||{},{silent:!1,caseSensitive:!1}),t=n.caseSensitive?t:t.toLowerCase(),r=this.filter(function(e,r){return i=this.options.searchAttribute!=null?e.get(this.searchAttribute,""):r.$el.text(),i=n.caseSensitive?i:i.toLowerCase(),i.search(t)>=0},this),n.silent||this.trigger("search",{query:t,n:r}),this},displayEmptyList:function(){return $("<div>",{html:""})},displayHasMore:function(){var e=$("<div>",{"class":"alert hr-list-message hr-list-message-more","data-list-action":"showmore",text:this.hasMore()});return this.$el.append(e),this},render:function(){this.$(".hr-list-message").remove();if(this.collection.queue.isComplete()==0)$("<div>",{"class":"hr-list-message hr-list-message-loading"}).appendTo(this.$el);else{if(this.count()==0&&this.options.displayEmptyList){var e=this.displayEmptyList();$(e).addClass("hr-list-message hr-list-message-empty").appendTo(this.$el)}this.hasMore()>0&&this.options.displayHasMore&&this.displayHasMore()}return this.ready()}},{Item:s});return o}),define("hr/cookies",["hr/utils","hr/configs","hr/logger"],function(e,t,n){var r=n.addNamespace("cookies"),i={get:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return decodeURIComponent(i.substring(t.length,i.length))}return null},set:function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="; expires="+r.toGMTString()}else var i="";document.cookie=e+"="+encodeURIComponent(t)+i+"; path=/"},remove:function(e){return i.set(e,"",-1)},clear:function(){return document.cookie="",!0}};return i}),define("hr/backend",["hr/promise","hr/class","hr/offline","hr/storage"],function(e,t,n,r){var i=/:\w+/g,s=/\*\w+/g,o=/[-[\]{}()+?.,\\^$|#\s]/g,u=t.extend({defaults:{useDefaults:!0,prefix:"backend"},initialize:function(){u.__super__.initialize.apply(this,arguments),this.methods={},this.defaultHandler=null},addMethod:function(e,t){if(this.methods[e])throw"Method already define for this backend: "+e;return t.id=e,t.regexp=this.routeToRegExp(e),this.methods[e]=t,this},addCachedMethod:function(e,t){return t=t||e,t=this.options.prefix+"."+t,this.addMethod(e,{fallback:function(e,n,i){return r.get(t+"."+i)},after:function(e,n,i,s){r.set(t+"."+s,n)}})},getHandler:function(e){return _.find(this.methods,function(t){return t.regexp.test(e)})||this.defaultHandler},defaultMethod:function(e){return this.defaultHandler=e,this},execute:function(t,r,i){var s=this,o;i=i||{};var u=this.getHandler(t);return u?(n.isConnected()||(o=u.fallback),o=o||u.execute||this.defaultHandler.execute,o?e(o(r,i,t)).then(function(n){return u.after?e.all([e(u.after(r,n,i,t)),e((s.defaultHandler.after||function(){})(r,n,i,t))]).then(function(){return e(n)},function(){return e(n)}):n}):e.reject(new Error("No handler found for this method in this backend"))):e.reject(new Error("No handler found for method: "+t))},routeToRegExp:function(e){return e=e.replace(o,"\\$&").replace(i,"([^/]+)").replace(s,"(.*?)"),new RegExp("^"+e+"$")},extractParameters:function(e,t){return e.exec(t).slice(1)}});return u}),define("hr/views",["hr/utils","hr/view","hr/template"],function(e,t,n){var r=t.extend({tagName:"span",className:"component-relativedate",defaults:{time:0,update:6e4,updateD:1.01,className:""},initialize:function(e){return r.__super__.initialize.apply(this,arguments),this.$el.addClass(this.options.className),this},render:function(){return this.interval!=null&&clearInterval(this.interval),this.interval=setInterval(e.bind(this.render,this),this.options.update),this.options.update=this.options.update*this.options.updateD,this.$el.html(n.utils.timeago(this.options.time)),this.ready()}});return n.registerComponent("hr.date.relative",r),{RelativeDate:r}}),define("hr/hr",["hr/promise","hr/utils","hr/configs","hr/class","hr/view","hr/application","hr/head","hr/history","hr/router","hr/model","hr/collection","hr/list","hr/logger","hr/requests","hr/urls","hr/storage","hr/cache","hr/cookies","hr/template","hr/resources","hr/offline","hr/backend","hr/queue","hr/i18n","hr/views"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){e.onerror=function(e){h.logging.error(e)};var N={configs:n,Class:r,View:i,Application:s,Head:o,Router:a,Model:f,Collection:l,List:c,History:u,Logger:h,Storage:v,Cache:m,Cookies:g,Requests:p,Urls:d,Template:y,Resources:b,Queue:S,I18n:x,views:T,Offline:w,Backend:E,app:null,configure:function(e,t){t=t||{},e=e||{};if(e.revision==null){h.logging.error("Error invalid configuration for hr");return}n.extend(t,{revision:e.revision,args:e,baseUrl:e.baseUrl||""})}};return N}),define("hr/args",[],function(){return{version:"0.8.3",debug:!1,revision:1424432745057,baseUrl:"/"}}),+function(e){var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,r=this.getActiveIndex();if(t>this.$items.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(this.sliding)return;return this.slide("next")},t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")},t.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}this.sliding=!0,s&&this.pause();var f=e.Event("slide.bs.carousel",{relatedTarget:i[0],direction:o});if(i.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(s.interval=!1),i.carousel(s),(o=n.attr("data-slide-to"))&&i.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(window.jQuery),define("vendors/bootstrap/carousel",function(){}),+function(e){function i(){e(t).remove(),e(n).each(function(t){var n=s(e(this));if(!n.hasClass("open"))return;n.trigger(t=e.Event("hide.bs.dropdown"));if(t.isDefaultPrevented())return;n.removeClass("open").trigger("hidden.bs.dropdown")})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var t=".dropdown-backdrop",n="[data-toggle=dropdown]",r=function(t){var n=e(t).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=s(n),o=r.hasClass("open");i();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i),r.trigger(t=e.Event("show.bs.dropdown"));if(t.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown"),n.focus()}return!1},r.prototype.keydown=function(t){if(!/(38|40|27)/.test(t.keyCode))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var i=s(r),o=i.hasClass("open");if(!o||o&&t.keyCode==27)return t.which==27&&i.find(n).focus(),r.click();var u=e("[role=menu] li:not(.divider):visible a",i);if(!u.length)return;var a=u.index(u.filter(":focus"));t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<u.length-1&&a++,~a||(a=0),u.eq(a).focus()};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n+", [role=menu]",r.prototype.keydown)}(window.jQuery),define("vendors/bootstrap/dropdown",function(){}),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r)};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.is("input")?"val":"html",i=n.data();e+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var t=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");t.prop("type")==="radio"&&e.find(".active").removeClass("active")}this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s=typeof n=="object"&&n;i||r.data("bs.button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(window.jQuery),define("vendors/bootstrap/button",function(){}),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r);if(this.isShown||r.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(i)}).emulateTransitionEnd(300):n.$element.focus().trigger(i)})},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]!==e.target&&!this.$element.has(e.target).length&&this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",e.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);s||i.data("bs.modal",s=new t(this,o)),typeof n=="string"?s[n](r):o.show&&s.show(r)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(window.jQuery),define("vendors/bootstrap/modal",function(){}),+function(e){var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=e(document).height(),r=this.$window.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;typeof s!="object"&&(u=o=s),typeof o=="function"&&(o=s.top()),typeof u=="function"&&(u=s.bottom());var a=this.unpin!=null&&r+this.unpin<=i.top?!1:u!=null&&i.top+this.$element.height()>=n-u?"bottom":o!=null&&r<=o?"top":!1;if(this.affixed===a)return;this.unpin&&this.$element.css("top",""),this.affixed=a,this.unpin=a=="bottom"?i.top-r:null,this.$element.removeClass(t.RESET).addClass("affix"+(a?"-"+a:"")),a=="bottom"&&this.$element.offset({top:document.body.offsetHeight-u-this.$element.height()})};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s=typeof n=="object"&&n;i||r.data("bs.affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),define("vendors/bootstrap/affix",function(){}),+function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed.bs.alert").remove()}var n=e(this),r=n.attr("data-target");r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var i=e(r);t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one(e.support.transition.end,s).emulateTransitionEnd(150):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(window.jQuery),define("vendors/bootstrap/alert",function(){}),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var t=e.Event("show.bs.collapse");this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",i].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[i](this.$element[0][o])},t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var t=e.Event("hide.bs.collapse");this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!e.support.transition)return r.call(this);this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350)},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);i||r.data("bs.collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.collapse"),u=o?"toggle":n.data(),a=n.attr("data-parent"),f=a&&e(a);if(!o||!o.transitioning)f&&f.find('[data-toggle=collapse][data-parent="'+a+'"]').not(n).addClass("collapsed"),n[s.hasClass("in")?"addClass":"removeClass"]("collapsed");s.collapse(u)})}(window.jQuery),define("vendors/bootstrap/collapse",function(){}),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focus",a=o=="hover"?"mouseleave":"blur";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var r=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(r);s&&(r=r.replace(i,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var o=this.getPosition(),u=n[0].offsetWidth,a=n[0].offsetHeight;if(s){var f=this.$element.parent(),l=r,c=document.documentElement.scrollTop||document.body.scrollTop,h=this.options.container=="body"?window.innerWidth:f.outerWidth(),p=this.options.container=="body"?window.innerHeight:f.outerHeight(),d=this.options.container=="body"?0:f.offset().left;r=r=="bottom"&&o.top+o.height+a-c>p?"top":r=="top"&&o.top-c-a<0?"bottom":r=="right"&&o.right+u>h?"left":r=="left"&&o.left-u<d?"right":r,n.removeClass(l).addClass(r)}var v=this.getCalculatedOffset(r,o,u,a);this.applyPlacement(v,r),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var n,r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),e.top=e.top+o,e.left=e.left+u,r.offset(e).addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;t=="top"&&f!=s&&(n=!0,e.top=e.top+s-f);if(/bottom|top/.test(t)){var l=0;e.left<0&&(l=e.left*-2,e.left=0,r.offset(e),a=r[0].offsetWidth,f=r[0].offsetHeight),this.replaceArrow(l-i+a,a,"left")}else this.replaceArrow(f-s,f,"top");n&&r.offset(e)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function i(){t.hoverState!="in"&&n.detach()}var t=this,n=this.tip(),r=e.Event("hide.bs."+this.type);this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),this.$element.trigger("hidden.bs."+this.type),this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),define("vendors/bootstrap/tooltip",function(){}),+function(e){var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),define("vendors/bootstrap/popover",function(){}),+function(e){function t(n,r){var i,s=e.proxy(this.process,this);this.$element=e(n).is("body")?e(window):e(n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||(i=e(n).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this,r=this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#\w/.test(i)&&e(i);return s&&s.length&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parents(".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s=typeof n=="object"&&n;i||r.data("bs.scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),define("vendors/bootstrap/scrollspy",function(){}),+function(e){var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target");r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});t.trigger(s);if(s.isDefaultPrevented())return;var o=e(r);this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})},t.prototype.activate=function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o).emulateTransitionEnd(150):o(),i.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),define("vendors/bootstrap/tab",function(){}),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]}}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(window.jQuery),define("vendors/bootstrap/transition",function(){}),function(e){function n(t,n,r,i){var s=r.type;r.type=n,i?e.event.trigger(r,undefined,t):e.event.dispatch.call(t,r),r.type=s}var t=e(document);e.event.special.taphold={setup:function(r,i){function h(e){var t=e.pageX||e.originalEvent.touches[0].pageX,n=e.pageY||e.originalEvent.touches[0].pageY;(Math.abs(l-t)>f||Math.abs(c-n)>f)&&u&&clearTimeout(u)}function p(e){v(),u&&clearTimeout(u)}function m(t){if(t.type=="mousedown"&&t.originalEvent.button!=0)return;l=t.pageX||t.originalEvent.touches[0].pageX,c=t.pageY||t.originalEvent.touches[0].pageY,d(),u=setTimeout(function(){v(),n(s,"taphold",e.Event("taphold",{target:t.target,pageX:l,pageY:c}))},a),t.stopPropagation()}var s=this,o=e(s),u=null,a=500,f=5,l,c,d=function(){t.on("mousemove",h),t.on("touchmove",h),t.on("mouseup",p),t.on("touchend",p)},v=function(){t.unbind("mousemove",h),t.unbind("touchmove",h),t.unbind("mouseup",p),t.unbind("touchend",p)};o.on("mousedown",m),o.on("touchstart",m)},teardown:function(t){e(this).unbind(t)}},e.fn.taphold=function(e){return e?this.bind("taphold",e):this.trigger("taphold")}}(jQuery),define("vendors/taphold",function(){}),define("resources/resources",["hr/hr"],function(e){return e.Resources.addNamespace("templates",{loader:"text"}),{}}),define("utils/url",["hr/hr"],function(e){return URL={parseQueryString:function(){var e={},t=location.search.slice(1).split("&"),n=function(e){return decodeURIComponent(e.replace(/\+/g," "))};for(var r=0;r<t.length;++r){var i=t[r].split("=");1<i.length&&(e[n(i[0])]=n(i[1]))}return e},parse:function(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null},absolutize:function(e,t){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){e==="/.."?t.pop():t.push(e)}),t.join("").replace(/^\//,e.charAt(0)==="/"?"/":"")}return t=URL.parse(t||""),e=URL.parse(e||""),!t||!e?null:(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||t.pathname.charAt(0)==="/"?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash}}}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||undefined),u=[];define("text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(e){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&!!process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n="utf-8",r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),n)),o,u,a="";try{o=new java.lang.StringBuffer,u=s.readLine(),u&&u.length()&&u.charAt(0)===65279&&(u=u.substring(1)),o.append(u);while((u=s.readLine())!==null)o.append(i),o.append(u);a=String(o.toString())}finally{s.close()}t(a)}),a={version:"1.0.0",strip:function(e){if(e){e=e.replace(t,"");var r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw new Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s,o,u;return i?(s=i[2],o=i[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===t)&&(!o||o===n)&&(!u&&!o||u===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&i.inlineText&&(u[e]=n),r(n)},load:function(e,t,n,u){var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})},write:function(e,t,n,r){if(t in u){var i=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,n,r,i){var s=a.parseName(t),o=s.moduleName+"."+s.ext,u=n.toUrl(s.moduleName+"."+s.ext)+".js";a.load(o,n,function(t){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)},a.write(e,o,n,i)},i)}},a})}(),define("text!resources/templates/dialogs/alert.html",[],function(){return'<div class="modal-dialog">\n	<div class="modal-content">\n		<div class="modal-header">\n			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n		    <h4 class="modal-title"><%- options.title || "Alert" %></h4>\n		</div>\n		<div class="modal-body">\n		    <p><%= options.message %></p>\n		</div>\n		<div class="modal-footer">\n		    <button class="btn btn-default action-close">Close</button>\n		</div>\n	</div>\n</div>'}),define("text!resources/templates/dialogs/confirm.html",[],function(){return'<div class="modal-dialog">\n	<div class="modal-content">\n		<div class="modal-header">\n			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n		    <h4 class="modal-title"><%- options.title || "Confirm" %></h4>\n		</div>\n		<div class="modal-body">\n		    <p><%= options.message %></p>\n		</div>\n		<div class="modal-footer">\n		    <button class="btn btn-default action-close">Cancel</button>\n		    <button class="btn btn-default action-confirm">OK</button>\n		</div>\n	</div>\n</div>'}),define("text!resources/templates/dialogs/fields.html",[],function(){return'<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title"><%- options.title || "Input" %></h4>\n        </div>\n        <div class="modal-body">\n            <form class="form-horizontal">\n            <% _.each(options.fields, function(field, key) { \n                var field_name = key;\n                var field_selector = key;\n                var field_value = options.values[field_selector] || field.default;\n            %>\n            <div class="form-group">\n                <label class="col-lg-3 control-label" for="<%- field_name %>"><%- field.label %></label>\n                <div class="col-lg-9">\n                    <% if (field.type == "text") { %>\n                    <input class="form-control" type="text" name="<%- field_name %>" value="<%- field_value %>" />\n                    <% } else if (field.type == "password") { %>\n                    <input class="form-control" type="password" name="<%- field_name %>" value="<%- field_value %>" />\n                    <% } else if (field.type == "number") { %>\n                    <input class="form-control" type="number" name="<%- field_name %>" step="<%- field.step || 1 %>" min="<%- field.min || 0 %>" max="<%- field.max || 10 %>" value="<%- field_value %>" />\n                    <% } else if (field.type == "checkbox") { %>\n                    <input type="checkbox" name="<%- field_name %>" <% if(field_value) { %>checked<% } %> />\n                    <% } else if (field.type == "action") { %>\n                    <button class="btn btn-default" data-settings-action="<%- key %>"><%= field.content %></button>\n                    <% } else if (field.type == "textarea") { %>\n                    <textarea class="form-control" name="<%- field_name %>" rows="<%- field.rows || 3 %>"><%- field_value %></textarea>\n                    <% } else if (field.type == "select") { %>\n                    <select class="form-control" name="<%- field_name %>">\n                        <% _.each(field.options, function(opname, opkey) { %>\n                            <option\n                                value="<%- opkey %>"\n                                <% if (field_value == opkey) { %>\n                                    selected\n                                <% } %>\n                                ><%- opname %></option>\n                        <% }) %>\n                    </select>\n                    <% } %>\n\n                    <% if (field.help) { %>\n                    <p class="help-block"><%= field.help %></p>\n                    <% } %>\n                </div>\n            </div>\n            <% }) %>\n            </form>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-default action-confirm">OK</button>\n        </div>\n    </div>\n</div>'}),define("text!resources/templates/dialogs/prompt.html",[],function(){return'<div class="modal-dialog">\n	<div class="modal-content">\n		<div class="modal-header">\n			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n		    <h4 class="modal-title"><%- options.title || "Input" %></h4>\n		</div>\n		<div class="modal-body">\n		    <p><%= options.message %></p>\n		    <input type="text" class="input form-control" value="<%- options.default || "" %>" placeholder="<%- options.placeholder || "" %>" />\n		</div>\n		<div class="modal-footer">\n		    <button class="btn btn-default action-confirm">OK</button>\n		</div>\n	</div>\n</div>'}),define("text!resources/templates/dialogs/select.html",[],function(){return'<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title"><%- options.title || "Select" %></h4>\n        </div>\n        <div class="modal-body">\n            <p><%= options.message %></p>\n            <select class="input form-control">\n                <% _.each(options.choices, function(choice, key) { %>\n                    <option value="<%- key %>" <% if (options.default == key) { %>selected<% } %>><%- choice %></option>\n                <% }); %>\n            </select>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-default action-confirm">OK</button>\n        </div>\n    </div>\n</div>'}),define("views/dialogs/base",["hr/utils","hr/dom","hr/hr","text!resources/templates/dialogs/alert.html","text!resources/templates/dialogs/confirm.html","text!resources/templates/dialogs/fields.html","text!resources/templates/dialogs/prompt.html","text!resources/templates/dialogs/select.html"],function(e,t,n){var r=n.View.extend({className:"component-dialog modal fade",defaults:{args:{},template:null,dialog:null,open:!0,autoFocus:!1,keyboard:!0,keyboardEnter:!0,className:"",valueSelector:!0},events:{keydown:"keydown","hidden.bs.modal":"hidden","shown.bs.modal":"shown","click .action-close":"close","click .action-confirm":"actionConfirm"},template:function(){return this.options.template!=null?require("text!"+this.options.template):require("text!resources/templates/dialogs/"+this.options.dialog+".html")},templateContext:function(){return{options:this.options}},initialize:function(n){return r.__super__.initialize.apply(this,arguments),this.$el.addClass(this.options.className),this.value=null,this.keydownHandler=e.bind(this.keydown,this),this.options.keyboard&&t(document).bind("keydown",this.keydownHandler),this},finish:function(){return this.open(),r.__super__.finish.apply(this,arguments)},open:function(){return r.current!=null&&r.current.close(),this.$el.appendTo(t("body")),this.$el.modal("show"),r.current=this,this},close:function(e){e!=null&&e.preventDefault(),t(document).unbind("keydown",this.keydownHandler),this.$el.modal("hide")},hidden:function(e){this.trigger("close",this.value,e),this.remove(),r.current=null},shown:function(){this.options.autoFocus&&t(this.$("input").get(0)).focus()},actionConfirm:function(e){e!=null&&e.preventDefault(),this.value=this._getValue(),this.close(e)},selectorPrompt:function(){return this.$(".input").val()},_getValue:function(){var t=this.options.valueSelector;return e.isFunction(t)?this.value=t(this):e.isString(t)?this.value=this[t]():this.value=t,this.value},keydown:function(e){if(!this.options.keyboard)return;var t=e.keyCode||e.which;t==13&&this.options.keyboardEnter?this.actionConfirm(e):t==27&&this.close(e)}},{current:null});return r}),define("utils/dialogs",["hr/promise","hr/dom","hr/hr","views/dialogs/base"],function(e,t,n,r){var i={open:function(t,n){var i=e.defer();t=t||r;var s=new t(n);return s.once("close",function(e,t){e!=null?i.resolve(e):i.reject(e)}),setTimeout(function(){i.notify(s)},1),s.update(),i.promise},fields:function(e,t,n){return i.open(null,{title:e,fields:t,values:n||{},dialog:"fields",autoFocus:!0,valueSelector:function(e){var t={},n={text:function(e){return e.val()},password:function(e){return e.val()},textarea:function(e){return e.val()},number:function(e){return e.val()},select:function(e){return e.val()},checkbox:function(e){return e.is(":checked")},action:function(e){return null}};return _.each(e.options.fields,function(r,i){var s=n[r.type](e.$("*[name='"+i+"']"));s!==null&&(t[i]=s)}),t}})},prompt:function(e,t,n){return i.open(null,{title:e,message:t,dialog:"prompt","default":n,autoFocus:!0,valueSelector:"selectorPrompt"})},select:function(e,t,n,r){return i.open(null,{title:e,message:t,dialog:"select","default":r,choices:n,autoFocus:!0,valueSelector:"selectorPrompt"})},confirm:function(e,t){return t||(t=e,e=null),i.open(null,{title:e,message:t,dialog:"confirm"})},alert:function(e,t){return i.open(null,{title:e,message:t,dialog:"alert"})}};return i}),define("utils/alerts",["hr/hr","hr/dom"],function(e,t){var n={clear:function(){t(".cb-alerts").empty()},show:function(e,n){var r=this;n=n||1e4,this.clear();var i=t("<div>",{"class":"cb-alert",html:e}).appendTo(t(".cb-alerts"));setTimeout(function(){r.clear()},n)}};return _.bindAll(n)}),define("utils/loading",["hr/dom","hr/utils"],function(e,t){return{show:function(n,r){return e(".cb-loading-alert").show(),t.isString(n)&&(r=n,n=null),r&&e(".cb-loading-alert .cb-loading-message").html(r),n&&n.fin(function(){return Q.delay(300)}).fin(function(){e(".cb-loading-alert").hide(),e(".cb-loading-alert .cb-loading-message").html("")}),n},stop:function(){e(".cb-loading-alert").hide(),e(".cb-loading-alert .cb-loading-message").html("")}}}),define("utils/dragdrop",["hr/utils","hr/hr","hr/dom"],function(e,t,n){var r={start:"mousedown",stop:"mouseup",move:"mousemove",enter:"mouseenter",leave:"mouseleave"};navigator.userAgent.search("Mobile")>0&&(r={start:"touchstart",stop:"touchend",move:"touchmove",enter:"touchenter",leave:"touchleave"});var i=null,s=function(e){i&&i.remove(),i=null,e&&(i=n("<style>*{ cursor: "+e+" !important; }</style>").appendTo(n("body")))},o=e.partial(s,null),u=t.Class.extend({defaults:{view:null,className:"dragover",dragType:null,handler:null,constrain:null},initialize:function(){u.__super__.initialize.apply(this,arguments);var e=this;this.view=this.options.view,this.$el=this.view.$el,this.dragType=this.options.dragType,this.$el.on(r.enter,function(t){e.dragType.isDragging()&&(t.stopPropagation(),e.dragType.enterDropArea(e),e.$el.addClass("dragover"))}),this.$el.on(r.leave,function(t){e.$el.removeClass("dragover"),e.dragType.exitDropArea()}),this.on("drop",function(){e.$el.removeClass("dragover")}),this.options.handler&&this.on("drop",this.options.handler)}}),a=t.Class.extend({initialize:function(){a.__super__.initialize.apply(this,arguments),this.data=null,this.state=!0,this.drop=[]},toggle:function(e){return this.state=e,this},isDragging:function(){return this.data!=null},getDrop:function(){return this.drop.length>0?this.drop[this.drop.length-1]:null},enterDropArea:function(e){this.drop.push(e)},exitDropArea:function(){this.drop.pop()},enableDrag:function(t){var i=this,u=n(document),a,f;t=e.defaults(t||{},{view:null,el:null,data:null,baseDropArea:null,start:null,cursor:"copy"}),t.el&&(a=n(t.el)),t.view&&(a=t.view.$el,f=t.view),t.data&&(f=t.data),a.on(r.start,function(e){if(e.type=="mousedown"&&e.originalEvent.button!=0)return;if(!i.state)return;e.preventDefault();var n,l,c=!1,h=e.pageX,p=e.pageY,d=a.offset().left,v=a.offset().top,m,g,y,b;y=a.width(),b=a.height();var w,E,S,x;i.drop=[],t.baseDropArea&&i.enterDropArea(t.baseDropArea),i.data=f,t.start&&t.start();var T=function(e){var r=i.getDrop();n=h-e.pageX,l=p-e.pageY;if(Math.abs(n)>20||Math.abs(l)>20)c||(s(t.cursor),a.addClass("move")),c=!0;m=d-n,g=v-l,r&&r.options.constrain&&(w=r.$el.width(),E=r.$el.height(),S=r.$el.offset().left,x=r.$el.offset().top,Math.abs(g-x)<50&&(g=x),Math.abs(g+b-(x+E))<50&&(g=x+E-b),Math.abs(m-S)<50&&(m=S),Math.abs(m+y-(S+w))<50&&(m=S+w-y)),a.css({left:m,top:g})};u.on(r.move,T),u.one(r.stop,function(e){u.unbind(r.move,T),o();var n=i.getDrop();c&&(!t.baseDropArea||!n||t.baseDropArea.cid!=n.cid)&&(n&&n.trigger("drop",i.data),i.trigger("drop",n,i.data)),i.data=null,i.drop=[],a.removeClass("move"),a.css({left:"auto",top:"auto"})})})}});return{events:r,cursor:{set:s,reset:o},DropArea:u,DraggableType:a}}),define("views/grid",["hr/utils","hr/dom","hr/hr","utils/dragdrop"],function(e,t,n,r){var i=n.View.extend({className:"component-grid",defaults:{columns:0},events:{},initialize:function(){return i.__super__.initialize.apply(this,arguments),this.columns=this.options.columns,this.views=[],this},addView:function(t,n){return t._grid=this,t._gridOptions=e.defaults(n||{},{width:null}),this.views.push(t),this.update(),t},removeView:function(t){e.isString(t)||(t=t.cid),this.views=e.filter(this.views,function(e){return e.cid!=t}),this.update()},setLayout:function(e){this.columns=e,this.update()},getLayout:function(){var e=this.columns||Math.floor(Math.sqrt(this.views.length)),t=Math.min(e,this.views.length),n=Math.ceil(this.views.length/e);return{columns:t,lines:n}},signalLayout:function(){e.each(this.views,function(e){e.trigger("grid:layout")})},render:function(){var n,r,i;e.each(this.views,function(e){e.detach()}),this.$el.empty();var s=this.getLayout(),o=(100/s.columns).toFixed(3),u=(100/s.lines).toFixed(3);return n=0,r=0,i=100,e.each(this.views,function(e,o){var a,f,l,c;c=i/(s.columns-n),l=e._gridOptions.width||c,l=l.toFixed(4),a=t("<div>",{"class":"grid-section",css:{left:100-i+"%",top:r*u+"%",width:l+"%",height:u+"%"}}),a.appendTo(this.$el),i-=l,f=t("<div>",{"class":"grid-section-content"}),f.append(e.$el),f.appendTo(a),e.trigger("grid:layout");if(n<s.columns-1){var h=t("<div>",{"class":"grid-resize-bar-h",mousedown:this.resizerHandler(n,r,"h")});h.appendTo(a),f.addClass("with-bar-h")}if(r<s.lines-1){var p=t("<div>",{"class":"grid-resize-bar-v",mousedown:this.resizerHandler(n,r,"v")});p.appendTo(a),f.addClass("with-bar-v")}n+=1,n>=s.columns&&(n=0,r+=1,i=100)},this),this.ready()},resizerHandler:function(e,n,i){var s=this,o=t(document),u,a,f,l;return function(t){t.preventDefault(),u=t.pageX,a=t.pageY,r.cursor.set(i=="h"?"col-resize":"row-resize");var f=function(t){dx=u-t.pageX,dy=a-t.pageY,i=="h"?s.resizeColumn(e,-dx):s.resizeLine(n,-dy),u=t.pageX,a=t.pageY};o.mousemove(f),o.mouseup(function(e){o.unbind("mousemove",f),r.cursor.reset()})}},getSection:function(e,t){var n,r,i=this.getLayout(),s=this;return n=0,r=0,this.$("> .grid-section").filter(function(){var s=!1;if(e!==null&&e==n||t!==null&&t==r)s=!0;return n+=1,n>=i.columns&&(n=0,r+=1),s})},_resize:function(t,n,r){var i=e.bind(e.partialRight(this.getSection,null),this),s=e.bind(e.partialRight(this.pixelToPercent,null),this),o="left",u="width";t=="h"&&(i=e.bind(e.partial(this.getSection,null),this),s=e.bind(e.partial(this.pixelToPercent,null),this),o="top",u="height"),r=s(r);var a=i(n),f=i(n+1),l=this.strToPercent(f.get(0).style[u])-r,c=this.strToPercent(a.get(0).style[u])+r;return c<10||l<10?!1:(f.css(e.object([o,u],[(this.strToPercent(f.get(0).style[o])+r).toFixed(2)+"%",l.toFixed(2)+"%"])),a.css(e.object([u],[c.toFixed(2)+"%"])),this.signalLayout(),!0)},resizeLine:function(e,t){return this._resize("h",e,t)},resizeColumn:function(e,t){return this._resize("w",e,t)},pixelToPercent:function(e,t){if(e!==null)return e*100/this.$el.width();if(t!==null)return t*100/this.$el.height()},strToPercent:function(e){return parseFloat(e.replace("%",""))}});return i}),define("text!resources/templates/main.html",[],function(){return'<% if (session.box.isAuth()) { %>\n<div id="codebox" class="mode-body-fullpage">\n	<!-- Alerts -->\n	<div class="cb-alerts"></div>\n\n	<!-- Menu bar -->\n	<div class="cb-menubar">\n		<span class="cb-user-email"><%- session.user.get("email") %></span>\n	</div>\n	\n	<!-- Lateral bar commands-->\n	<div class="cb-lateralbar">\n		<div class="lateral-commands cb-commands"></div>\n	</div>\n\n	<!-- Body -->\n	<div class="cb-body"></div>\n	\n	<!-- Status bar -->\n	<div class="cb-statusbar"></div>\n</div>\n<div class="cb-loading-alert"><div class="cb-loadings-spinner"></div><div class="cb-loading-message"></div></div>\n<% } else { %>\n<div id="codebox">\n	<div class="cb-login">\n		<div class="login-box">\n			<div class="header">\n  				<img src="static/images/icons/128.png" />\n			</div>\n			<form class="inner">\n				<% if (loginError != null) { %>\n					<div class="form-group">\n						<p class="text-danger text-center"><%- loginError.message || loginError %></p>\n					</div>\n				<% } %>\n\n				<% if (hr.offline.isConnected()) { %>\n					<div class="form-group">\n						<input type="email" class="form-control input-lg" name="login-email" id="login-email" placeholder="Email" value="<%- email %>" autocomplete="off">\n						<% if (session.box.get("public")) { %>\n						<p class="help-block">This workspace is public, enter an email to identify yourself (GIT and collaborators).</p>\n						<% } %>\n					</div>\n					<% if (!session.box.get("public")) { %>\n					<div class="form-group">\n						<input type="password" class="form-control input-lg" name="login-token" id="login-token" placeholder="Password" value="<%- token %>" autocomplete="off">\n					</div>\n					<% } %>\n					<button id="login-submit" class="btn btn-lg btn-block btn-default">Enter</button>\n				<% } else { %>\n					<div class="form-group">\n						<p class="help-block">Sorry, You can\'t use this workspace in offline mode.</p>\n						<p class="help-block">Please login into your box first when your connection is back, and then this box will be available in offline mode.</p>\n						<p class="help-block">-- See you later</p>\n					</div>\n				<% } %>\n			</form>\n		</div>\n	</div>\n</div>\n<% } %>'}),function(e,t){var n=e;n.version="0.9.2",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i=n.util.parseUri(e),s,o;t&&t.location&&(i.protocol=i.protocol||t.location.protocol.slice(0,-1),i.host=i.host||(t.document?t.document.domain:t.location.hostname),i.port=i.port||t.location.port,i.resource=r.resource||"/"),s=n.util.uniqueUri(i);var u={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(u,r);if(u["force new connection"]||!n.sockets[s])o=new n.Socket(u);return!u["force new connection"]&&o&&(n.sockets[s]=o),o=o||n.sockets[s],o.of(i.path.length>1?i.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=r.exec(e||""),n={},s=14;while(s--)n[i[s]]=t[s]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port,s=e.resource;return"document"in t?(r=r||document.domain,i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(r=r||"localhost",!i&&n=="https"&&(i=443)),(n||"http")+"://"+r+":"+(i||80)+s},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var s in r)r.hasOwnProperty(s)&&i.push(s+"="+r[s]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){var t={},n=e.split("&"),r=0,i=n.length,s;for(;r<i;++r)s=n[r].split("="),s[0]&&(t[s[0]]=s[1]);return t};var s=!1;n.load=function(e){if("document"in t&&document.readyState==="complete"||s)return e();n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){s=!0}),n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts)return e();n.load(function(){setTimeout(e,100)})},n.merge=function(t,r,i,s){var o=s||[],u=typeof i=="undefined"?2:i,a;for(a in r)r.hasOwnProperty(a)&&n.indexOf(o,a)<0&&(typeof t[a]!="object"||!u?(t[a]=r[a],o.push(r[a])):n.merge(t[a],r[a],u-1,o));return t},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},n.intersect=function(e,t){var r=[],i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(var o=0,u=s.length;o<u;o++)~n.indexOf(i,s[o])&&r.push(s[o]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}var n=this;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){var i=-1;for(var s=0,o=r.length;s<o;s++)if(r[s]===n||r[s].listener&&r[s].listener===n){i=s;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return this.$events&&this.$events[e]&&(this.$events[e]=null),this},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;var i=n.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a instanceof Date&&(a=date(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],s=n.advice=["reconnect"],o=t.JSON,u=t.util.indexOf;n.encodePacket=function(e){var t=u(r,e.type),n=e.id||"",a=e.endpoint||"",f=e.ack,l=null;switch(e.type){case"error":var c=e.reason?u(i,e.reason):"",h=e.advice?u(s,e.advice):"";if(c!==""||h!=="")l=c+(h!==""?"+"+h:"");break;case"message":e.data!==""&&(l=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),l=o.stringify(p);break;case"json":l=o.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}var d=[t,n+(f=="data"?"+":""),a];return l!==null&&l!==undefined&&d.push(l),d.join(":")},n.encodePayload=function(e){var t="";if(e.length==1)return e[0];for(var n=0,r=e.length;n<r;n++){var i=e[n];t+=""+i.length+""+e[n]}return t};var a=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(a);if(!t)return{};var n=t[2]||"",e=t[5]||"",u={type:r[t[1]],endpoint:t[4]||""};n&&(u.id=n,t[3]?u.ack="data":u.ack=!0);switch(u.type){case"error":var t=e.split("+");u.reason=i[t[0]]||"",u.advice=s[t[1]]||"";break;case"message":u.data=e||"";break;case"event":try{var f=o.parse(e);u.name=f.name,u.args=f.args}catch(l){}u.args=u.args||[];break;case"json":try{u.data=o.parse(e)}catch(l){}break;case"connect":u.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){u.ackId=t[1],u.args=[];if(t[3])try{u.args=t[3]?o.parse(t[3]):[]}catch(l){}}break;case"disconnect":case"heartbeat":}return u},n.decodePayload=function(e){if(e.charAt(0)==""){var t=[];for(var r=1,i="";r<e.length;r++)e.charAt(r)==""?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.onData=function(e){this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(e!==""){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;r<i;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),e.type=="heartbeat"?this.onHeartbeat():(e.type=="connect"&&e.endpoint==""&&this.onConnect(),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){var e=this;this.open=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),e!==""&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function s(t){t instanceof Error?n.onError(t.message):e.apply(null,t.split(":"))}var n=this,r=this.options,o=["http"+(r.secure?"s":"")+":/",r.host+":"+r.port,r.resource,t.protocol,t.util.query(this.options.query,"t="+ +(new Date))].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var u=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src=o+"&jsonp="+t.j.length,u.parentNode.insertBefore(a,u),t.j.push(function(e){s(e),a.parentNode.removeChild(a)})}else{var f=t.util.request();f.open("GET",o,!0),f.withCredentials=!0,f.onreadystatechange=function(){f.readyState==4&&(f.onreadystatechange=i,f.status==200?s(f.responseText):!n.reconnecting&&n.onError(f.responseText))},f.send(null)}},r.prototype.getTransport=function(e){var n=e||this.transports,r;for(var i=0,s;s=n[i];i++)if(t.Transport[s]&&t.Transport[s].check(this)&&(!this.isXDomain()||t.Transport[s].xdomainCheck()))return new t.Transport[s](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return this.handshake(function(r,i,s,o){function u(e){n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=!1;if(n.options["try multiple transports"]){n.remainingTransports||(n.remainingTransports=n.transports.slice(0));var e=n.remainingTransports;while(e.length>0&&e.splice(0,1)[0]!=n.transport.name);e.length?u(e):n.publish("connect_failed")}}},n.options["connect timeout"]))})}n.sessionid=r,n.closeTimeout=s*1e3,n.heartbeatTimeout=i*1e3,n.transports=t.util.intersect(o.split(","),n.options.transports),n.setHeartbeatTimeout(),u(n.options.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&typeof e=="function"&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},r.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=this.resource+"/"+t.protocol+"/"+this.sessionid;e.open("GET",n,!0),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&e.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1;if(t||n)this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},r.prototype.reconnect=function(){function i(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer),e.removeListener("connect_failed",s),e.removeListener("connect",s),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=n}function s(){if(!e.reconnecting)return;if(e.connected)return i();if(e.connecting&&e.reconnecting)return e.reconnectionTimer=setTimeout(s,1e3);e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),i()):(e.on("connect_failed",s),e.options["try multiple transports"]=!0,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<r&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(s,e.reconnectionDelay))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],r=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(s,this.reconnectionDelay),this.on("connect",s)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function r(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var n=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];e.ack=="data"?i.push(r):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);e.ack=="data"&&i.push(r),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):e.reason=="unauthorized"?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e=t.util.query(this.socket.options.query),r=this,i;return i||(i=n.MozWebSocket||n.WebSocket),this.websocket=new i(this.prepareUrl()+e),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,r){function i(){var t=e.options,i=t["flash policy port"],o=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||(typeof WEB_SOCKET_SWF_LOCATION=="undefined"&&(WEB_SOCKET_SWF_LOCATION=o.join("/")),i!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(s)}var s=this;if(document.body)return i();t.util.load(i)},n.check=function(){return typeof WebSocket!="undefined"&&"__initialize"in WebSocket&&!!swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window)var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?["Active"].concat("").join("X"):"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u[["Active"].concat("Object").join("X")]!=e)try{var y=new(window[["Active"].concat("Object").join("X")])(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();(function(){if("undefined"==typeof window||window.WebSocket)return;var e=window.console;if(!e||!e.log||!e.error)e={log:function(){},error:function(){}};if(!swfobject.hasFlashPlayerVersion("10.0.0")){e.error("Flash Player >= 10.0.0 is required.");return}location.protocol=="file:"&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,r,i){var s=this;s.__id=WebSocket.__nextId++,WebSocket.__instances[s.__id]=s,s.readyState=WebSocket.CONNECTING,s.bufferedAmount=0,s.__events={},t?typeof t=="string"&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(s.__id,e,t,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)return;this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(!(e in this.__events))return;var r=this.__events[e];for(var i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){var t=this.__events[e.type]||[];for(var n=0;n<t.length;++n)t[n](e);var r=this["on"+e.type];r&&r(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if(e.type=="open"||e.type=="error")t=this.__createSimpleEvent(e.type);else if(e.type=="close")t=this.__createSimpleEvent("close");else{if(e.type!="message")throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(WebSocket.__flash)return;WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation);if(!window.WEB_SOCKET_SWF_LOCATION){e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{var t=WebSocket.__flash.receiveEvents();for(var n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(r){e.error(r)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!e||!e.enabledPlugin||!e.enabledPlugin.filename?!1:e.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))})(),function(e,t,n){function r(e){if(!e)return;t.Transport.apply(this,arguments),this.sendBuffer=[]}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function r(){this.readyState==4&&(this.onreadystatechange=i,t.posting=!1,this.status==200?t.socket.setBuffer(!1):t.onClose())}function s(){this.onload=i,t.socket.setBuffer(!1)}var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=s:this.sendXHR.onreadystatechange=r,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +(new Date));n.open(e||"GET",this.prepareUrl()+r,!0);if(e=="POST")try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,n){try{if(t.util.request(n))return!0}catch(r){}return!1},r.xdomainCheck=function(){return r.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date));this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(r){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var e=new(window[["Active"].concat("Object").join("X")])("htmlfile");return e&&t.Transport.XHR.check()}catch(n){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function t(){this.readyState==4&&(this.onreadystatechange=i,this.status==200?(e.onData(this.responseText),e.get()):e.onClose())}function r(){this.onload=i,this.onerror=i,e.onData(this.responseText),e.get()}function s(){e.onClose()}if(!this.open)return;var e=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=r,this.xhr.onerror=s):this.xhr.onreadystatechange=t,this.xhr.send(null)},r.prototype.onClose=function(){t.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var r=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function a(){f(),n.socket.setBuffer(!1)}function f(){n.iframe&&n.form.removeChild(n.iframe);try{u=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){u=document.createElement("iframe"),u.name=n.iframeId}u.id=n.iframeId,n.form.appendChild(u),n.iframe=u}var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);if(!this.form){var i=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index,u;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=o,i.method="POST",i.setAttribute("accept-charset","utf-8"),s.name="d",i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}this.form.action=this.prepareUrl()+r,f(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?u.onreadystatechange=function(){n.iframe.readyState=="complete"&&a()}:this.iframe.onload=a,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s),this.script=n,r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.open&&this.get(),this},i.prototype.ready=function(e,n){var i=this;if(!r)return n.call(this);t.util.load(function(){n.call(i)})},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),define("vendors/socket.io",function(e){return function(){var t,n;return t||e.io}}(this)),define("core/backends/rpc",["hr/hr"],function(e){var t=new e.Backend({prefix:"rpc"});return t.defaultMethod({execute:function(t,n,r){return n=_.defaults({},n||{},{dataType:"json",options:{headers:{"Content-type":"application/json"}}}),e.Requests.post("rpc/"+r,JSON.stringify(t),n).then(function(e){return e.ok?Q(e.data):Q.reject(new Error(e.error))},function(e){try{var t=JSON.parse(e.httpRes),n=new Error(t.error||e.message);return n.code=t.code||e.status||500,Q.reject(n)}catch(n){return Q.reject(e)}})}}),t.addCachedMethod("box/status"),t.addCachedMethod("box/changes"),t.addCachedMethod("auth/join"),t.addCachedMethod("addons/list"),t.addCachedMethod("users/list"),t}),function(e){function n(e){var t=e.code,n=e.name;Object.defineProperty(this,"code",{set:function(e){t=e},get:function(){return t}}),Object.defineProperty(this,"name",{set:function(e){n=e},get:function(){return n}})}function h(e,t){var n=t,r=t[0]!=l;r&&(n=e,e!=l?n+=l+t:n+=t);var i=n.split(l);for(var s=0;s<i.length;++s){var o=i[s];o==".."&&(i[s-1]="",i[s]="")}return n=i.filter(function(e){return e}).join(l),n[0]!=l&&(n=l+n),n=n.replace(/\.\//g,l),n=n.replace(/\/\//g,l),n=n.replace(/\/\./g,l),n[n.length-1]==l&&n!=l&&(n=n.substring(0,n.length-1)),n}function p(e){var t=null;this.size=e.size||0,this.name=e.name||"",this.type=e.type||"",this.lastModifiedDate=e.lastModifiedDate||null,Object.defineProperty(this,"blob_",{enumerable:!0,get:function(){return t},set:function(e){t=e,this.size=t.size,this.name=t.name,this.type=t.type,this.lastModifiedDate=t.lastModifiedDate}.bind(this)})}function d(e){if(!e)throw Error("Expected fileEntry argument to write.");var t=0,n=e.file_?e.file_.blob_:null;Object.defineProperty(this,"position",{get:function(){return t}}),Object.defineProperty(this,"length",{get:function(){return n?n.size:0}}),this.seek=function(e){t=e,t>this.length&&(t=this.length),t<0&&(t+=this.length),t<0&&(t=0)},this.truncate=function(e){n?e<this.length?n=n.slice(0,e):n=new Blob([n,new Uint8Array(e-this.length)],{type:n.type}):n=new Blob([]),t=0,this.write(n)},this.write=function(r){if(!r)throw Error("Expected blob argument to write.");this.onwritestart&&this.onwritestart();if(!n)n=new Blob([r],{type:r.type});else{var i=n.slice(0,t),s=n.slice(t+r.size),o=t-i.size;o<0&&(o=0),n=new Blob([i,new Uint8Array(o),r,s],{type:n.type})}e.file_.blob_=n,e.file_.lastModifiedDate=r.lastModifiedDate||null,a.put(e,function(e){t+=r.size,this.onwriteend&&this.onwriteend()}.bind(this),this.onerror)}}function v(e){var t=e,n=!1;this.readEntries=function(e,r){if(!e)throw Error("Expected successCallback argument.");n?e([]):a.getAllEntries(t.fullPath,function(t){n=!0,e(t)},r)}}function m(e,t){this.modificationTime_=e||null,this.size_=t||0}function g(){}function y(e){this.file_=null,Object.defineProperty(this,"isFile",{enumerable:!0,get:function(){return!0}}),Object.defineProperty(this,"isDirectory",{enumerable:!0,get:function(){return!1}}),e&&(this.file_=e.file_,this.name=e.name,this.fullPath=e.fullPath,this.filesystem=e.filesystem)}function b(e){Object.defineProperty(this,"isFile",{enumerable:!0,get:function(){return!1}}),Object.defineProperty(this,"isDirectory",{enumerable:!0,get:function(){return!0}}),e&&(this.name=e.name,this.fullPath=e.fullPath,this.filesystem=e.filesystem)}function w(t,n){u=t==e.TEMPORARY?"Temporary":"Persistent",this.name=(location.protocol+location.host).replace(/:/g,"_")+":"+u,this.root=new b,this.root.fullPath=l,this.root.filesystem=this,this.root.name=""}function E(t,n,i,s){if(t!=e.TEMPORARY&&t!=e.PERSISTENT&&s){s(r);return}o=new w(t,n),a.open(o.name,function(e){i(o)},s)}function S(e,t,n){if(n){n(i);return}}function x(e){switch(e.target.errorCode){case 12:console.log("Error - Attempt to open db with a lower version than the current one.");break;default:console.log("errorCode: "+e.target.errorCode)}console.log(e,e.code,e.message)}if(e.requestFileSystem||e.webkitRequestFileSystem)return;var t=e.indexedDB||e.mozIndexedDB||e.msIndexedDB;if(!t)return;e.TEMPORARY=0,e.PERSISTENT=1,e.FileError===undefined&&(window.FileError=function(){},FileError.prototype.prototype=Error.prototype),FileError.INVALID_MODIFICATION_ERR=9,FileError.NOT_FOUND_ERR=1,n.prototype=FileError.prototype,n.prototype.toString=Error.prototype.toString;var r=new n({code:FileError.INVALID_MODIFICATION_ERR,name:"INVALID_MODIFICATION_ERR"}),i=new n({code:1e3,name:"Not implemented"}),s=new n({code:FileError.NOT_FOUND_ERR,name:"Not found"}),o=null,u="temporary",a={};a.db=null;var f="entries",l="/",c=String.fromCharCode(l.charCodeAt(0)+1);p.prototype.constructor=p,m.prototype={get modificationTime(){return this.modificationTime_},get size(){return this.size_}},g.prototype={name:null,fullPath:null,filesystem:null,copyTo:function(){throw i},getMetadata:function(e,t){if(!e)throw Error("Expected successCallback argument.");try{this.isFile?e(new m(this.file_.lastModifiedDate,this.file_.size)):t(new n({code:1001,name:"getMetadata() not implemented for DirectoryEntry"}))}catch(r){t&&t(r)}},getParent:function(){throw i},moveTo:function(){throw i},remove:function(e,t){if(!e)throw Error("Expected successCallback argument.");a["delete"](this.fullPath,function(){e()},t)},toURL:function(){var e=location.protocol+"//"+location.host;return"filesystem:"+e+l+u.toLowerCase()+this.fullPath}},y.prototype=new g,y.prototype.constructor=y,y.prototype.createWriter=function(e){e(new d(this))},y.prototype.file=function(e,t){if(!e)throw Error("Expected successCallback argument.");if(this.file_==null){if(!t)throw s;t(s);return}var n=this.file_.blob_==null?this.file_:this.file_.blob_;n.lastModifiedDate=this.file_.lastModifiedDate,e(n)},b.prototype=new g,b.prototype.constructor=b,b.prototype.createReader=function(){return new v(this)},b.prototype.getDirectory=function(e,t,n,i){e=h(this.fullPath,e),a.get(e,function(u){t||(t={});if(t.create===!0&&t.exclusive===!0&&u){if(i){i(r);return}}else if(t.create===!0&&!u){var f=new b;f.name=e.split(l).pop(),f.fullPath=e,f.filesystem=o,a.put(f,n,i)}else if(t.create===!0&&u){if(u.isDirectory)n(new b(u));else if(i){i(r);return}}else if((!t.create||t.create===!1)&&!u){if(e==l){u=new b,u.name="",u.fullPath=l,u.filesystem=o,n(u);return}if(i){i(s);return}}else if((!t.create||t.create===!1)&&u&&u.isFile){if(i){i(r);return}}else n(new b(u))},i)},b.prototype.getFile=function(e,t,n,i){e=h(this.fullPath,e),a.get(e,function(u){t||(t={});if(t.create===!0&&t.exclusive===!0&&u){if(i){i(r);return}}else if(t.create===!0&&!u){var u=new y;u.name=e.split(l).pop(),u.fullPath=e,u.filesystem=o,u.file_=new p({size:0,name:u.name,lastModifiedDate:new Date}),a.put(u,n,i)}else if(t.create===!0&&u){if(u.isFile)n(new y(u));else if(i){i(r);return}}else if((!t.create||t.create===!1)&&!u){if(i){i(s);return}}else if((!t.create||t.create===!1)&&u&&u.isDirectory){if(i){i(r);return}}else n(new y(u))},i)},b.prototype.removeRecursively=function(e,t){if(!e)throw Error("Expected successCallback argument.");this.remove(e,t)},a.open=function(e,n,r){var i=this,s=t.open(e.replace(":","_"));s.onerror=r||x,s.onupgradeneeded=function(e){i.db=e.target.result,i.db.onerror=x;if(!i.db.objectStoreNames.contains(f))var t=i.db.createObjectStore(f)},s.onsuccess=function(e){i.db=e.target.result,i.db.onerror=x,n(e)},s.onblocked=r||x},a.close=function(){this.db.close(),this.db=null},a.drop=function(e,n){if(!this.db)return;var r=this.db.name,i=t.deleteDatabase(r);i.onsuccess=function(t){e(t)},i.onerror=n||x,a.close()},a.get=function(e,t,n){if(!this.db)return;var r=this.db.transaction([f],"readonly"),i=IDBKeyRange.bound(e,e+c,!1,!0),s=r.objectStore(f).get(i);r.onabort=n||x,r.oncomplete=function(e){t(s.result)}},a.getAllEntries=function(e,t,n){if(!this.db)return;var r=[],i=null;e!=l&&(i=IDBKeyRange.bound(e+l,e+c,!1,!0));var s=this.db.transaction([f],"readonly");s.onabort=n||x,s.oncomplete=function(n){r=r.filter(function(t){var n=t.fullPath.split(l).length,r=e.split(l).length;if(e==l&&n<r+1)return t;if(e!=l&&n==r+1)return t}),t(r)};var o=s.objectStore(f).openCursor(i);o.onsuccess=function(e){var t=e.target.result;if(t){var n=t.value;r.push(n.isFile?new y(n):new b(n)),t["continue"]()}}},a["delete"]=function(e,t,n){if(!this.db)return;var r=this.db.transaction([f],"readwrite");r.oncomplete=t,r.onabort=n||x;var i=IDBKeyRange.bound(e,e+c,!1,!0),s=r.objectStore(f)["delete"](i)},a.put=function(e,t,n){if(!this.db)return;var r=this.db.transaction([f],"readwrite");r.onabort=n||x,r.oncomplete=function(n){t(e)};var i=r.objectStore(f).put(e,e.fullPath)},e.addEventListener("beforeunload",function(e){a.db.close()},!1),e.requestFileSystem=E,e.resolveLocalFileSystemURL=S,e===window&&e.RUNNING_TESTS&&(e.Entry=g,e.FileEntry=y,e.DirectoryEntry=b,e.resolveToFullPath_=h,e.Metadata=m)}(self||window),define("vendors/idb.filesystem",function(){});var self=this;self.URL=self.URL||self.webkitURL,self.requestFileSystem=self.requestFileSystem||self.webkitRequestFileSystem,self.resolveLocalFileSystemURL=self.resolveLocalFileSystemURL||self.webkitResolveLocalFileSystemURL,navigator.temporaryStorage=navigator.temporaryStorage||navigator.webkitTemporaryStorage,navigator.persistentStorage=navigator.persistentStorage||navigator.webkitPersistentStorage,self.BlobBuilder=self.BlobBuilder||self.MozBlobBuilder||self.WebKitBlobBuilder;if(self.FileError===undefined){var FileError=function(){};FileError.prototype.prototype=Error.prototype}var Util={toArray:function(e){return Array.prototype.slice.call(e||[],0)},strToDataURL:function(e,t,n){var r=n!=undefined?n:!0;return r?"data:"+t+";base64,"+self.btoa(e):"data:"+t+","+e},strToObjectURL:function(e,t){var n=new Uint8Array(e.length);for(var r=0;r<n.length;++r)n[r]=e.charCodeAt(r);var i=new Blob([n],t?{type:t}:{});return self.URL.createObjectURL(i)},fileToObjectURL:function(e){return self.URL.createObjectURL(e)},fileToArrayBuffer:function(e,t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n&&n(e)},r.readAsArrayBuffer(e)},dataURLToBlob:function(e){var t=";base64,";if(e.indexOf(t)==-1){var n=e.split(","),r=n[0].split(":")[1],i=n[1];return new Blob([i],{type:r})}var n=e.split(t),r=n[0].split(":")[1],i=window.atob(n[1]),s=i.length,o=new Uint8Array(s);for(var u=0;u<s;++u)o[u]=i.charCodeAt(u);return new Blob([o],{type:r})},arrayBufferToBlob:function(e,t){var n=new Uint8Array(e);return new Blob([n],t?{type:t}:{})},arrayBufferToBinaryString:function(e,t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n&&n(e)};var i=new Uint8Array(e);r.readAsBinaryString(new Blob([i]))},arrayToBinaryString:function(e){if(typeof e!=typeof [])return null;var t=e.length,n=new Array(t);while(t--)n[t]=String.fromCharCode(e[t]);return n.join("")},getFileExtension:function(e){var t=e.lastIndexOf(".");return t!=-1?e.substring(t):""}},MyFileError=function(e){this.prototype=FileError.prototype,this.code=e.code,this.name=e.name};FileError.BROWSER_NOT_SUPPORTED=1e3,FileError.prototype.__defineGetter__("name",function(){var e=Object.keys(FileError);for(var t=0,n;n=e[t];++t)if(FileError[n]==this.code)return n;return"Unknown Error"});var Filer=new function(){function p(e){o=e||null,o&&(u=o.root,a=!0)}var e="Filesystem has not been initialized.",t="Not implemented.",n="Path was not a directory.",r="These method arguments are not supported.",i="filesystem:",s=1048576,o=null,u=null,a=!1,f=function(e){return e.indexOf(i)==0},l=function(e){return f(e)||(e[0]=="/"?e=o.root.toURL()+e.substring(1):e.indexOf("./")==0||e.indexOf("../")==0?e=="../"&&u!=o.root?e=u.toURL()+"/"+e:e=u.toURL()+e:e=u.toURL()+"/"+e),e},c=function(e,t,n){var r=arguments[2],i=arguments[3],s=t||function(e){throw e},o=function(e){if(e.code==FileError.NOT_FOUND_ERR){if(i){s(new Error('"'+r+'" or "'+i+'" does not exist.'));return}s(new Error('"'+r+'" does not exist.'));return}s(new Error("Problem getting Entry for one or more paths."));return},u=l(r);if(arguments.length==4){var a=l(i);self.resolveLocalFileSystemURL(u,function(t){self.resolveLocalFileSystemURL(a,function(n){e(t,n)},o)},o)}else self.resolveLocalFileSystemURL(u,e,o)},h=function(t,n,i,s,u,a){var f=this;if(!o)throw new Error(e);if(typeof t!=typeof n)throw new Error(r);var l=i||null,h=a!=undefined?a:!1;(t.isFile||n.isDirectory)&&n.isDirectory?h?t.moveTo(n,l,s,u):t.copyTo(n,l,s,u):c(function(e,t){if(!t.isDirectory){var n=new Error('Oops! "'+t.name+" is not a directory!");if(!u)throw n;u(n);return}h?e.moveTo(t,l,s,u):e.copyTo(t,l,s,u)},u,t,n)};return p.DEFAULT_FS_SIZE=s,p.version="0.4.3",p.prototype={get fs(){return o},get isOpen(){return a},get cwd(){return u}},p.prototype.pathToFilesystemURL=function(e){return l(e)},p.prototype.init=function(e,t,n){if(!self.requestFileSystem)throw new MyFileError({code:FileError.BROWSER_NOT_SUPPORTED,name:"BROWSER_NOT_SUPPORTED"});var r=e?e:{},i=r.size||s;this.type=self.TEMPORARY,"persistent"in r&&r.persistent&&(this.type=self.PERSISTENT);var f=function(e){this.size=i,o=e,u=o.root,a=!0,t&&t(e)};this.type!=self.PERSISTENT||!navigator.persistentStorage?self.requestFileSystem(this.type,i,f.bind(this),n):navigator.persistentStorage.requestQuota(i,function(e){self.requestFileSystem(this.type,e,f.bind(this),n)}.bind(this),n)},p.prototype.ls=function(t,n,r){if(!o)throw new Error(e);var i=function(e){var t=[],i=e.createReader(),s=function(){i.readEntries(function(e){e.length?(t=t.concat(Util.toArray(e)),s()):(t.sort(function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}),n(t))},r)};s()};t.isDirectory?i(t):f(t)?c(i,r,l(t)):u.getDirectory(t,{},i,r)},p.prototype.mkdir=function(t,n,r,i){if(!o)throw new Error(e);var s=n!=null?n:!1,a=t.split("/"),f=function(e,n){if(n[0]=="."||n[0]=="")n=n.slice(1);e.getDirectory(n[0],{create:!0,exclusive:s},function(e){if(e.isDirectory)n.length&&a.length!=1?f(e,n.slice(1)):r&&r(e);else{var s=new Error(t+" is not a directory");if(!i)throw s;i(s)}},function(e){e.message=e.message||"'"+t+"' already exists";if(!i)throw e;i(e)})};f(u,a)},p.prototype.open=function(t,n,r){if(!o)throw new Error(e);t.isFile?t.file(n,r):c(function(e){e.file(n,r)},r,l(t))},p.prototype.getEntry=function(t,n,r){if(!o)throw new Error(e);c(n,r,l(t))},p.prototype.create=function(t,n,r,i){if(!o)throw new Error(e);var s=n!=null?n:!0;u.getFile(t,{create:!0,exclusive:s},r,function(e){e.code==FileError.INVALID_MODIFICATION_ERR&&(e.message="'"+t+"' already exists");if(!i)throw e;i(e)})},p.prototype.mv=function(e,t,n,r,i){h.bind(this,e,t,n,r,i,!0)()},p.prototype.rm=function(t,n,r){if(!o)throw new Error(e);var i=function(e){e.isFile?e.remove(n,r):e.isDirectory&&e.removeRecursively(n,r)};t.isFile||t.isDirectory?i(t):c(i,r,t)},p.prototype.cd=function(t,r,i){if(!o)throw new Error(e);if(t.isDirectory)u=t,r&&r(u);else{var t=l(t);c(function(e){if(e.isDirectory)u=e,r&&r(u);else{var t=new Error(n);if(!i)throw t;i(t)}},i,t)}},p.prototype.cp=function(e,t,n,r,i){h.bind(this,e,t,n,r,i)()},p.prototype.write=function(t,n,r,i){if(!o)throw new Error(e);var s=function(e){e.createWriter(function(t){t.onerror=i;if(n.append)t.onwriteend=function(t){r&&r(e,this)},t.seek(t.length);else{var s=!1;t.onwriteend=function(t){if(!s){s=!0,this.truncate(this.position);return}r&&r(e,this)}}n.data.__proto__==ArrayBuffer.prototype&&(n.data=new Uint8Array(n.data));var o=new Blob([n.data],n.type?{type:n.type}:{});t.write(o)},i)};t.isFile?s(t):f(t)?c(s,i,t):u.getFile(t,{create:!0,exclusive:!1},s,i)},p.prototype.df=function(e,n){var r=function(t,n){e(t,n-t,n)};if(!navigator.temporaryStorage.queryUsageAndQuota||!navigator.persistentStorage.queryUsageAndQuota)throw new Error(t);self.TEMPORARY==this.type?navigator.temporaryStorage.queryUsageAndQuota(r,n):self.PERSISTENT==this.type&&navigator.persistentStorage.queryUsageAndQuota(r,n)},p};define("vendors/filer",["vendors/idb.filesystem"],function(e){return function(){var t,n;return t||e.Filer}}(this)),function(e,t,n){function m(e,t,n){if(e.addEventListener){e.addEventListener(t,n,!1);return}e.attachEvent("on"+t,n)}function g(e){if(e.type=="keypress"){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return r[e.which]?r[e.which]:i[e.which]?i[e.which]:String.fromCharCode(e.which).toLowerCase()}function y(e,t){return e.sort().join(",")===t.sort().join(",")}function b(e){e=e||{};var t=!1,n;for(n in l){if(e[n]){t=!0;continue}l[n]=0}t||(d=!1)}function w(e,t,n,r,i,s){var o,u,f=[],c=n.type;if(!a[e])return[];c=="keyup"&&k(e)&&(t=[e]);for(o=0;o<a[e].length;++o){u=a[e][o];if(!r&&u.seq&&l[u.seq]!=u.level)continue;if(c!=u.action)continue;if(c=="keypress"&&!n.metaKey&&!n.ctrlKey||y(t,u.modifiers)){var h=!r&&u.combo==i,p=r&&u.seq==r&&u.level==s;(h||p)&&a[e].splice(o,1),f.push(u)}}return f}function E(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function S(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}function x(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}function T(e,t,n,r){if(B.stopCallback(t,t.target||t.srcElement,n,r))return;e(t,n)===!1&&(S(t),x(t))}function N(e,t,n){var r=w(e,t,n),i,s={},o=0,u=!1;for(i=0;i<r.length;++i)r[i].seq&&(o=Math.max(o,r[i].level));for(i=0;i<r.length;++i){if(r[i].seq){if(r[i].level!=o)continue;u=!0,s[r[i].seq]=1,T(r[i].callback,n,r[i].combo,r[i].seq);continue}u||T(r[i].callback,n,r[i].combo)}var a=n.type=="keypress"&&p;n.type==d&&!k(e)&&!a&&b(s),p=u&&n.type=="keydown"}function C(e){typeof e.which!="number"&&(e.which=e.keyCode);var t=g(e);if(!t)return;if(e.type=="keyup"&&h===t){h=!1;return}B.handleKey(t,E(e),e)}function k(e){return e=="shift"||e=="ctrl"||e=="alt"||e=="meta"}function L(){clearTimeout(c),c=setTimeout(b,1e3)}function A(){if(!u){u={};for(var e in r){if(e>95&&e<112)continue;r.hasOwnProperty(e)&&(u[r[e]]=e)}}return u}function O(e,t,n){return n||(n=A()[e]?"keydown":"keypress"),n=="keypress"&&t.length&&(n="keydown"),n}function M(e,t,n,r){function i(t){return function(){d=t,++l[e],L()}}function s(t){T(n,t,e),r!=="keyup"&&(h=g(t)),setTimeout(b,10)}l[e]=0;for(var o=0;o<t.length;++o){var u=o+1===t.length,a=u?s:i(r||D(t[o+1]).action);P(t[o],a,r,e,o)}}function _(e){return e==="+"?["+"]:e.split("+")}function D(e,t){var n,r,i,u=[];n=_(e);for(i=0;i<n.length;++i)r=n[i],o[r]&&(r=o[r]),t&&t!="keypress"&&s[r]&&(r=s[r],u.push("shift")),k(r)&&u.push(r);return t=O(r,u,t),{key:r,modifiers:u,action:t}}function P(e,t,n,r,i){f[e+":"+n]=t,e=e.replace(/\s+/g," ");var s=e.split(" "),o;if(s.length>1){M(e,s,t,n);return}o=D(e,n),a[o.key]=a[o.key]||[],w(o.key,o.modifiers,{type:o.action},r,e,i),a[o.key][r?"unshift":"push"]({callback:t,modifiers:o.modifiers,action:o.action,seq:r,level:i,combo:e})}function H(e,t,n){for(var r=0;r<e.length;++r)P(e[r],t,n)}var r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},i={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},o={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u,a={},f={},l={},c,h=!1,p=!1,d=!1;for(var v=1;v<20;++v)r[111+v]="f"+v;for(v=0;v<=9;++v)r[v+96]=v;m(t,"keypress",C),m(t,"keydown",C),m(t,"keyup",C);var B={bind:function(e,t,n){return e=e instanceof Array?e:[e],H(e,t,n),this},unbind:function(e,t){return B.bind(e,function(){},t)},trigger:function(e,t){return f[e+":"+t]&&f[e+":"+t]({},e),this},reset:function(){return a={},f={},this},stopCallback:function(e,t){return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:t.tagName=="INPUT"||t.tagName=="SELECT"||t.tagName=="TEXTAREA"||t.isContentEditable},handleKey:N};e.Mousetrap=B,typeof define=="function"&&define.amd&&define("vendors/mousetrap",B)}(window,document),define("utils/keyboard",["hr/hr","hr/utils","vendors/mousetrap"],function(e,t,n){var r=n.stopCallback;n.stopCallback=function(e,t){return e.mousetrap?!1:r(e,t)};var i=e.Class.extend({initialize:function(){return this.bindings={},this},enableKeyEvent:function(e){e.mousetrap=!0},bind:function(r,i,s){if(t.isArray(r)){t.each(r,function(e){this.bind(e,i)},this);return}if(t.isObject(r)){t.each(r,function(e,t){this.bind(t,e,i)},this);return}this.bindings[r]==null&&(this.bindings[r]=new e.Class,n.bind(r,t.bind(function(e){this.bindings[r].trigger("action",e)},this))),s.listenTo(this.bindings[r],"action",i);return},preventDefault:function(e){return this.bind(e,function(e){e.preventDefault()},this)},toText:function(e){t.isArray(e)&&(e=t.first(e));if(!e)return null;var n=/Mac|iPod|iPhone|iPad/.test(navigator.platform);return e=e.replace("mod",n?"&#8984;":"ctrl"),e=e.replace("ctrl",""),e=e.replace("shift",""),n?e=e.replace("alt",""):e=e.replace("alt",""),e=e.replace(/\+/g," "),e.toUpperCase()}}),s=new i;return s.preventDefault("mod+r"),s}),define("utils/string",["hr/hr"],function(e){var t=function(e,t,n){if(e==t)return 1;if(t=="")return 0;var r=0,i,s,o=e.toLowerCase(),u=e.length,a=t.toLowerCase(),f=t.length,l,c=0,h=1,p;n&&(p=1-n);if(n)for(var d=0;d<f;++d){l=o.indexOf(a[d],c);if(-1===l){h+=p;continue}c===l?i=.7:(i=.1,e[l-1]===" "&&(i+=.8)),e[l]===t[d]&&(i+=.1),r+=i,c=l+1}else for(var d=0;d<f;++d){l=o.indexOf(a[d],c);if(-1===l)return 0;c===l?i=.7:(i=.1,e[l-1]===" "&&(i+=.8)),e[l]===t[d]&&(i+=.1),r+=i,c=l+1}return s=.5*(r/u+r/f)/h,a[0]===o[0]&&s<.85&&(s+=.15),s},n=function(e,t){return e.indexOf(t,e.length-t.length)!==-1};return{score:t,endsWith:n}}),define("models/command",["hr/utils","hr/hr","utils/keyboard","utils/string"],function(e,t,n,r){var i=t.Logger.addNamespace("command"),s=t.Model.extend({defaults:{type:"action",id:"",category:"",title:"",description:"",label:"",icons:{"default":"sign-blank",menu:"sign-blank",search:"sign-blank"},action:function(){},position:10,shortcuts:[],visible:!0,search:!0,offline:null,bindKeyboard:!0,flags:""},initialize:function(){var n=this;s.__super__.initialize.apply(this,arguments),this.get("id")||this.set("id",e.uniqueId("command"));var r=require("collections/commands");this.menu=new r,this.menu.reset(this.get("menu",[])),this.get("offline")!==null&&(this.listenTo(t.Offline,"state",function(){this.toggleFlag("disabled",this.get("offline")==t.Offline.isConnected())}),n.toggleFlag("disabled",n.get("offline")==t.Offline.isConnected()))},run:function(e){var t=this;if(this.hasFlag("disabled"))return!1;var n=this.get("action").apply(this,arguments);return Q.isPromise(n)&&(this.toggleFlag("running",!0),n.fin(function(){t.toggleFlag("running",!1)})),n},toggleFlag:function(t,n){var r=this.get("flags","").split(" ");n==null&&(n=!e.contains(r,t)),n?r.push(t):r=e.without(r,t),this.set("flags",e.uniq(r).join(" "))},hasFlag:function(t){var n=this.get("flags","").split(" ");return e.contains(n,t)},shortcutText:function(){var e=this.get("shortcuts");return n.toText(e)},label:function(){return this.get("label")?this.get("label"):this.shortcutText()},menuSection:function(t,n){e.isArray(t)||(t=[t]);var r=s.section(t,n);return this.menu.add(r),this},clearMenu:function(){return this.menu.reset([]),this},textScore:function(e){var t=this.get("category")+" "+this.get("title")+" "+this.get("description");return r.score(t,e)}},{all:null,register:function(t,r){e.isObject(t)&&(r=t,t=r.id);if(!t)return t=e.uniqueId("command"),new s({},e.extend(r,{id:t}));if(!s.all.get(t)){i.log("Register command",t);var o=new s({},e.extend(r,{id:t}));return o.get("bindKeyboard")&&e.each(o.get("shortcuts",[]),function(e){n.bind(e,function(e){e.preventDefault(),this.run()},o)}),s.all.add(o),o}throw"Error command already registrated:"+t},divider:function(t){return e.extend({type:"divider"},t)},section:function(t,n){return n=n||{},t.push(s.divider(n)),t=e.map(t,function(e){return e instanceof s||(e=s.register(e)),e.set(n),e}),t},run:function(e){var t=s.all.get(e);return t?t.run.apply(t,Array.prototype.slice.call(arguments,1)):!1}});return s.all=new(t.Collection.extend({Model:s})),s}),define("models/operation",["hr/utils","hr/hr","models/command"],function(e,t,n){var r=t.Logger.addNamespace("operations"),i=n.extend({defaults:e.extend({},n.prototype.defaults,{type:"operation",id:null,title:null,progress:null,icons:{"default":"fa-refresh fa-spin"},state:"running"}),progress:function(e){return this.set("progress",e),this},state:function(e){return this.set("state",e),this}});return i}),define("collections/operations",["hr/utils","hr/hr","hr/promise","models/operation","utils/dialogs"],function(e,t,n,r,i){var s=t.Collection.extend({model:r,comparator:function(e){return e.get("progress",0)},getById:function(e){return this.find(function(t){return t.id==e})},start:function(t,s,o,u){var a,f;return u=e.defaults({},u||{},{unique:!0}),a=this.getById(t),a?n.reject(new Error("An operation with this id is already running: "+t)):(a=new r({},e.extend({id:t},o||{})),this.add(a),s?(f=s(a),f.fail(function(n){i.alert("Error during an operation ("+e.escape(t)+")",n.message||n)}),f.progress(function(t){e.isNumber(t)&&a.progress(t)}),f.fin(function(){a.destroy()}),f):a)}});return s}),define("text!resources/templates/operations/operation.html",[],function(){return'<i class="fa <%- model.get("icons.default") %>"></i>\n<span class="operation-title"><%- model.get("title") || model.id %></span>\n<% if (model.get("progress") != null) { %>\n<span class="operation-progress"><%- model.get("progress") %>%</span>\n<% } %>'}),define("views/operations/manager",["hr/hr","models/operation","collections/operations","text!resources/templates/operations/operation.html"],function(e,t,n,r){var i=e.List.Item.extend({className:"operation-item",template:r,events:{click:"open"},finish:function(){return this.$el.toggle(this.model.get("state")=="running"),i.__super__.finish.apply(this,arguments)},open:function(e){this.model.run()}}),s=e.List.extend({tagName:"ul",className:"cb-operations",Item:i,Collection:n,start:function(){return this.collection.start.apply(this.collection,arguments)}});return s}),define("core/operations",["views/operations/manager"],function(e){var t=new e;return t}),define("models/change",["hr/utils","hr/hr","models/command","core/operations"],function(e,t,n,r){var i=t.Logger.addNamespace("changes"),s=t.Model.extend({defaults:{path:null,type:"modified",time:0,offline:!1},apply:function(){var e=this,n=require("core/backends/vfs");if(this.get("offline")==0&&!t.Offline.isConnected())return Q.reject(new Error("Can't apply this change when offline"));r.start("change.apply",function(t){var r=("/vfs/"+e.get("path")).replace("//","/"),s=e.get("type");return i.log("apply change",s,e.get("path")),Q().then(function(){return s=="remove"?n.execute("remove",{},{url:r}):s=="mkdir"?n.execute("mkdir",{},{url:r+"/"}):s=="create"?n.execute("create",{},{url:r}):s=="write"?n.execute("write",e.get("content",""),{url:r}):Q.reject(new Error("Invalid change type"))}).then(function(){return e.destroy(),Q()},function(e){return i.error(e),Q.reject(e)})})},command:function(){var e=this,t=new n({},{title:this.get("path"),label:this.get("type"),offline:this.get("offline"),action:function(){return e.apply()}});return t}});return s}),define("collections/changes",["hr/utils","hr/hr","models/change"],function(e,t,n){var r=t.Collection.extend({model:n,comparator:function(e){return e.get("path","").length},applyAll:function(){return console.log("apply all changes",this.size()),this.reduce(function(e,t){return console.log("next ",t,e),e.then(function(){return t.apply()})},Q())}});return r}),define("core/localfs",["hr/utils","hr/hr","utils/url","vendors/filer","core/operations","utils/alerts","collections/changes"],function(e,t,n,r,i,s,o){var u=t.Logger.addNamespace("localfs"),a="/",f=!1,l=!1,c=[],h=new o,p="inode/directory";syncDuration=6e4;var d=new r,v=function(t,n,r){if(!l)return Q.reject(new Error("Offline synchronization is disabled"));e.isUndefined(n)&&(n=[]),e.isArray(n)||(n=[n]);var i=Q.defer();n.push(function(){if(arguments.length==1)return i.resolve(arguments[0]);i.resolve(arguments)}),n.push(function(e){u.error("Error occurs: ",t.name,e),i.reject(e)});try{t.apply(r,n)}catch(s){i.reject(s)}return i.promise},m=function(e){return a="/"+e,u.log("base is",a),Q()},g=function(e){l=e!=undefined?e:!0},y=function(t){c=t||[],c.push("/.git"),c=e.compact(c),c=e.uniq(c),c=e.map(c,function(e){return e[0]!="/"&&(e="/"+e),e})},b=function(){return f?Q():v(d.init,{persistent:!0,size:10485760},d).then(function(){return u.log("fs is ready"),f=!0,Q()})},w=function(e){return function(){var t=arguments;return b().then(function(){return e.apply(e,t)})}},E=function(e){return e=a+e,e=e.replace("//","/"),e},S=function(e){var t=window.location.pathname;t=t.substring(0,t.lastIndexOf("/")+1)+"vfs/";var n=e.substr(t.length-1);return n.length==0&&(n="/"),n[0]!="/"&&(n="/"+n),n},x=function(t){return e.reduce(c,function(e,n){if(e)return e;if(t.indexOf(n)==0)return!0},!1)},T=w(function(e){return v(e.getMetadata,[],e).then(function(t){var n=e.fullPath.replace(a,"/").replace("//","/"),r=location.protocol+"//"+location.host+"/vfs"+n;return e.isDirectory&&(r+="/"),{name:e.name,size:t.size,mtime:t.modificationTime.getTime(),mime:e.isDirectory?p:"application/octet-stream",href:r,exportUrl:e.toURL(),offline:!0,_fullPath:n}})}),N=w(function(t,n){return t=n==0?t:E(t),u.log("ls:",t),v(d.ls,t,d).then(function(t){return Q.all(e.map(t,function(e){return T(e)}))}).then(function(e){return e},function(e){u.error("ls:",e)})}),C=w(function(e){return e=E(e),u.log("create:",e),v(d.create,[e,!0],d)}),k=w(function(e,t){return e=E(e),u.log("write:",e),v(d.write,[e,{data:t||""}],d)}),L=w(function(e){return e=E(e),u.log("open:",e),v(d.getEntry,[e],d).then(function(e){return T(e)})}),A=w(function(e){return e=E(e),u.log("read:",e),v(d.open,[e],d).then(function(e){var t=Q.defer(),n=new FileReader;return n.onerror=function(e){t.reject(e)},n.onload=function(e){t.resolve(n.result)},n.readAsText(e),t.promise})}),O=w(function(e){return e=E(e),u.log("mkdir:",e),v(d.mkdir,[e,!1],d)}),M=w(function(e,t){return e=E(e),t=E(t),u.log("move:",e,"to",t),v(d.mv,[e,".",t],d)}),_=w(function(e,t){return e=E(e),t=E(t),u.log("copy:",e,"to",t),v(d.cp,[e,".",t],d)}),D=w(function(e,t){return e=t==0?e:E(e),u.log("remove:",e),v(d.rm,[e],d)}),P=w(function(){var t=require("models/file"),n=require("core/box");h.reset([]);if(!l)return Q(h);var r=function(t,n,r){if(x(t))return;u.log("change:",n,t),h.add(e.extend(r||{},{path:t,time:Date.now(),type:n||"M"}))},s=function(n){var i,o,a,f;return x(n)?Q():(u.log("get changes in:",n),f=new t,L(n).then(function(e){return N(n)}).then(function(e){return i=e,f.getByPath(n).fail(function(){return Q()})}).then(function(){return f.isDirectory()?f.listdir():Q([])}).then(function(e){o=e}).then(function(){return Q.all(e.map(o,function(t){if(x(t.path()))return Q();var n=e.find(i,function(e){return e.name==t.get("name")});return!n&&t.get("mtime")<a.mtime&&r(t.path(),"remove"),Q()}))}).then(function(){return Q.all(e.map(i,function(t){var n=t.mime==p,i=e.find(o,function(e){return t.name==e.get("name")});if(!i)n?r(t._fullPath,"mkdir"):r(t._fullPath,"create");else if(!n&&i.get("mtime")<t.mtime)return A(t._fullPath).then(function(e){return i.read().then(function(n){if(n==e)return Q();r(t._fullPath,"write",{content:e})})});return n?s(t._fullPath):Q()}))}).fail(function(e){u.error("Error during sync: ",e)}))};return i.start("files.sync.changes",function(e){return s("/").then(function(){return Q(h)})},{title:"Calculating Offline Changes"})}),H=w(function(){var t=require("core/box"),n=function(t){var r=t.path();return x(r)?Q():(u.log("sync:box->local:",r),t.isDirectory()?O(r).then(function(){return t.listdir()}).then(function(t){return Q.all(e.map(t,function(e){return n(e)}))}):t.read().then(function(e){return k(r,e)}))};return i.start("files.sync.download",function(r){return u.warn("Start sync: box->local"),N("/",!1).then(function(t){return Q.all(e.map(t,function(e){return D("/"+e.name,!1)}))}).then(function(){return n(t.root)},function(){return n(t.root)}).then(function(){h.reset([]),u.warn("Finished sync: box->local")})},{title:"Updating Offline Cache"})}),B=w(function(n){n=e.defaults({},n||{},{});var r=h.size();if(t.Offline.isConnected()){var i,o=Date.now();return L("/").then(function(e){return P()},function(){return O("/")}).then(function(){return h.size()>0?h.size()==r?Q.reject(new Error("Offline changes not synced")):(s.show(h.size()+" changes made offline need to be synced manually",5e3),Q.reject(new Error("Offline changes not synced"))):H()}).then(function(){return i=Date.now(),syncDuration=e.max([i-o,5e3]),F(),syncDuration},function(e){u.error("Sync error:",e)})}return Q.reject(new Error("Can't synchronize when offline"))}),j=null,F=function(){syncDuration=e.max([syncDuration,3e5]),u.log("sync took ",syncDuration/1e3,"seconds"),j=e.throttle(function(){B()},2*syncDuration)};return F(),{changes:h,urlToPath:S,init:m,ls:N,create:C,mkdir:O,write:k,read:A,mv:M,cp:_,rm:D,reset:H,sync:B,autoSync:function(){return j()},enableSync:g,isSyncEnabled:function(){return l},filer:d,syncDuration:syncDuration,setIgnoredFiles:y}}),define("core/backends/vfs",["hr/utils","hr/hr","utils/url","core/localfs"],function(e,t,n,r){var i=t.Logger.addNamespace("vfs"),s=new t.Backend({prefix:"vfs"}),o=function(t,n,r){var i="watch.change."+t;s.trigger("event:"+i,{event:i,data:e.extend({},{path:n,change:t,source:"fakeVfs"},r)})};t.Offline.on("state",function(){o("folder","/")});var u={listdir:"getJSON",write:"put",mkdir:"put",create:"put",special:"post",remove:"delete",read:"get"};return s.defaultMethod({execute:function(e,n,r){return e&&r!="write"&&(e=JSON.stringify(e)),n.url?u[r]?(i.log(r+": "+n.url),t.Requests[u[r]](n.url,e,n)):Q.reject(new Error("Invalid VFS request: "+r)):Q.reject(new Error("VFS requests need 'url' option"))},after:function(e,t,n,i){var s=r.urlToPath(n.url);switch(i){case"remove":o("delete",s);break;case"special":e.renameFrom?(o("delete",e.renameFrom),o("create",s)):e.copyFrom&&o("create",s);break;case"create":o("create",s);break;case"mkdir":o("create",s);break;case"write":o("update",s)}}}),s.addMethod("read",{fallback:function(e,t){var n=r.urlToPath(t.url);return r.read(n)},after:function(e,t,n){}}),s.addMethod("create",{fallback:function(e,t){var n=r.urlToPath(t.url);return r.create(n,e)},after:function(e,t,n){r.autoSync()}}),s.addMethod("mkdir",{fallback:function(e,t){var n=r.urlToPath(t.url);return r.mkdir(n,e)},after:function(e,t,n){r.autoSync()}}),s.addMethod("write",{fallback:function(e,t){var n=r.urlToPath(t.url);return r.write(n,e)},after:function(e,t,n){r.autoSync()}}),s.addMethod("special",{fallback:function(e,t){if(e.renameFrom){var n=r.urlToPath(t.url),i=e.renameFrom;return i?r.mv(i,n):Q.reject("need 'renameFrom'")}if(e.copyFrom){var n=r.urlToPath(t.url),i=e.copyFrom;return i?r.cp(i,n):Q.reject("need 'copyFrom'")}return Q.reject("Invalid special operations")},after:function(e,t,n){r.autoSync()}}),s.addMethod("remove",{fallback:function(e,t){var n=r.urlToPath(t.url);return r.rm(n,e)},after:function(e,t,n){r.autoSync()}}),s.addMethod("listdir",{fallback:function(e,t){var n=r.urlToPath(t.url);return r.ls(n)},after:function(e,t,n){}}),s}),define("core/debug/session",["hr/hr","hr/promise","core/backends/rpc"],function(e,t,n){var r=e.Class.extend({initialize:function(e){r.__super__.initialize.apply(this,arguments),this.id=null,this._breakpoints=[],this.position=null},init:function(e){var t=this;return n.execute("debug/init",e).then(function(e){t.id=e.id,t.trigger("update:init")})},close:function(){var e=this;return e.id?this.execute("close").then(function(){e.id=null,e.trigger("close"),e.stopListening(),e.off()}):t.reject(new Error("Session not yet initialized"))},execute:function(e,r,i){var s=this;return i=_.defaults(i||{},{error:!0}),n.execute("debug/"+e,_.extend(r||{},{id:this.id})).then(function(e){return e},function(e){return i.error&&s.trigger("error",e),t.reject(e)})},locals:function(){return this.execute("locals")},breakpoints:function(){var e=this;return this.execute("breakpoints").then(function(t){return e._breakpoints=t,t})},backtrace:function(){return this.execute("backtrace").then(_.bind(function(e){return this.position=_.last(e),this.trigger("position",this.position),e},this))},getBreakpoint:function(e){return _.find(this._breakpoints,function(t){return t.filename==e.path&&t.line==e.line})},breakpointAdd:function(e){var t=this;return this.execute("breakpoint/add",e).then(function(e){return t.trigger("update:breakpoints:add"),e})},breakpointRemove:function(e){var t=this;return this.execute("breakpoint/clear",{num:e}).then(function(e){return t.trigger("update:breakpoints:clear"),e})},start:function(e){var t=this;return this.execute("start",{arg:e}).then(function(e){t.trigger("log",e),t.trigger("update:start")})},stop:function(){var e=this;return this.execute("stop").then(function(t){e.trigger("log",t),e.trigger("update:stop")})},next:function(){var e=this;return this.execute("next").then(function(t){e.trigger("log",t),e.trigger("update:next")})},cont:function(){var e=this;return this.execute("cont").then(function(t){e.trigger("log",t),e.trigger("update:cont")})},restart:function(){var e=this;return this.execute("restart").then(function(t){e.trigger("log",t),e.trigger("update:restart")})},eval:function(e){var t=this,n=function(e,n){return t.trigger("update:eval:"+e),{type:e,content:n.message||n}};return this.execute("eval",{code:e},{error:!1}).then(_.partial(n,"log"),_.partial(n,"error"))}});return r}),define("core/debug/breakpoints",["hr/hr","hr/utils"],function(e,t){var n=e.Class.extend({initialize:function(){n.__super__.initialize.apply(this,arguments),this.breakpoints={}},signalChange:function(e,t,n){this.trigger("change:"+e,{change:e,path:t,line:n})},all:function(){return t.clone(this.breakpoints)},getFileBreakpoints:function(e){return this.breakpoints[e]||[]},setFileBreakpoints:function(e,n){var r=this.breakpoints[e]||[];this.breakpoints[e]=t.clone(n);var i=t.difference(this.breakpoints[e],r),s=t.difference(r,this.breakpoints[e]);t.each(i,t.partial(t.bind(this.signalChange,this),"add",e)),t.each(s,t.partial(t.bind(this.signalChange,this),"remove",e))}});return n}),define("core/debug/manager",["hr/hr","hr/promise","core/debug/session","core/debug/breakpoints"],function(e,t,n,r){var i=e.Class.extend({initialize:function(e){i.__super__.initialize.apply(this,arguments),this.activeDebugger=null,this.state=!1,this.breakpoints=new r},open:function(){return this.isActive()?this.activeDebugger.close().then(_.bind(function(){return this.open()},this)):(this.activeDebugger=new n,this.trigger("state",!0),this.listenTo(this.activeDebugger,"close",function(){this.activeDebugger=null,this.trigger("state",!1),this.trigger("position",null)}),this.listenTo(this.activeDebugger,"position",function(e){this.trigger("position",e)}),t(this.activeDebugger))},isActive:function(e){return this.activeDebugger!=null},getPosition:function(){return this.isActive()?this.activeDebugger.position:null}});return new i}),define("utils/languages",["hr/utils"],function(e){var t={init:function(){e.each(t.LIST,function(e,n){t.LIST[n].lang=n})},get_infos:function(e){return t.LIST[e]},get_color_byinfos:function(e,n){var r=n;return e==null?n:e.color!=null?e.color:e.group!=null&&e.group!=e.lang?t.get_color(e.group,n):n},get_color:function(e,n){var r=t.get_infos(e);return t.get_color_byinfos(r,n)},get_color_byext:function(e,n){var r=t.get_byextension(e);return t.get_color_byinfos(r,n)},get_byextension:function(n){var r=n.replace(".","");return n=n.toLowerCase(),e.find(e.values(t.LIST),function(t){return t.primary_extension.toLowerCase()==n?!0:e.contains(e.map(t.extensions||[],function(e){return e.toLowerCase()}),n)||e.contains(t.filenames,r)})},get_mode_byextension:function(e){var n=t.get_byextension(e);return n!=null&&n.ace_mode!=null?n.ace_mode:"text"},get_autosuggestions:function(n){return n=n.toLowerCase(),e.reduce(t.LIST,function(e,t,r){return r.toLowerCase().search(n)>=0&&e.push({name:r,value:r}),e},[])},LIST:{ASP:{aliases:["aspx","aspx-vb"],color:"#6a40fd",extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"],lexer:"aspx-vb",primary_extension:".asp",search_term:"aspx-vb",type:"programming"},ActionScript:{aliases:["as3"],color:"#e3491a",lexer:"ActionScript 3",primary_extension:".as",search_term:"as3",type:"programming"},Ada:{color:"#02f88c",extensions:[".ads"],primary_extension:".adb",type:"programming"},ApacheConf:{aliases:["apache"],primary_extension:".apacheconf",type:"markup"},Apex:{lexer:"Text only",primary_extension:".cls",type:"programming"},AppleScript:{aliases:["osascript"],primary_extension:".applescript",type:"programming"},Arc:{color:"#ca2afe",lexer:"Text only",primary_extension:".arc",type:"programming"},Arduino:{color:"#bd79d1",lexer:"C++",primary_extension:".ino",type:"programming"},Assembly:{aliases:["nasm"],color:"#a67219",lexer:"NASM",primary_extension:".asm",search_term:"nasm",type:"programming"},Augeas:{primary_extension:".aug",type:"programming"},AutoHotkey:{aliases:["ahk"],color:"#6594b9",lexer:"autohotkey",primary_extension:".ahk",type:"programming"},Batchfile:{aliases:["bat"],extensions:[".cmd"],group:"Shell",primary_extension:".bat",search_term:"bat",type:"programming"},Befunge:{primary_extension:".befunge"},BlitzMax:{primary_extension:".bmx"},Boo:{color:"#d4bec1",primary_extension:".boo",type:"programming"},Brainfuck:{extensions:[".bf"],primary_extension:".b"},Bro:{primary_extension:".bro",type:"programming"},C:{ace_mode:"c_cpp",color:"#555",extensions:[".w",".h"],primary_extension:".c",type:"programming"},"C#":{ace_mode:"csharp",aliases:["csharp"],color:"#5a25a2",primary_extension:".cs",search_term:"csharp",type:"programming"},"C++":{ace_mode:"c_cpp",aliases:["cpp"],color:"#f34b7d",extensions:[".c",".c++",".cxx",".h",".h++",".hh",".hxx",".hpp",".tcc",".cc"],primary_extension:".cpp",search_term:"cpp",type:"programming"},"C-ObjDump":{lexer:"c-objdump",primary_extension:".c-objdump",type:"data"},"C2hs Haskell":{aliases:["c2hs"],group:"Haskell",lexer:"Haskell",primary_extension:".chs",type:"programming"},CMake:{extensions:[".cmake.in"],filenames:["CMakeLists.txt"],primary_extension:".cmake"},CSS:{ace_mode:"css",primary_extension:".css"},Ceylon:{lexer:"Text only",primary_extension:".ceylon",type:"programming"},ChucK:{lexer:"Java",primary_extension:".ck"},Clojure:{ace_mode:"clojure",color:"#db5855",extensions:[".cljs"],primary_extension:".clj",type:"programming"},CoffeeScript:{ace_mode:"coffee",aliases:["coffee","coffee-script"],color:"#244776",extensions:["._coffee"],filenames:["Cakefile"],primary_extension:".coffee",type:"programming"},ColdFusion:{ace_mode:"coldfusion",aliases:["cfm"],color:"#ed2cd6",extensions:[".cfc"],lexer:"Coldfusion HTML",primary_extension:".cfm",search_term:"cfm",type:"programming"},"Common Lisp":{aliases:["lisp"],color:"#3fb68b",extensions:[".lsp",".ny"],primary_extension:".lisp",type:"programming"},Coq:{primary_extension:".coq",type:"programming"},"Cpp-ObjDump":{extensions:[".c++objdump",".cxx-objdump"],lexer:"cpp-objdump",primary_extension:".cppobjdump",type:"data"},Cucumber:{lexer:"Gherkin",primary_extension:".feature"},Cython:{extensions:[".pxd",".pxi"],group:"Python",primary_extension:".pyx",type:"programming"},D:{color:"#fcd46d",extensions:[".di"],primary_extension:".d",type:"programming",ace_mode:"d"},"D-ObjDump":{lexer:"d-objdump",primary_extension:".d-objdump",type:"data"},"DCPU-16 ASM":{aliases:["dasm16"],extensions:[".dasm"],lexer:"dasm16",primary_extension:".dasm16",type:"programming"},"Darcs Patch":{aliases:["dpatch"],extensions:[".dpatch"],primary_extension:".darcspatch",search_term:"dpatch"},Dart:{primary_extension:".dart",ace_mode:"dart",color:"#98BAD6",type:"programming"},Delphi:{color:"#b0ce4e",extensions:[".lpr"],primary_extension:".pas",type:"programming"},Diff:{primary_extension:".diff"},Dylan:{color:"#3ebc27",primary_extension:".dylan",type:"programming"},"Ecere Projects":{group:"JavaScript",lexer:"JSON",primary_extension:".epj",type:"data"},Ecl:{color:"#8a1267",extensions:[".eclxml"],lexer:"ECL",primary_extension:".ecl",type:"programming"},Eiffel:{color:"#946d57",lexer:"Text only",primary_extension:".e",type:"programming"},Elixir:{color:"#6e4a7e",extensions:[".exs"],primary_extension:".ex",type:"programming"},Elm:{group:"Haskell",lexer:"Haskell",primary_extension:".elm",type:"programming"},"Emacs Lisp":{aliases:["elisp","emacs"],color:"#c065db",extensions:[".emacs"],lexer:"Scheme",primary_extension:".el",type:"programming"},Erlang:{color:"#949e0e",extensions:[".hrl"],primary_extension:".erl",type:"programming"},"F#":{color:"#b845fc",extensions:[".fsi",".fsx"],lexer:"FSharp",primary_extension:".fs",search_term:"ocaml",type:"programming"},FORTRAN:{color:"#4d41b1",extensions:[".F",".F03",".F08",".F77",".F90",".F95",".FOR",".FPP",".f",".f03",".f08",".f77",".f95",".for",".fpp"],lexer:"Fortran",primary_extension:".f90",type:"programming"},Factor:{color:"#636746",primary_extension:".factor",type:"programming"},Fancy:{color:"#7b9db4",extensions:[".fancypack"],filenames:["Fakefile"],primary_extension:".fy",type:"programming"},Fantom:{color:"#dbded5",primary_extension:".fan",type:"programming"},Forth:{color:"#341708",extensions:[".forth",".fth"],lexer:"Text only",primary_extension:".fth",type:"programming"},GAS:{extensions:[".S"],group:"Assembly",primary_extension:".s",type:"programming"},Genshi:{primary_extension:".kid"},"Gentoo Ebuild":{group:"Shell",lexer:"Bash",primary_extension:".ebuild"},"Gentoo Eclass":{group:"Shell",lexer:"Bash",primary_extension:".eclass"},"Gettext Catalog":{aliases:["pot"],extensions:[".pot"],primary_extension:".po",search_term:"pot",searchable:!1},Go:{color:"#8d04eb",primary_extension:".go",type:"programming",ace_mode:"golang"},Gosu:{color:"#82937f",primary_extension:".gs",type:"programming"},Groff:{extensions:[".1",".2",".3",".4",".5",".6",".7"],primary_extension:".man"},Groovy:{ace_mode:"groovy",color:"#e69f56",primary_extension:".groovy",type:"programming"},"Groovy Server Pages":{aliases:["gsp"],group:"Groovy",lexer:"Java Server Page",primary_extension:".gsp"},HTML:{ace_mode:"html",aliases:["xhtml"],extensions:[".htm",".xhtml"],primary_extension:".html",type:"markup"},"HTML+Django":{extensions:[".mustache"],group:"HTML",lexer:"HTML+Django/Jinja",primary_extension:".mustache",type:"markup"},"HTML+ERB":{aliases:["erb"],extensions:[".html.erb"],group:"HTML",lexer:"RHTML",primary_extension:".erb",type:"markup"},"HTML+PHP":{group:"HTML",primary_extension:".phtml",type:"markup"},HTTP:{primary_extension:".http",type:"data"},Haml:{group:"HTML",primary_extension:".haml",type:"markup"},Handlebars:{lexer:"Text only",primary_extension:".handlebars",type:"markup"},Haskell:{color:"#29b544",extensions:[".hsc"],primary_extension:".hs",type:"programming"},Haxe:{ace_mode:"haxe",color:"#346d51",extensions:[".hxsl"],lexer:"haXe",primary_extension:".hx",type:"programming"},INI:{extensions:[".cfg",".ini",".prefs",".properties"],primary_extension:".ini",type:"data"},"IRC log":{aliases:["irc"],extensions:[".weechatlog"],lexer:"IRC logs",primary_extension:".irclog",search_term:"irc"},Io:{color:"#a9188d",primary_extension:".io",type:"programming"},Ioke:{color:"#078193",primary_extension:".ik",type:"programming"},JSON:{ace_mode:"json",group:"JavaScript",primary_extension:".json",searchable:!1,type:"data"},Java:{ace_mode:"java",color:"#b07219",extensions:[".pde"],primary_extension:".java",type:"programming"},"Java Server Pages":{aliases:["jsp"],group:"Java",lexer:"Java Server Page",primary_extension:".jsp",search_term:"jsp"},JavaScript:{ace_mode:"javascript",aliases:["js","node"],color:"#f15501",extensions:["._js",".bones",".jake",".jsfl",".jsm",".jss",".jsx",".pac",".sjs",".ssjs"],filenames:["Jakefile"],primary_extension:".js",type:"programming"},Julia:{primary_extension:".jl",type:"programming"},Kotlin:{extensions:[".ktm",".kts"],primary_extension:".kt",type:"programming"},LLVM:{primary_extension:".ll"},Lasso:{ace_mode:"lasso",color:"#2584c3",extensions:[".inc",".las",".lasso9",".ldml"],lexer:"Lasso",primary_extension:".lasso",type:"programming"},Less:{ace_mode:"less",group:"CSS",lexer:"CSS",primary_extension:".less",type:"markup"},LilyPond:{extensions:[".ily"],lexer:"Text only",primary_extension:".ly"},"Literate Haskell":{aliases:["lhs"],group:"Haskell",primary_extension:".lhs",search_term:"lhs",type:"programming"},LiveScript:{ace_mode:"ls",aliases:["ls"],color:"#499886",extensions:["._ls"],filenames:["Slakefile"],primary_extension:".ls",type:"programming"},Logtalk:{primary_extension:".lgt",type:"programming"},Lua:{ace_mode:"lua",color:"#fa1fa1",extensions:[".nse",".pd_lua"],primary_extension:".lua",type:"programming"},Makefile:{aliases:["make"],extensions:[".mak",".mk"],filenames:["makefile","Makefile","GNUmakefile"],primary_extension:".mak"},Mako:{extensions:[".mao"],primary_extension:".mako"},Markdown:{ace_mode:"markdown",extensions:[".markdown",".mkd",".mkdown",".ron"],lexer:"Text only",primary_extension:".md",type:"markup",wrap:!0},Matlab:{color:"#bb92ac",primary_extension:".matlab",type:"programming"},Max:{aliases:["max/msp","maxmsp"],color:"#ce279c",lexer:"Text only",primary_extension:".mxt",search_term:"max/msp",type:"programming"},MiniD:{primary_extension:".minid",searchable:!1},Mirah:{color:"#c7a938",extensions:[".duby",".mir",".mirah"],lexer:"Ruby",primary_extension:".druby",search_term:"ruby",type:"programming"},Moocode:{lexer:"MOOCode",primary_extension:".moo"},MoonScript:{primary_extension:".moon",type:"programming"},Myghty:{primary_extension:".myt"},Nemerle:{color:"#0d3c6e",primary_extension:".n",type:"programming"},Nginx:{lexer:"Nginx configuration file",primary_extension:".nginxconf",type:"markup"},Nimrod:{color:"#37775b",extensions:[".nimrod"],primary_extension:".nim",type:"programming"},Nu:{aliases:["nush"],color:"#c9df40",filenames:["Nukefile"],lexer:"Scheme",primary_extension:".nu",type:"programming"},NumPy:{extensions:[".numpyw",".numsc"],group:"Python",primary_extension:".numpy"},OCaml:{ace_mode:"ocaml",color:"#3be133",extensions:[".mli",".mll",".mly"],primary_extension:".ml",type:"programming"},ObjDump:{lexer:"objdump",primary_extension:".objdump",type:"data"},"Objective-C":{aliases:["obj-c","objc"],color:"#438eff",extensions:[".mm"],primary_extension:".m",type:"programming"},"Objective-J":{aliases:["obj-j"],color:"#ff0c5a",extensions:[".sj"],primary_extension:".j",type:"programming"},Omgrofl:{color:"#cabbff",extensions:[".omgrofl"],lexer:"Text only",primary_extension:".omgrofl",type:"programming"},Opa:{primary_extension:".opa",type:"programming"},OpenCL:{group:"C",lexer:"C",primary_extension:".cl",type:"programming"},"OpenEdge ABL":{aliases:["progress","openedge","abl"],primary_extension:".p",type:"programming"},PHP:{ace_mode:"php",color:"#6e03c1",extensions:[".aw",".ctp",".php3",".php4",".php5",".phpt"],filenames:["Phakefile"],primary_extension:".php",type:"programming"},Hack:{ace_mode:"php",color:"#6e03c1",primary_extension:".hh",type:"programming"},Parrot:{color:"#f3ca0a",lexer:"Text only",primary_extension:".parrot",type:"programming"},"Parrot Assembly":{aliases:["pasm"],group:"Parrot",lexer:"Text only",primary_extension:".pasm",type:"programming"},"Parrot Internal Representation":{aliases:["pir"],group:"Parrot",lexer:"Text only",primary_extension:".pir",type:"programming"},Perl:{ace_mode:"perl",color:"#0298c3",extensions:[".PL",".perl",".ph",".plx",".pm6",".pod",".psgi"],primary_extension:".pl",type:"programming"},PowerShell:{ace_mode:"powershell",aliases:["posh"],primary_extension:".ps1",type:"programming"},Prolog:{color:"#74283c",extensions:[".pro"],primary_extension:".prolog",type:"programming"},Puppet:{color:"#cc5555",extensions:[".pp"],filenames:["Modulefile"],primary_extension:".pp",type:"programming"},"Pure Data":{color:"#91de79",lexer:"Text only",primary_extension:".pd",type:"programming"},Python:{ace_mode:"python",color:"#3581ba",extensions:[".pyw",".wsgi",".xpy"],filenames:["wscript"],primary_extension:".py",type:"programming"},"Python traceback":{group:"Python",lexer:"Python Traceback",primary_extension:".pytb",searchable:!1,type:"data"},R:{color:"#198ce7",lexer:"S",primary_extension:".r",type:"programming",ace_mode:"r"},RHTML:{group:"HTML",primary_extension:".rhtml",type:"markup"},Racket:{color:"#ae17ff",extensions:[".rktd",".rktl"],lexer:"Racket",primary_extension:".rkt",type:"programming"},"Raw token data":{aliases:["raw"],primary_extension:".raw",search_term:"raw"},Rebol:{color:"#358a5b",extensions:[".r2",".r3"],lexer:"REBOL",primary_extension:".rebol",type:"programming"},Redcode:{primary_extension:".cw"},Ruby:{ace_mode:"ruby",aliases:["jruby","macruby","rake","rb","rbx"],color:"#701516",extensions:[".builder",".gemspec",".god",".irbrc",".podspec",".rbuild",".rbw",".rbx",".ru",".thor",".watchr"],filenames:["Gemfile","Guardfile","Podfile","Thorfile","Vagrantfile"],primary_extension:".rb",type:"programming"},Rust:{color:"#dea584",lexer:"Text only",primary_extension:".rs",type:"programming"},SCSS:{ace_mode:"scss",group:"CSS",primary_extension:".scss",type:"markup"},SQL:{ace_mode:"sql",primary_extension:".sql",searchable:!1,type:"data"},Sage:{group:"Python",lexer:"Python",primary_extension:".sage",type:"programming"},Sass:{group:"CSS",primary_extension:".sass",type:"markup"},Scala:{ace_mode:"scala",color:"#7dd3b0",primary_extension:".scala",type:"programming"},Scheme:{color:"#1e4aec",extensions:[".sls",".ss"],primary_extension:".scm",type:"programming"},Scilab:{primary_extension:".sci",type:"programming"},Self:{color:"#0579aa",lexer:"Text only",primary_extension:".self",type:"programming"},Shell:{ace_mode:"sh",aliases:["sh","bash","zsh"],filenames:["Dockerfile"],color:"#5861ce",lexer:"Bash",primary_extension:".sh",search_term:"bash",type:"programming"},Smalltalk:{color:"#596706",primary_extension:".st",type:"programming"},Smarty:{primary_extension:".tpl"},"Standard ML":{aliases:["sml"],color:"#dc566d",primary_extension:".sml",type:"programming"},SuperCollider:{color:"#46390b",lexer:"Text only",primary_extension:".sc",type:"programming"},Tcl:{color:"#e4cc98",primary_extension:".tcl",type:"programming"},Tcsh:{extensions:[".csh"],group:"Shell",primary_extension:".tcsh",type:"programming"},TeX:{ace_mode:"latex",aliases:["latex"],extensions:[".aux",".dtx",".ins",".ltx",".sty",".toc"],primary_extension:".tex",type:"markup"},Tea:{primary_extension:".tea",type:"markup"},Textile:{ace_mode:"textile",lexer:"Text only",primary_extension:".textile",type:"markup",wrap:!0},Turing:{color:"#45f715",extensions:[".tu"],lexer:"Text only",primary_extension:".t",type:"programming"},Twig:{group:"PHP",lexer:"HTML+Django/Jinja",primary_extension:".twig",type:"markup"},VHDL:{color:"#543978",lexer:"vhdl",primary_extension:".vhdl",type:"programming"},Vala:{color:"#ee7d06",extensions:[".vapi"],primary_extension:".vala",type:"programming"},Verilog:{color:"#848bf3",lexer:"verilog",primary_extension:".v",type:"programming"},VimL:{aliases:["vim"],color:"#199c4b",filenames:["vimrc","gvimrc"],primary_extension:".vim",search_term:"vim",type:"programming"},"Visual Basic":{color:"#945db7",extensions:[".bas",".frx",".vba",".vbs"],lexer:"VB.net",primary_extension:".vb",type:"programming"},XML:{ace_mode:"xml",aliases:["rss","xsd","xsl","wsdl"],extensions:[".ccxml",".glade",".grxml",".kml",".mxml",".plist",".rdf",".rss",".scxml",".svg",".vxml",".wsdl",".wxi",".wxl",".wxs",".xaml",".xlf",".xliff",".xsd",".xsl",".xul"],filenames:[".classpath",".project"],primary_extension:".xml",type:"markup"},XQuery:{color:"#2700e2",extensions:[".xq",".xqy"],primary_extension:".xquery",type:"programming"},XS:{lexer:"C",primary_extension:".xs"},XSLT:{group:"XML",primary_extension:".xslt",type:"markup"},YAML:{aliases:["yml"],extensions:[".yaml"],filenames:["Procfile"],primary_extension:".yml",type:"markup",ace_mode:"yaml"},eC:{extensions:[".eh"],primary_extension:".ec",search_term:"ec",type:"programming"},mupad:{lexer:"MuPAD",primary_extension:".mu"},ooc:{color:"#b0b77e",lexer:"Ooc",primary_extension:".ooc",type:"programming"},reStructuredText:{aliases:["rst"],extensions:[".rest"],primary_extension:".rst",search_term:"rst",type:"markup",wrap:!0}}};return t});var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(e,t,n,r){typeof r=="undefined"&&(this.Diff_Timeout<=0?r=Number.MAX_VALUE:r=(new Date).getTime()+this.Diff_Timeout*1e3);var i=r;if(e==null||t==null)throw new Error("Null input. (diff_main)");if(e==t)return e?[[DIFF_EQUAL,e]]:[];typeof n=="undefined"&&(n=!0);var s=n,o=this.diff_commonPrefix(e,t),u=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=this.diff_commonSuffix(e,t);var a=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var f=this.diff_compute_(e,t,s,i);return u&&f.unshift([DIFF_EQUAL,u]),a&&f.push([DIFF_EQUAL,a]),this.diff_cleanupMerge(f),f},diff_match_patch.prototype.diff_compute_=function(e,t,n,r){var i;if(!e)return[[DIFF_INSERT,t]];if(!t)return[[DIFF_DELETE,e]];var s=e.length>t.length?e:t,o=e.length>t.length?t:e,u=s.indexOf(o);if(u!=-1)return i=[[DIFF_INSERT,s.substring(0,u)],[DIFF_EQUAL,o],[DIFF_INSERT,s.substring(u+o.length)]],e.length>t.length&&(i[0][0]=i[2][0]=DIFF_DELETE),i;if(o.length==1)return[[DIFF_DELETE,e],[DIFF_INSERT,t]];s=o=null;var a=this.diff_halfMatch_(e,t);if(a){var f=a[0],l=a[1],c=a[2],h=a[3],p=a[4],d=this.diff_main(f,c,n,r),v=this.diff_main(l,h,n,r);return d.concat([[DIFF_EQUAL,p]],v)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},diff_match_patch.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var i=r.lineArray,s=this.diff_main(e,t,!1,n);this.diff_charsToLines_(s,i),this.diff_cleanupSemantic(s),s.push([DIFF_EQUAL,""]);var o=0,u=0,a=0,f="",l="";while(o<s.length){switch(s[o][0]){case DIFF_INSERT:a++,l+=s[o][1];break;case DIFF_DELETE:u++,f+=s[o][1];break;case DIFF_EQUAL:if(u>=1&&a>=1){s.splice(o-u-a,u+a),o=o-u-a;var r=this.diff_main(f,l,!1,n);for(var c=r.length-1;c>=0;c--)s.splice(o,0,r[c]);o+=r.length}a=0,u=0,f="",l=""}o++}return s.pop(),s},diff_match_patch.prototype.diff_bisect_=function(e,t,n){var r=e.length,i=t.length,s=Math.ceil((r+i)/2),o=s,u=2*s,a=new Array(u),f=new Array(u);for(var l=0;l<u;l++)a[l]=-1,f[l]=-1;a[o+1]=0,f[o+1]=0;var c=r-i,h=c%2!=0,p=0,d=0,v=0,m=0;for(var g=0;g<s;g++){if((new Date).getTime()>n)break;for(var y=-g+p;y<=g-d;y+=2){var b=o+y,w;y==-g||y!=g&&a[b-1]<a[b+1]?w=a[b+1]:w=a[b-1]+1;var E=w-y;while(w<r&&E<i&&e.charAt(w)==t.charAt(E))w++,E++;a[b]=w;if(w>r)d+=2;else if(E>i)p+=2;else if(h){var S=o+c-y;if(S>=0&&S<u&&f[S]!=-1){var x=r-f[S];if(w>=x)return this.diff_bisectSplit_(e,t,w,E,n)}}}for(var T=-g+v;T<=g-m;T+=2){var S=o+T,x;T==-g||T!=g&&f[S-1]<f[S+1]?x=f[S+1]:x=f[S-1]+1;var N=x-T;while(x<r&&N<i&&e.charAt(r-x-1)==t.charAt(i-N-1))x++,N++;f[S]=x;if(x>r)m+=2;else if(N>i)v+=2;else if(!h){var b=o+c-T;if(b>=0&&b<u&&a[b]!=-1){var w=a[b],E=o+w-b;x=r-x;if(w>=x)return this.diff_bisectSplit_(e,t,w,E,n)}}}}return[[DIFF_DELETE,e],[DIFF_INSERT,t]]},diff_match_patch.prototype.diff_bisectSplit_=function(e,t,n,r,i){var s=e.substring(0,n),o=t.substring(0,r),u=e.substring(n),a=t.substring(r),f=this.diff_main(s,o,!1,i),l=this.diff_main(u,a,!1,i);return f.concat(l)},diff_match_patch.prototype.diff_linesToChars_=function(e,t){function i(e){var t="",i=0,s=-1,o=n.length;while(s<e.length-1){s=e.indexOf("\n",i),s==-1&&(s=e.length-1);var u=e.substring(i,s+1);i=s+1,(r.hasOwnProperty?r.hasOwnProperty(u):r[u]!==undefined)?t+=String.fromCharCode(r[u]):(t+=String.fromCharCode(o),r[u]=o,n[o++]=u)}return t}var n=[],r={};n[0]="";var s=i(e),o=i(t);return{chars1:s,chars2:o,lineArray:n}},diff_match_patch.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){var r=e[n][1],i=[];for(var s=0;s<r.length;s++)i[s]=t[r.charCodeAt(s)];e[n][1]=i.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;var n=0,r=Math.min(e.length,t.length),i=r,s=0;while(n<i)e.substring(s,i)==t.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},diff_match_patch.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;var n=0,r=Math.min(e.length,t.length),i=r,s=0;while(n<i)e.substring(e.length-i,e.length-s)==t.substring(t.length-i,t.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},diff_match_patch.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(n==0||r==0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;var s=0,o=1;for(;;){var u=e.substring(i-o),a=t.indexOf(u);if(a==-1)return s;o+=a;if(a==0||e.substring(i-o)==t.substring(0,o))s=o,o++}},diff_match_patch.prototype.diff_halfMatch_=function(e,t){function s(e,t,n){var r=e.substring(n,n+Math.floor(e.length/4)),s=-1,o="",u,a,f,l;while((s=t.indexOf(r,s+1))!=-1){var c=i.diff_commonPrefix(e.substring(n),t.substring(s)),h=i.diff_commonSuffix(e.substring(0,n),t.substring(0,s));o.length<h+c&&(o=t.substring(s-h,s)+t.substring(s,s+c),u=e.substring(0,n-h),a=e.substring(n+c),f=t.substring(0,s-h),l=t.substring(s+c))}return o.length*2>=e.length?[u,a,f,l,o]:null}if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length)return null;var i=this,o=s(n,r,Math.ceil(n.length/4)),u=s(n,r,Math.ceil(n.length/2)),a;if(!o&&!u)return null;u?o?a=o[4].length>u[4].length?o:u:a=u:a=o;var f,l,c,h;e.length>t.length?(f=a[0],l=a[1],c=a[2],h=a[3]):(c=a[0],h=a[1],f=a[2],l=a[3]);var p=a[4];return[f,l,c,h,p]},diff_match_patch.prototype.diff_cleanupSemantic=function(e){var t=!1,n=[],r=0,i=null,s=0,o=0,u=0,a=0,f=0;while(s<e.length)e[s][0]==DIFF_EQUAL?(n[r++]=s,o=a,u=f,a=0,f=0,i=e[s][1]):(e[s][0]==DIFF_INSERT?a+=e[s][1].length:f+=e[s][1].length,i&&i.length<=Math.max(o,u)&&i.length<=Math.max(a,f)&&(e.splice(n[r-1],0,[DIFF_DELETE,i]),e[n[r-1]+1][0]=DIFF_INSERT,r--,r--,s=r>0?n[r-1]:-1,o=0,u=0,a=0,f=0,i=null,t=!0)),s++;t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;while(s<e.length){if(e[s-1][0]==DIFF_DELETE&&e[s][0]==DIFF_INSERT){var l=e[s-1][1],c=e[s][1],h=this.diff_commonOverlap_(l,c),p=this.diff_commonOverlap_(c,l);if(h>=p){if(h>=l.length/2||h>=c.length/2)e.splice(s,0,[DIFF_EQUAL,c.substring(0,h)]),e[s-1][1]=l.substring(0,l.length-h),e[s+1][1]=c.substring(h),s++}else if(p>=l.length/2||p>=c.length/2)e.splice(s,0,[DIFF_EQUAL,l.substring(0,p)]),e[s-1][0]=DIFF_INSERT,e[s-1][1]=c.substring(0,c.length-p),e[s+1][0]=DIFF_DELETE,e[s+1][1]=l.substring(p),s++;s++}s++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),r=t.charAt(0),i=n.match(diff_match_patch.nonAlphaNumericRegex_),s=r.match(diff_match_patch.nonAlphaNumericRegex_),o=i&&n.match(diff_match_patch.whitespaceRegex_),u=s&&r.match(diff_match_patch.whitespaceRegex_),a=o&&n.match(diff_match_patch.linebreakRegex_),f=u&&r.match(diff_match_patch.linebreakRegex_),l=a&&e.match(diff_match_patch.blanklineEndRegex_),c=f&&t.match(diff_match_patch.blanklineStartRegex_);return l||c?5:a||f?4:i&&!o&&u?3:o||u?2:i||s?1:0}var n=1;while(n<e.length-1){if(e[n-1][0]==DIFF_EQUAL&&e[n+1][0]==DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],s=e[n+1][1],o=this.diff_commonSuffix(r,i);if(o){var u=i.substring(i.length-o);r=r.substring(0,r.length-o),i=u+i.substring(0,i.length-o),s=u+s}var a=r,f=i,l=s,c=t(r,i)+t(i,s);while(i.charAt(0)===s.charAt(0)){r+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var h=t(r,i)+t(i,s);h>=c&&(c=h,a=r,f=i,l=s)}e[n-1][1]!=a&&(a?e[n-1][1]=a:(e.splice(n-1,1),n--),e[n][1]=f,l?e[n+1][1]=l:(e.splice(n+1,1),n--))}n++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,diff_match_patch.prototype.diff_cleanupEfficiency=function(e){var t=!1,n=[],r=0,i=null,s=0,o=!1,u=!1,a=!1,f=!1;while(s<e.length)e[s][0]==DIFF_EQUAL?(e[s][1].length<this.Diff_EditCost&&(a||f)?(n[r++]=s,o=a,u=f,i=e[s][1]):(r=0,i=null),a=f=!1):(e[s][0]==DIFF_DELETE?f=!0:a=!0,i&&(o&&u&&a&&f||i.length<this.Diff_EditCost/2&&o+u+a+f==3)&&(e.splice(n[r-1],0,[DIFF_DELETE,i]),e[n[r-1]+1][0]=DIFF_INSERT,r--,i=null,o&&u?(a=f=!0,r=0):(r--,s=r>0?n[r-1]:-1,a=f=!1),t=!0)),s++;t&&this.diff_cleanupMerge(e)},diff_match_patch.prototype.diff_cleanupMerge=function(e){e.push([DIFF_EQUAL,""]);var t=0,n=0,r=0,i="",s="",o;while(t<e.length)switch(e[t][0]){case DIFF_INSERT:r++,s+=e[t][1],t++;break;case DIFF_DELETE:n++,i+=e[t][1],t++;break;case DIFF_EQUAL:n+r>1?(n!==0&&r!==0&&(o=this.diff_commonPrefix(s,i),o!==0&&(t-n-r>0&&e[t-n-r-1][0]==DIFF_EQUAL?e[t-n-r-1][1]+=s.substring(0,o):(e.splice(0,0,[DIFF_EQUAL,s.substring(0,o)]),t++),s=s.substring(o),i=i.substring(o)),o=this.diff_commonSuffix(s,i),o!==0&&(e[t][1]=s.substring(s.length-o)+e[t][1],s=s.substring(0,s.length-o),i=i.substring(0,i.length-o))),n===0?e.splice(t-r,n+r,[DIFF_INSERT,s]):r===0?e.splice(t-n,n+r,[DIFF_DELETE,i]):e.splice(t-n-r,n+r,[DIFF_DELETE,i],[DIFF_INSERT,s]),t=t-n-r+(n?1:0)+(r?1:0)+1):t!==0&&e[t-1][0]==DIFF_EQUAL?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,r=0,n=0,i="",s=""}e[e.length-1][1]===""&&e.pop();var u=!1;t=1;while(t<e.length-1)e[t-1][0]==DIFF_EQUAL&&e[t+1][0]==DIFF_EQUAL&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)==e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),u=!0):e[t][1].substring(0,e[t+1][1].length)==e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),u=!0)),t++;u&&this.diff_cleanupMerge(e)},diff_match_patch.prototype.diff_xIndex=function(e,t){var n=0,r=0,i=0,s=0,o;for(o=0;o<e.length;o++){e[o][0]!==DIFF_INSERT&&(n+=e[o][1].length),e[o][0]!==DIFF_DELETE&&(r+=e[o][1].length);if(n>t)break;i=n,s=r}return e.length!=o&&e[o][0]===DIFF_DELETE?s:s+(t-i)},diff_match_patch.prototype.diff_prettyHtml=function(e){var t=[],n=/&/g,r=/</g,i=/>/g,s=/\n/g;for(var o=0;o<e.length;o++){var u=e[o][0],a=e[o][1],f=a.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(s,"&para;<br>");switch(u){case DIFF_INSERT:t[o]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case DIFF_DELETE:t[o]='<del style="background:#ffe6e6;">'+f+"</del>";break;case DIFF_EQUAL:t[o]="<span>"+f+"</span>"}}return t.join("")},diff_match_patch.prototype.diff_text1=function(e){var t=[];for(var n=0;n<e.length;n++)e[n][0]!==DIFF_INSERT&&(t[n]=e[n][1]);return t.join("")},diff_match_patch.prototype.diff_text2=function(e){var t=[];for(var n=0;n<e.length;n++)e[n][0]!==DIFF_DELETE&&(t[n]=e[n][1]);return t.join("")},diff_match_patch.prototype.diff_levenshtein=function(e){var t=0,n=0,r=0;for(var i=0;i<e.length;i++){var s=e[i][0],o=e[i][1];switch(s){case DIFF_INSERT:n+=o.length;break;case DIFF_DELETE:r+=o.length;break;case DIFF_EQUAL:t+=Math.max(n,r),n=0,r=0}}return t+=Math.max(n,r),t},diff_match_patch.prototype.diff_toDelta=function(e){var t=[];for(var n=0;n<e.length;n++)switch(e[n][0]){case DIFF_INSERT:t[n]="+"+encodeURI(e[n][1]);break;case DIFF_DELETE:t[n]="-"+e[n][1].length;break;case DIFF_EQUAL:t[n]="="+e[n][1].length}return t.join("	").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(e,t){var n=[],r=0,i=0,s=t.split(/\t/g);for(var o=0;o<s.length;o++){var u=s[o].substring(1);switch(s[o].charAt(0)){case"+":try{n[r++]=[DIFF_INSERT,decodeURI(u)]}catch(a){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var f=parseInt(u,10);if(isNaN(f)||f<0)throw new Error("Invalid number in diff_fromDelta: "+u);var l=e.substring(i,i+=f);s[o].charAt(0)=="="?n[r++]=[DIFF_EQUAL,l]:n[r++]=[DIFF_DELETE,l];break;default:if(s[o])throw new Error("Invalid diff operation in diff_fromDelta: "+s[o])}}if(i!=e.length)throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+").");return n},diff_match_patch.prototype.match_main=function(e,t,n){if(e==null||t==null||n==null)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},diff_match_patch.prototype.match_bitap_=function(e,t,n){function s(e,r){var s=e/t.length,o=Math.abs(n-r);return i.Match_Distance?s+o/i.Match_Distance:o?1:s}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this,o=this.Match_Threshold,u=e.indexOf(t,n);u!=-1&&(o=Math.min(s(0,u),o),u=e.lastIndexOf(t,n+t.length),u!=-1&&(o=Math.min(s(0,u),o)));var a=1<<t.length-1;u=-1;var f,l,c=t.length+e.length,h;for(var p=0;p<t.length;p++){f=0,l=c;while(f<l)s(p,n+l)<=o?f=l:c=l,l=Math.floor((c-f)/2+f);c=l;var d=Math.max(1,n-l+1),v=Math.min(n+l,e.length)+t.length,m=Array(v+2);m[v+1]=(1<<p)-1;for(var g=v;g>=d;g--){var y=r[e.charAt(g-1)];p===0?m[g]=(m[g+1]<<1|1)&y:m[g]=(m[g+1]<<1|1)&y|((h[g+1]|h[g])<<1|1)|h[g+1];if(m[g]&a){var b=s(p,g-1);if(b<=o){o=b,u=g-1;if(!(u>n))break;d=Math.max(1,2*n-u)}}}if(s(p+1,n)>o)break;h=m}return u},diff_match_patch.prototype.match_alphabet_=function(e){var t={};for(var n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},diff_match_patch.prototype.patch_addContext_=function(e,t){if(t.length==0)return;var n=t.substring(e.start2,e.start2+e.length1),r=0;while(t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var i=t.substring(e.start2-r,e.start2);i&&e.diffs.unshift([DIFF_EQUAL,i]);var s=t.substring(e.start2+e.length1,e.start2+e.length1+r);s&&e.diffs.push([DIFF_EQUAL,s]),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+s.length,e.length2+=i.length+s.length},diff_match_patch.prototype.patch_make=function(e,t,n){var r,i;if(typeof e=="string"&&typeof t=="string"&&typeof n=="undefined")r=e,i=this.diff_main(r,t,!0),i.length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&typeof e=="object"&&typeof t=="undefined"&&typeof n=="undefined")i=e,r=this.diff_text1(i);else if(typeof e=="string"&&t&&typeof t=="object"&&typeof n=="undefined")r=e,i=t;else{if(typeof e!="string"||typeof t!="string"||!n||typeof n!="object")throw new Error("Unknown call format to patch_make.");r=e,i=n}if(i.length===0)return[];var s=[],o=new diff_match_patch.patch_obj,u=0,a=0,f=0,l=r,c=r;for(var h=0;h<i.length;h++){var p=i[h][0],d=i[h][1];!u&&p!==DIFF_EQUAL&&(o.start1=a,o.start2=f);switch(p){case DIFF_INSERT:o.diffs[u++]=i[h],o.length2+=d.length,c=c.substring(0,f)+d+c.substring(f);break;case DIFF_DELETE:o.length1+=d.length,o.diffs[u++]=i[h],c=c.substring(0,f)+c.substring(f+d.length);break;case DIFF_EQUAL:d.length<=2*this.Patch_Margin&&u&&i.length!=h+1?(o.diffs[u++]=i[h],o.length1+=d.length,o.length2+=d.length):d.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(o,l),s.push(o),o=new diff_match_patch.patch_obj,u=0,l=c,a=f)}p!==DIFF_INSERT&&(a+=d.length),p!==DIFF_DELETE&&(f+=d.length)}return u&&(this.patch_addContext_(o,l),s.push(o)),s},diff_match_patch.prototype.patch_deepCopy=function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i=new diff_match_patch.patch_obj;i.diffs=[];for(var s=0;s<r.diffs.length;s++)i.diffs[s]=r.diffs[s].slice();i.start1=r.start1,i.start2=r.start2,i.length1=r.length1,i.length2=r.length2,t[n]=i}return t},diff_match_patch.prototype.patch_apply=function(e,t){if(e.length==0)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);var r=0,i=[];for(var s=0;s<e.length;s++){var o=e[s].start2+r,u=this.diff_text1(e[s].diffs),a,f=-1;if(u.length>this.Match_MaxBits){a=this.match_main(t,u.substring(0,this.Match_MaxBits),o);if(a!=-1){f=this.match_main(t,u.substring(u.length-this.Match_MaxBits),o+u.length-this.Match_MaxBits);if(f==-1||a>=f)a=-1}}else a=this.match_main(t,u,o);if(a==-1)i[s]=!1,r-=e[s].length2-e[s].length1;else{i[s]=!0,r=a-o;var l;f==-1?l=t.substring(a,a+u.length):l=t.substring(a,f+this.Match_MaxBits);if(u==l)t=t.substring(0,a)+this.diff_text2(e[s].diffs)+t.substring(a+u.length);else{var c=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(c)/u.length>this.Patch_DeleteThreshold)i[s]=!1;else{this.diff_cleanupSemanticLossless(c);var h=0,p;for(var d=0;d<e[s].diffs.length;d++){var v=e[s].diffs[d];v[0]!==DIFF_EQUAL&&(p=this.diff_xIndex(c,h)),v[0]===DIFF_INSERT?t=t.substring(0,a+p)+v[1]+t.substring(a+p):v[0]===DIFF_DELETE&&(t=t.substring(0,a+p)+t.substring(a+this.diff_xIndex(c,h+v[1].length))),v[0]!==DIFF_DELETE&&(h+=v[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,i]},diff_match_patch.prototype.patch_addPadding=function(e){var t=this.Patch_Margin,n="";for(var r=1;r<=t;r++)n+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var i=e[0],s=i.diffs;if(s.length==0||s[0][0]!=DIFF_EQUAL)s.unshift([DIFF_EQUAL,n]),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>s[0][1].length){var o=t-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],i.start1-=o,i.start2-=o,i.length1+=o,i.length2+=o}i=e[e.length-1],s=i.diffs;if(s.length==0||s[s.length-1][0]!=DIFF_EQUAL)s.push([DIFF_EQUAL,n]),i.length1+=t,i.length2+=t;else if(t>s[s.length-1][1].length){var o=t-s[s.length-1][1].length;s[s.length-1][1]+=n.substring(0,o),i.length1+=o,i.length2+=o}return n},diff_match_patch.prototype.patch_splitMax=function(e){var t=this.Match_MaxBits;for(var n=0;n<e.length;n++){if(e[n].length1<=t)continue;var r=e[n];e.splice(n--,1);var i=r.start1,s=r.start2,o="";while(r.diffs.length!==0){var u=new diff_match_patch.patch_obj,a=!0;u.start1=i-o.length,u.start2=s-o.length,o!==""&&(u.length1=u.length2=o.length,u.diffs.push([DIFF_EQUAL,o]));while(r.diffs.length!==0&&u.length1<t-this.Patch_Margin){var f=r.diffs[0][0],l=r.diffs[0][1];f===DIFF_INSERT?(u.length2+=l.length,s+=l.length,u.diffs.push(r.diffs.shift()),a=!1):f===DIFF_DELETE&&u.diffs.length==1&&u.diffs[0][0]==DIFF_EQUAL&&l.length>2*t?(u.length1+=l.length,i+=l.length,a=!1,u.diffs.push([f,l]),r.diffs.shift()):(l=l.substring(0,t-u.length1-this.Patch_Margin),u.length1+=l.length,i+=l.length,f===DIFF_EQUAL?(u.length2+=l.length,s+=l.length):a=!1,u.diffs.push([f,l]),l==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(l.length))}o=this.diff_text2(u.diffs),o=o.substring(o.length-this.Patch_Margin);var c=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);c!==""&&(u.length1+=c.length,u.length2+=c.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=c:u.diffs.push([DIFF_EQUAL,c])),a||e.splice(++n,0,u)}}},diff_match_patch.prototype.patch_toText=function(e){var t=[];for(var n=0;n<e.length;n++)t[n]=e[n];return t.join("")},diff_match_patch.prototype.patch_fromText=function(e){var t=[];if(!e)return t;var n=e.split("\n"),r=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(r<n.length){var s=n[r].match(i);if(!s)throw new Error("Invalid patch string: "+n[r]);var o=new diff_match_patch.patch_obj;t.push(o),o.start1=parseInt(s[1],10),s[2]===""?(o.start1--,o.length1=1):s[2]=="0"?o.length1=0:(o.start1--,o.length1=parseInt(s[2],10)),o.start2=parseInt(s[3],10),s[4]===""?(o.start2--,o.length2=1):s[4]=="0"?o.length2=0:(o.start2--,o.length2=parseInt(s[4],10)),r++;while(r<n.length){var u=n[r].charAt(0);try{var a=decodeURI(n[r].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+a)}if(u=="-")o.diffs.push([DIFF_DELETE,a]);else if(u=="+")o.diffs.push([DIFF_INSERT,a]);else if(u==" ")o.diffs.push([DIFF_EQUAL,a]);else{if(u=="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+a)}r++}}return t},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){var e,t;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?t=this.start2+",0":this.length2==1?t=this.start2+1:t=this.start2+1+","+this.length2;var n=["@@ -"+e+" +"+t+" @@\n"],r;for(var i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case DIFF_INSERT:r="+";break;case DIFF_DELETE:r="-";break;case DIFF_EQUAL:r=" "}n[i+1]=r+encodeURI(this.diffs[i][1])+"\n"}return n.join("").replace(/%20/g," ")},this.diff_match_patch=diff_match_patch,this.DIFF_DELETE=DIFF_DELETE,this.DIFF_INSERT=DIFF_INSERT,this.DIFF_EQUAL=DIFF_EQUAL,define("vendors/diff_match_patch",function(e){return function(){var t,n;return t||e.diff_match_patch}}(this));var CryptoJS=CryptoJS||function(e,t){var n={},r=n.lib={},i=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),s=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,e=e.sigBytes;this.clamp();if(r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return s.create(n,t)}}),o=n.enc={},u=o.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((i&15).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return s.create(n,t/2)}},a=o.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-8*(r%4);return s.create(n,t)}},f=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=s.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,u=i/(4*o),u=t?e.ceil(u):e.max((u|0)-this._minBufferSize,0),t=u*o,i=e.min(4*t,i);if(t){for(var a=0;a<t;a+=o)this._doProcessBlock(r,a);a=r.splice(0,t),n.sigBytes-=i}return s.create(a,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=l.extend({init:function(){this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return c.HMAC.create(e,n).finalize(t)}}});var c=n.algo={};return n}(Math);(function(e){function t(e,t,n,r,i,s,o){return e=e+(t&n|~t&r)+i+o,(e<<s|e>>>32-s)+t}function n(e,t,n,r,i,s,o){return e=e+(t&r|n&~r)+i+o,(e<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return e=e+(t^n^r)+i+o,(e<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return e=e+(n^(t|~r))+i+o,(e<<s|e>>>32-s)+t}var s=CryptoJS,o=s.lib,u=o.WordArray,o=o.Hasher,a=s.algo,f=[];(function(){for(var t=0;64>t;t++)f[t]=4294967296*e.abs(e.sin(t+1))|0})(),a=a.MD5=o.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var o=0;16>o;o++){var u=s+o,a=e[u];e[u]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360}for(var u=this._hash.words,a=u[0],c=u[1],p=u[2],d=u[3],o=0;64>o;o+=4)16>o?(a=t(a,c,p,d,e[s+o],7,f[o]),d=t(d,a,c,p,e[s+o+1],12,f[o+1]),p=t(p,d,a,c,e[s+o+2],17,f[o+2]),c=t(c,p,d,a,e[s+o+3],22,f[o+3])):32>o?(a=n(a,c,p,d,e[s+(o+1)%16],5,f[o]),d=n(d,a,c,p,e[s+(o+6)%16],9,f[o+1]),p=n(p,d,a,c,e[s+(o+11)%16],14,f[o+2]),c=n(c,p,d,a,e[s+o%16],20,f[o+3])):48>o?(a=r(a,c,p,d,e[s+(3*o+5)%16],4,f[o]),d=r(d,a,c,p,e[s+(3*o+8)%16],11,f[o+1]),p=r(p,d,a,c,e[s+(3*o+11)%16],16,f[o+2]),c=r(c,p,d,a,e[s+(3*o+14)%16],23,f[o+3])):(a=i(a,c,p,d,e[s+3*o%16],6,f[o]),d=i(d,a,c,p,e[s+(3*o+7)%16],10,f[o+1]),p=i(p,d,a,c,e[s+(3*o+14)%16],15,f[o+2]),c=i(c,p,d,a,e[s+(3*o+5)%16],21,f[o+3]));u[0]=u[0]+a|0,u[1]=u[1]+c|0,u[2]=u[2]+p|0,u[3]=u[3]+d|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words;for(t=0;4>t;t++)n=e[t],e[t]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360}}),s.MD5=o._createHelper(a),s.HmacMD5=o._createHmacHelper(a)})(Math),define("vendors/crypto",function(e){return function(){var t,n;return t||e.CryptoJS}}(this)),define("utils/hash",["vendors/crypto"],function(e){function a(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function f(e,t){var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),r=n.length,i=t?Math.ceil((r*3+1>>2)/t)*t:r*3+1>>2,s=new Uint8Array(i);for(var o,u,f=0,l=0,c=0;c<r;c++){u=c&3,f|=a(n.charCodeAt(c))<<18-6*u;if(u===3||r-c===1){for(o=0;o<3&&l<i;o++,l++)s[l]=f>>>(16>>>o&24)&255;f=0}}return s}function l(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65}function c(e){var t,n="";for(var r=e.length,i=0,s=0;s<r;s++){t=s%3,s>0&&s*4/3%76===0&&(n+="\r\n"),i|=e[s]<<(16>>>t&24);if(t===2||e.length-s===1)n+=String.fromCharCode(l(i>>>18&63),l(i>>>12&63),l(i>>>6&63),l(i&63)),i=0}return n.replace(/A(?=A$|$)/g,"=")}function h(e){var t="";for(var n,r=e.length,i=0;i<r;i++)n=e[i],t+=String.fromCharCode(n>251&&n<254&&i+5<r?(n-252)*1073741824+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>247&&n<252&&i+4<r?(n-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>239&&n<248&&i+3<r?(n-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>223&&n<240&&i+2<r?(n-224<<12)+(e[++i]-128<<6)+e[++i]-128:n>191&&n<224&&i+1<r?(n-192<<6)+e[++i]-128:n);return t}function p(e){var t,n,r=e.length,i=0;for(var s=0;s<r;s++)n=e.charCodeAt(s),i+=n<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;t=new Uint8Array(i);for(var o=0,u=0;o<i;u++)n=e.charCodeAt(u),n<128?t[o++]=n:n<2048?(t[o++]=192+(n>>>6),t[o++]=128+(n&63)):n<65536?(t[o++]=224+(n>>>12),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63)):n<2097152?(t[o++]=240+(n>>>18),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63)):n<67108864?(t[o++]=248+(n>>>24),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63)):(t[o++]=252+n/1073741824,t[o++]=128+(n>>>24&63),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(n&63));return t}var t="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",n=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},r=function(e){var t=e&255,n=t.toString(16).toUpperCase();while(n.length<2)n="0"+n;return n},i=function(e){return r(e>>8)+r(e)},s=function(e){return i(e>>16)+i(e)},o=function(e){e=n(e);var r=0,i=0,s=0;r^=-1;for(var o=0,u=e.length;o<u;o++)s=(r^e.charCodeAt(o))&255,i="0x"+t.substr(s*9,8),r=r>>>8^i;return(r^-1).toString()},u=function(t){return String(e.MD5(t))};return{crc32:o,md5:u,hex8:r,hex16:i,hex32:s,atob:function(e){return h(f(e))},btoa:function(e){return c(p(e))}}}),define("utils/gravatar",["hr/hr","hr/utils","utils/hash"],function(e,t,n){return{get:function(e,r){return r=t.defaults({},r||{},{size:64,defaultImage:"mm"}),"https://secure.gravatar.com/avatar/"+n.md5(e.toLowerCase().trim())+"?size="+r.size+"&default="+encodeURIComponent(r.defaultImage)}}}),define("models/user",["hr/utils","hr/hr","utils/gravatar","utils/loading","core/backends/rpc","models/command"],function(e,t,n,r,i,s){var o=t.Logger.addNamespace("user"),u=t.Model.extend({defaults:{name:null,userId:null,email:null,settings:{}},idAttribute:"userId",initialize:function(){return u.__super__.initialize.apply(this,arguments),this},avatar:function(e){return n.get(this.get("email"),e)},settings:function(t,n){var r=this;n=e.defaults(n||{},{prepare:!0});if(n.prepare){var i=r.get("settings."+t);i||r.set("settings."+t,{})}return{all:function(e){return r.get("settings."+t,e)},get:function(e,n){return r.get("settings."+t+"."+e,n)},set:function(e,n){return r.set("settings."+t+"."+e,n)},save:function(){return r.saveSettings()},change:function(n,i,s){var o=[];return s=s||[],e.size(s)?o=e.map(s,function(e){return"change:settings."+t+"."+e}):o.push("change:settings."+t),r.on(o.join(" "),n,i)},open:function(){s.run("settings",t)}}},saveSettings:function(e){var t=this;return e=e||this.get("settings"),r.show(i.execute("auth/settings",e).then(function(e){t.set("settings",e)}))}});return u}),define("core/user",["hr/hr","models/user"],function(e,t){var n=new t;return n}),define("collections/users",["hr/utils","hr/hr","core/backends/rpc","models/user"],function(e,t,n,r){var i=t.Collection.extend({model:r,getById:function(e){return this.find(function(t){return t.get("userId")==e})},getCollaborators:function(){var e=this;return n.execute("users/list").then(function(t){e.reset(t)})}});return i}),define("core/collaborators",["hr/utils","hr/hr","collections/users","utils/alerts"],function(e,t,n,r){var i=new n;return i.on("add",function(e){r.show(e.get("name")+" just joined the workspace",5e3)}),i.on("remove",function(e){r.show(e.get("name")+" just left the workspace",5e3)}),i}),define("utils/filesync",["hr/promise","hr/hr","vendors/diff_match_patch","utils/hash","core/user","core/collaborators","utils/dialogs"],function(e,t,n,r,i,s,o){var u=t.Logger.addNamespace("filesync"),a=function(e){return r.hex32(r.crc32(e))},f=t.Class.extend({defaults:{file:null,colors:["#1abc9c","#9b59b6","#e67e22","#16a085","#c0392b","#2980b9","#f39c12","#8e44ad"]},modes:{ASYNC:"async",SYNC:"sync",READONLY:"readonly"},initialize:function(){f.__super__.initialize.apply(this,arguments),this.diff=new n,this.selections={},this.cursors={},this.synced=!1,this.file=null,this.envId=null,this.envOptions=null,this.mode=this.modes.SYNC,this.ping=!1,this.participants=[],this.syncState=!1,this.timeOfLastLocalChange=Date.now(),this.modified=!1,this.timer=setInterval(_.bind(this._intervalPing,this),15e3),this.patchQueue=new t.Queue({task:this.patchContent,context:this}),this.options.file&&this.setFile(this.options.file),t.Offline.on("state",function(e){if(t.Offline.isConnected())return;this.envId&&this.updateEnv(this.envId,_.extend({},this.envOptions,{reset:!1}))},this)},setMode:function(e){this.mode=e,this.trigger("mode",e)},getMode:function(){return this.mode},updateUserCursor:function(e,t){return this.isSync()?this.sendCursor(e,t):this},updateUserSelection:function(e,t,n,r){return this.isSync()?this.sendSelection(e,t,n,r):this},updateContent:function(e){if(!e||this.isReadonly())return;this.hash_value_t0=this.hash_value_t1,this.content_value_t1=e,this.hash_value_t1=a(this.content_value_t1);var t=this.diff.patch_make(this.content_value_t0,this.content_value_t1),n=this.diff.patch_toText(t);this.content_value_t0=this.content_value_t1,this.timeOfLastLocalChange=Date.now(),this.sendPatch(n,this.hash_value_t0,this.hash_value_t1),this.file.modifiedState(!0)},_intervalPing:function(){if(!this.isSync())return;this.synced==0?this.sendSync():(this.sendPing(),this.setSyncState(this.ping==1),this.ping=!1)},isSync:function(){return this.envId!=null&&this.getMode()==this.modes.SYNC},isReadonly:function(){return this.getMode()==this.modes.READONLY},isSyncStable:function(){return this.isSync()&&this.syncState},setContent:function(e){var t,n=this.sync;this.sync=!1;var r=this.diff.patch_make(this.content_value_t0,e);return this.hash_value_t1=a(e),t=this.content_value_t0,this.content_value_t0=e,this.content_value_t1=e,this.trigger("content",e,t,r),this.sync=n,this},patchContent:function(e){u.log("receive patch ",e);if(!e||!e.patch||!e.hashs.before||!e.hashs.after)return u.error("Invalid patch data"),!1;if(this.hash_value_t1==e.hashs.after)return!1;var t=this.diff.patch_fromText(e.patch),n=this.diff.patch_apply(t,this.content_value_t0);if(n.length<2||_.compact(n[1]).length!=n[1].length)return u.error("invalid application of ",t,n),this.sendSync(),!1;var r=n[0],i=a(r);return Date.now()-this.timeOfLastLocalChange>2e3&&i!=e.hashs.after?(u.warn("invalid version -> resync"),this.sendSync(),!1):(this.setContent(r),!0)},patchesToOps:function(e){return _.chain(e).map(function(e,t){var n=e.start1;return _.map(e.diffs,function(e,t){var r=e[1],i=e[0];i=i>0?"insert":i==0?null:"remove";var s=i?{type:i,content:r,index:n}:null;return i?n+=r.length:n+=r.length,s})}).flatten().compact().value()},updateEnv:function(e,n){var r=this;this.send("close"),_.isObject(e)&&(n=e,e=this.envId),n=_.defaults({},n||{},{sync:!1,reset:!1});if(!e)return this;if(this.file.isNewfile()||!t.Offline.isConnected())n.sync=!1;n.reset=n.sync?!1:n.reset,this.envOptions=n,this.envId=e,u.log("update env with",this.envId,n,t.Offline.isConnected()),this.content_value_t0=this.content_value_t0||"",this.content_value_t1=this.content_value_t1||"",n.reset&&(this.hash_value_t0=null,this.hash_value_t1=null,this.content_value_t0="",this.content_value_t1=""),this.trigger("update:env",n),this.setParticipants([]),n.sync?(r.setMode(r.modes.SYNC),this.socket().then(function(e){u.log("creating socket"),e.on("connect",function(){u.log("socket connect")}),e.on("connect_failed",function(){u.warn("socket connect failed")}),e.on("disconnect",function(){u.log("socket disconnect"),r.setSyncState(!1)}),e.on("connecting",function(){u.log("socket connecting ...")}),e.on("message",function(e){if(!r.isSync())return;r.ping=!0;if(e.action==null||e.environment==null||r.envId!=e.environment)return;e.path&&(!r.file||e.path!=r.file.path())&&r.trigger("file:path",e.path);switch(e.action){case"cursor":e.from!=i.get("userId")&&r.cursorMove(e.from,e.cursor.x,e.cursor.y);break;case"select":e.from!=i.get("userId")&&r.selectionMove(e.from,e.start.x,e.start.y,e.end.x,e.end.y);break;case"participants":e.participants!=null&&r.setParticipants(e.participants);break;case"sync":e.content!=null&&(r.setContent(e.content),r.synced=!0),e.participants!=null&&r.setParticipants(e.participants),e.state!=null&&r.file.modifiedState(e.state);break;case"patch":r.patchQueue.defer(e);break;case"modified":e.state!=null&&r.file.modifiedState(e.state)}r.setSyncState(!0)}),r.file!=null&&!r.file.isNewfile()?r.sendLoad(r.file.path()):r.sendSync()})):n.reset?(this.setMode(r.modes.READONLY),this.file.download().then(function(e){r.file.modifiedState(!1),r.setContent(e),r.setMode(r.modes.ASYNC)},function(e){u.error("Error for offline sync: ",e),r.trigger("close")})):(this.setMode(r.modes.ASYNC),this.setContent(this.content_value_t1||""))},setFile:function(e,t){t=_.defaults({},t||{},{sync:!1,reset:!0,autoload:!0});if(!e.isValid()){u.error("invalid file for sync ",e);return}u.log("init file with options ",t),this.file=e,this.file!=null&&(this.file.on("set",_.partial(this.setFile,this.file,t),this),this.file.on("modified",this.trigger.bind(this,"sync:modified")),this.file.on("loading",this.trigger.bind(this,"sync:loading")),this.trigger("file:mode",this.file.mode()),t.autoload&&this.on("file:path",function(e){this.file.getByPath(e)},this),this.updateEnv(this.file.syncEnvId(),t))},socket:function(){var t=this,n=require("core/box");if(this._socket)return e(this._socket);if(this.envId!=null)return n.socket("filesync").then(function(e){return t._socket=e,t._socket});throw new Error("need 'envId' to create sync socket")},closeSocket:function(){var e=this;if(!this._socket)return;this_socket=null},setSyncState:function(e){return this.syncState=e,this.trigger("sync:state",this.syncState),this},cursorMove:function(e,t,n){return i.get("userId")==e?this:(this.cursors[e]={x:t,y:n,color:this.participantColor(e)},this.trigger("cursor:move",e,this.cursors[e]),this)},selectionMove:function(e,t,n,r,s){return i.get("userId")==e?this:(this.selections[e]={color:this.participantColor(e),start:{x:t,y:n},end:{x:r,y:s}},this.trigger("selection:move",e,this.selections[e]),this)},cursorPosByindex:function(e,t){var n=0,r=0;t=t||this.content_value_t0;if(e<0)return[n,r];for(var i=0;i<t.length;i++){var s=t[i];if(e==i)break;n+=1,s=="\n"&&(n=0,r+=1)}return{x:n,y:r}},cursorIndexBypos:function(e,t,n){var r=0,i=0,s=0;n=n||this.content_value_t0;for(var o=0;o<n.length;o++){s=o;var u=n[o];if(e==r&&t==i)break;r+=1,u=="\n"&&(r=0,i+=1)}return s},cursorApplyOps:function(e,t,n){var r,i;n=n||this.content_value_t0,t=t||[],r=this.cursorIndexBypos(e.x,e.y,n);for(var s in t){var o=t[s];r<o.index||(i=o.type=="insert"?1:-1,r+=i*o.content.length)}return r},setParticipants:function(e){return this.participants=_.chain(e).map(function(e,t){return e.user=s.getById(e.userId),e.user?(e.color=this.options.colors[t%this.options.colors.length],e):(u.error("participant non user:",e.userId),null)},this).compact().value(),this.participantIds=_.pluck(e,"userId"),u.log("update participants",this.participantIds),this.trigger("participants"),_.each(this.cursors,function(e,t){if(_.contains(this.participantIds,t))return;this.trigger("cursor:remove",t),delete this.cursors[t]},this),_.each(this.selections,function(e,t){if(_.contains(this.participantIds,t))return;this.trigger("selection:remove",t),delete this.selections[t]},this),_.each(this.participants,function(e){this.cursorMove(e.userId,e.cursor.x,e.cursor.y),this.selectionMove(e.userId,e.selection.start.x,e.selection.start.y,e.selection.end.x,e.selection.end.y)},this),this},participantColor:function(e){return _.reduce(this.participants,function(t,n){return n.userId==e?n.color:t},"#ff0000")},send:function(e,t){return this.isSync()?(this.envId!=null&&e!=null?(t=_.extend({},t||{},{action:e,from:i.get("userId"),token:i.get("token"),environment:this.envId}),this.socket().then(function(e){e.json.send(t)})):this.setSyncState(!1),this):this},sendPatch:function(e,t,n){return this.send("patch",{patch:e,hashs:{before:t,after:n}})},sendCursor:function(e,t){if(e==null||t==null)return;return this.send("cursor",{cursor:{x:e,y:t}})},sendSelection:function(e,t,n,r){if(e==null||t==null||n==null||r==null)return;return this.send("select",{start:{x:e,y:t},end:{x:n,y:r}})},sendPing:function(){return this.send("ping")},sendLoad:function(e){return this.send("load",{path:e})},sendSync:function(){return this.send("sync"),!0},save:function(){var t=this,n=function(n){return t.send("save",n),e()};return this.getMode()==this.modes.ASYNC&&(n=function(e){return t.file.write(t.content_value_t1,e.path).then(function(e){t.file.modifiedState(!1),e!=t.file.path()&&t.trigger("file:path",e)},function(e){t.trigger("error",e)})}),this.file.isNewfile()?o.prompt("Save as","",this.file.filename()).then(function(e){return n({path:e})}):n({})},close:function(){clearInterval(this.timer),this.file.modifiedState(!1),this.send("close"),this.off()}});return f}),define("utils/uploader",["hr/hr","hr/promise","hr/dom","hr/utils"],function(e,t,n,r){var i=e.Logger.addNamespace("uploader");try{XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(e){function t(e){return e.charCodeAt(0)&255}var n=Array.prototype.map.call(e,t),r=new Uint8Array(n);this.send(r)})}catch(s){}var o=e.Class.extend({defaults:{directory:null},initialize:function(){return o.__super__.initialize.apply(this,arguments),this.directory=this.options.directory,this.codebox=this.directory.codebox,this.lock=!1,this.maxFileSize=10485760,this},connect:function(e){var t=this;e.on("change",function(e){e.preventDefault(),t.upload(this.files)})},upload:function(e){var n=t.defer(),i=0,s=this;return s.lock==1?t.reject("Upload already in progress"):(i=r.reduce(e,function(e,t){return e+(t.size!=null?t.size:0)},0),r.reduce(e,function(e,t){return e.then(function(){return s.uploadFile(t)})},t({})).then(function(){n.resolve()},function(e){n.reject(e)},function(e){n.notify(e)}),n.promise)},uploadFile:function(e){var n=this,r=t.defer(),s=e.webkitRelativePath||e.name,o=function(e){i.error("error uploading",s,":",e),n.trigger("error",e),n.lock=!1,r.reject(e)},u=function(e){i.log("notify ",s,e),n.trigger("state",e),r.notify({filename:s,percent:e})},a=function(e){i.log("end",e),n.trigger("end",e),n.lock=!1,r.resolve(e)};if(e.name=="."||e.name=="..")return t();if(e.name==null||e.size==null||e.size>=n.maxFileSize)return t.reject(new Error("Invalid file or file too big"));n.lock=!0,i.log("upload file ",s," in ",n.directory.exportUrl(),e.size,"/",e.size);var f=function(t){var r=new XMLHttpRequest,f=r.upload,l=(new Date).getTime(),c=n.directory.exportUrl()+s;if(t.target.result==null){o(new Error("Error reading file"));return}i.log("start uploading ",s),f.file=e,f.downloadStartTime=l,f.currentStart=l,f.currentProgress=0,f.startData=0,f.addEventListener("progress",function(t){if(t.lengthComputable){var n=Math.round(t.loaded*100/e.size);u(n)}},!1),r.open("PUT",c,!0),r.onreadystatechange=function(e){if(r.status!=200){o(new Error(r.status+": "+r.responseText)),e.preventDefault();return}},r.sendAsBinary(t.target.result),u(0),r.onload=function(){r.status==200&&a(r.responseText||"")}},l=new FileReader;return l.onloadend=f,l.readAsBinaryString(e),r.promise}});return o}),define("utils/clipboard",["hr/hr","hr/utils"],function(e,t){var n={file:{string:function(e){return e}}},r=e.Class.extend({initialize:function(){return this.data=null,this},hasData:function(e){return this.data?!this.type||this.type==this.data.type:!1},setData:function(e,t,n){this.data={type:e,value:t,options:n||{}},this.trigger("data",this.data)},clear:function(){this.data=null,this.trigger("data",this.data)},getRaw:function(){return this.data},getData:function(e){if(!this.data)return null;if(this.data.type==e)return this.data.value;if(!n[this.data.type]&&!n[this.data.type][e])throw new Error("No converters from "+this.data.type+" to "+e);return n[this.data.type][e](this.data.value)}});return new r}),define("models/file",["hr/promise","hr/utils","hr/hr","core/backends/rpc","core/backends/vfs","core/debug/manager","models/command","utils/string","utils/url","utils/languages","utils/filesync","utils/dialogs","utils/uploader","utils/clipboard","core/operations"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=n.Logger.addNamespace("files"),m=n.Model.extend({defaults:{name:"",size:0,mtime:0,mime:"",href:"",exists:!0,offline:!1,exportUrl:null},idAttribute:"href",initialize:function(){return m.__super__.initialize.apply(this,arguments),this.codebox=this.options.codebox||require("core/box"),this.newFileContent=this.options.newFileContent||"",this.modified=!1,this._loading=!1,this._uniqueId=Date.now()+t.uniqueId("file"),this.read=this.download,this.on("file:change:delete",function(){v.log("file "+this.path()+" is deleted"),this.destroy()},this),this.on("files:change:create files:change:delete file:change:folder",function(){v.log("file updated in "+this.path()),this.refresh()},this),this.listenTo(this.codebox,"box:watch:change",function(e){if(!this.isValid())return;e.data.path==this.path()&&this.trigger("file:change:"+e.data.change,e.data),t.contains(["create","delete"],e.data.change)&&this.isChild(e.data.path)&&this.trigger("files:change:"+e.data.change,e.data)}),this.listenTo(this.codebox,"box:files:write",function(e){e.data.path==this.path()&&this.trigger("file:write",e.data)}),this},modifiedState:function(e){if(this.modified==e)return;this.modified=e,this.trigger("modified",this.modified)},loading:function(t){var n=this;if(e.isPromise(t))return n.loading(!0),t.fin(function(){n.loading(!1)}),t;if(this._loading==t)return;this._loading=t,this.trigger("loading",this._loading)},vfsRequest:function(e,t,n){return i.execute(e,n,{url:t})},canOpen:function(){return this.get("offline")||n.Offline.isConnected()},open:function(e,n){var r=require("core/files");return t.isObject(e)&&(n=e,e=this),r.open(e,n)},isValid:function(){return this.get("href","").length>0},vfsFullUrl:function(){return this.codebox.baseUrl+this.vfsUrl.apply(this,arguments)},exportUrl:function(){return this.get("exportUrl")?this.get("exportUrl"):this.vfsFullUrl()},vfsUrl:function(e,t){e=this.path(e);var n=window.location.pathname;n.substring(0,n.lastIndexOf("/")+1);var r=n+"vfs"+e;return t==null&&(t=this.isDirectory()),t&&!u.endsWith(r,"/")&&(r+="/"),r},path:function(e){if(e==null){if(this.get("href").length==0)return null;e=a.parse(this.get("href")).pathname.replace("/vfs","")}return u.endsWith(e,"/")&&(e=e.slice(0,-1)),e.length==0&&(e="/"),e[0]!="/"&&(e="/"+e),e},mode:function(e){return f.get_mode_byextension(this.extension())},color:function(e,t){return this.isDirectory()?t:f.get_color_byext(this.extension(),t)},parentPath:function(e){return e=this.path(e),e=="/"?"/":e.split("/").slice(0,-1).join("/")},filename:function(e){return e=this.path(e),e=="/"?"/":e.split("/").slice(-1).join("/")},isDirectory:function(){return this.get("mime")=="inode/directory"||this.get("mime")=="inode/symlink"&&this.get("linkStat.mime")=="inode/directory"},isNewfile:function(){return!this.get("exists")},isOffline:function(){return this.get("offline")},isRoot:function(){return this.path()=="/"},isGit:function(){return this.path()=="/.git"},isChild:function(e){var n=t.filter(e.split("/"),function(e){return e.length>0}),r=t.filter(this.path().split("/"),function(e){return e.length>0});return n.length==r.length+1},isSublevel:function(e){var n=t.filter(e.split("/"),function(e){return e.length>0}),r=t.filter(this.path().split("/"),function(e){return e.length>0});return n.length>r.length},isHidden:function(){return this.get("name","").indexOf(".")==0},extension:function(){return"."+this.get("name").split(".").pop()},getBreakpoints:function(){return s.breakpoints.getFileBreakpoints(this.path())},setBreakpoints:function(e){return s.breakpoints.setFileBreakpoints(this.path(),e)},clearBreakpoints:function(){return this.setBreakpoints([])},syncEnvId:function(){return this.isNewfile()?"temporary://"+this._uniqueId:"file://"+this.path()},icon:function(){var e={"picture-o":[".png",".jpg",".gif",".tiff",".jpeg",".bmp",".webp",".svg"],music:[".mp3",".wav"],film:[".avi",".mp4"]};if(!this.isDirectory()){var n=this.extension().toLowerCase();return t.reduce(e,function(e,r,i){return t.contains(r,n)?i:e},"file-text-o")}return"folder"},paths:function(){return t.map(this.path().split("/"),function(e,t,n){var r=n.slice(0,t).join("/")+"/"+e;return{path:r,url:this.codebox.vBaseUrl+r,name:e}},this)},getByPath:function(n){var r=this;n=this.path(n);if(n=="/"){var i={name:this.codebox.get("name"),size:0,mtime:0,mime:"inode/directory",href:location.protocol+"//"+location.host+"/vfs/",exists:!0};return this.set(i),e(i)}var s=this.parentPath(n),o=this.filename(n);return this.loading(this.vfsRequest("listdir",this.vfsUrl(s,!0)).then(function(n){var i=t.find(n,function(e){return e.name==o});return i!=null?(i.exists=!0,r.set(i),e(i)):e.reject(new Error("Can't find file"))}))},getChild:function(e){var t=this.path()+"/"+e,n=new m({box:this.box});return n.getByPath(t).then(function(){return n})},refresh:function(){var e=this;return this.getByPath(this.path()).then(function(){e.trigger("refresh")})},download:function(n,r){var i,s,o=this;t.isObject(n)&&(r=n,n=null);if(this.isNewfile()&&!n)return e(this.newFileContent);r=t.defaults(r||{},{redirect:!1});if(!r.redirect)return this.loading(this.vfsRequest("read",this.vfsUrl(n,!1)).then(function(e){return e}));window.open(this.exportUrl(),"_blank")},write:function(e,t){var n=this;return this.loading(this.vfsRequest("write",this.vfsUrl(t,!1),e).then(function(){return n.path(t)}))},listdir:function(n){var r=this;if(!this.isDirectory())throw"Try getting files in a non directory";return n=t.defaults(n||{},{order:"name",group:!0}),this.loading(this.vfsRequest("listdir",this.vfsUrl(null,!0)).then(function(i){var s=t.map(i,function(e){return new m({codebox:r.codebox},e)});return s=t.sortBy(s,function(e){return e.get(n.order).toLowerCase()}),n.group&&(groups=t.groupBy(s,function(e){return e.isDirectory()?"directory":"file"}),s=[].concat(groups.directory||[]).concat(groups.file||[])),e(s)}))},createFile:function(e){return this.loading(this.vfsRequest("create",this.vfsUrl(null,!0)+"/"+e))},mkdir:function(e){return this.loading(this.vfsRequest("mkdir",this.vfsUrl(null,!0)+"/"+e+"/"))},remove:function(){var e=this;return this.loading(this.vfsRequest("remove",this.vfsUrl(null)))},rename:function(e){var t=this.parentPath(),n=t+"/"+e;return this.loading(this.vfsRequest("special",this.vfsUrl(n),{renameFrom:this.path()}))},copyTo:function(e,t){t=t||this.get("name");var n=e+"/"+t;return this.loading(this.vfsRequest("special",this.vfsUrl(n),{copyFrom:this.path()}))},copyFile:function(e,t){t=t||e.split("/").pop();var n=this.path()+"/"+t;return this.loading(this.vfsRequest("special",this.vfsUrl(n,!1),{copyFrom:e}))},run:function(){var t=this.path();return r.execute("run/file",{file:t}).then(function(t){return o.run("terminal.open",t.shellId),e(t)},function(e){c.alert("Error running this file","An error occurred when trying to run this file ("+t+"): "+(e.message||e))})},actionRun:function(e){return e&&e.preventDefault(),this.run()},actionRefresh:function(e){return e&&e.preventDefault(),this.refresh()},actionCreate:function(t){var n=this;return t&&t.preventDefault(),c.prompt("Create a new file","","newfile.txt").then(function(t){return t.length>0?n.createFile(t):e.reject(new Error("Name is too short"))})},actionMkdir:function(t){var n=this;t&&t.preventDefault(),c.prompt("Create a new directory","","newdirectory").then(function(t){return t.length>0?n.mkdir(t):e.reject(new Error("Name is too short"))})},actionRename:function(t){var n=this;return t&&t.preventDefault(),c.prompt("Rename","",this.get("name")).then(function(t){return t.length>0?n.rename(t):e.reject(new Error("Name is too short"))})},actionRemove:function(n){var r=this;return n&&n.preventDefault(),c.confirm("Do your really want to remove '"+t.escape(this.get("name"))+"'?").then(function(t){return t!=1?e.reject(new Error("No confirmation")):r.remove()})},actionDownload:function(e){var t=this;return e&&e.preventDefault(),t.download({redirect:!0})},actionUpload:function(e){var n=this;e=t.defaults({},e||{},{directory:!1,multiple:!0});var r=new h({directory:this}),i=$("input.cb-file-uploader");if(i.length==0){var i=$("<input>",{type:"file","class":"cb-file-uploader"});i.appendTo($("body"))}i.hide(),i.prop("webkitdirectory",e.directory),i.prop("directory",e.directory),i.prop("multiple",e.multiple),i.change(function(e){e.preventDefault(),d.start("files.upload",function(t){return r.upload(e.currentTarget.files).progress(function(e){n.trigger("uploadProgress",e),t.progress(e.percent)}).fin(function(){i.remove()})},{title:"Uploading"})}),i.trigger("click")},contextMenu:function(){var e=this,n=require("core/files");return function(){var r=[];if(!e.isDirectory()){var i=n.getHandlers(e);t.each(i,function(t){r.push({type:"action",title:t.name,icons:{menu:t.icon},action:function(){return t.open(e)}})}),r.push({type:"divider"})}return e.isRoot()||(r.push({type:"action",title:"Rename...",action:function(){return e.actionRename()}}),r.push({type:"action",title:"Delete "+(e.isDirectory()?"Folder":"File"),action:function(){return e.actionRemove()}}),r.push({type:"divider"})),e.isDirectory()?r.push({type:"action",title:"Paste",flags:p.hasData("file")?"":"disabled",action:function(){if(p.hasData("file")){var t=p.getData("file"),n=p.getRaw().options.cut==1,r=new m;return r.getByPath(t).then(function(){return r.copyTo(e.path())}).then(function(){if(n==0)return;return p.clear(),r.remove()}).fail(function(e){v.error("error copy",e.stack,e)}).done(function(){r.destroy()})}}}):(r.push({type:"action",title:"Copy",action:function(){p.setData("file",e.path())}}),r.push({type:"action",title:"Cut",action:function(){p.setData("file",e.path(),{cut:!0})}})),r.push({type:"divider"}),e.isDirectory()?(r.push({type:"action",title:"New file",action:function(){return e.actionCreate()}}),r.push({type:"action",title:"New folder",action:function(){return e.actionMkdir()}}),r.push({type:"menu",title:"Add",offline:!1,menu:[{type:"action",title:"Files",offline:!1,action:function(){e.actionUpload()}},{type:"action",title:"Directories",offline:!1,action:function(){e.actionUpload({directory:!0})}}]}),r.push({type:"divider"}),r.push({type:"action",title:"Refresh",action:function(){return e.actionRefresh()}}),r.push({type:"action",title:"Find in Folder",action:function(){return o.run("code.search",{path:e.path()})}}),r.push({type:"action",title:"Open Terminal",action:function(){return o.run("terminal.open",null,{cwd:e.path()})}})):(r.push({type:"action",title:"Download",action:function(){e.actionDownload()}}),r.push({type:"divider"}),r.push({type:"action",title:"Run",offline:!1,action:function(){e.actionRun()}})),r}}});return m}),define("models/shell",["hr/utils","hr/hr","utils/hash","vendors/socket.io"],function(e,t,n){var r=t.Logger.addNamespace("terminal"),i=t.Model.extend({defaults:{},initialize:function(){return i.__super__.initialize.apply(this,arguments),this.codebox=this.options.codebox,this.shellId=this.options.shellId||e.uniqueId("term"),this},connect:function(){var e=this;return this.socket!=null?this:(this.codebox.socket("shells",!0).done(function(t){e.socket=t,e.socket.on("disconnect",function(){e.trigger("disconnect")}),e.socket.on("connect",function(){e.trigger("connect")}),e.socket.emit("shell.open",{shellId:e.shellId,opts:{rows:80,columns:24,id:e.shellId,cwd:e.options.cwd}}),e.socket.on("shell.output",function(t){e.trigger("data",n.atob(t))})}),this)},disconnect:function(){return this.socket!=null&&this.socket.disconnect(),this},write:function(e){return this.socket!=null&&this.socket.emit("shell.input",n.btoa(e)),this},resize:function(e,t){return this.socket!=null&&this.socket.emit("shell.resize",{rows:t,columns:e}),this},forceDestroy:function(){return this.socket!=null&&this.socket.emit("shell.destroy"),this}});return i}),define("models/box",["hr/hr","vendors/socket.io","core/backends/rpc","core/backends/vfs","models/file","models/shell","models/user","models/command","core/operations"],function(e,t,n,r,i,s,o,u,a){var f=e.Logger.addNamespace("codebox"),l=e.Model.extend({defaults:{status:null,name:null,uptime:0,mtime:0,collaborators:0,auth:!1},initialize:function(){return l.__super__.initialize.apply(this,arguments),this.baseUrl=this.options.baseUrl||"",this.user=null,this.root=new i({codebox:this}),this.root.getByPath("/"),this.on("change:name",function(){this.root.set("name",this.get("name"))},this),this.activeFile="/",this.listenEvents(),this},listenEvents:function(){var t=this;r.on("event",function(e){var n="box:"+e.event.replace(/\./g,":");t.trigger(n,e)}),this.socket("events").then(function(n){n.on("event",function(e){var n="box:"+e.event.replace(/\./g,":");t.trigger(n,e)}),n.on("connect",function(t){e.Offline.check()}),n.on("connect_failed",function(t){e.Offline.check()}),n.on("reconnect",function(t){e.Offline.check()}),n.on("reconnect_failed",function(t){e.Offline.check()}),n.on("error",function(t){e.Offline.check()}),n.on("disconnect",function(t){e.Offline.check()})})},socket:function(e,n){if(this.baseUrl==null)return Q.reject(new Error("Need a 'baseUrl'"));var r=window.location.pathname;r=r.substring(1,r.lastIndexOf("/")+1)+"socket.io";var i=t.connect([window.location.protocol,"//",window.location.host].join("")+"/"+e,{"force new connection":n,resource:r});return Q(i)},auth:function(e,t){var r=this;return this.user=t||new o,n.execute("auth/join",e).then(function(e){return r.user.set(e),r.set("auth",!0),Q(e)},function(e){return r.set("auth",!1),Q.reject(e)})},isAuth:function(){return this.get("auth",!1)},status:function(){var e=this;return n.execute("box/status").then(function(t){return e.set(t),Q(t)})},collaborators:function(){return n.execute("users/list")},searchFiles:function(e){return n.execute("search/files",{query:e})},runner:function(e){return n.execute("run/list",e)},openTerminal:function(e,t){var n=u.run("terminal.open",e);if(t){var r=a.start(t.id,null,_.defaults(t,{action:function(){n.openTab()}}));n.on("tab:close",function(){r.destroy()})}return n},run:function(e){var t=this;return n.execute("run/project",e).then(function(e){return e.terminal=t.openTerminal(e.shellId),Q(e)})},openShell:function(e){return e=e||{},e.codebox=this,new s(e)},listShells:function(){return n.execute("shells/list")},procHttp:function(){return n.execute("proc/http")},setActiveFile:function(e){_.isString(e)||(e.isNewfile()?e=null:e=e.path());if(this.activeFile==e)return;return this.activeFile=e,this.trigger("file.active",this.activeFile),this}});return l}),define("text!resources/templates/settings/base.html",[],function(){return'<% _.each(fields, function(field, key) { \n    var field_name = namespace+"_"+key;\n    var field_selector = "settings."+namespace+"."+key;\n    var field_value = session.user.get(field_selector, defaults[key] || field.default);\n%>\n<div class="form-group">\n    <label class="col-lg-3 control-label" for="<%- field_name %>"><%- field.label %></label>\n    <div class="col-lg-9">\n        <% if (field.type == "text") { %>\n        <input class="form-control" type="text" name="<%- field_name %>" value="<%- field_value %>" />\n        <% } else if (field.type == "password") { %>\n        <input class="form-control" type="password" name="<%- field_name %>" value="<%- field_value %>" />\n        <% } else if (field.type == "number") { %>\n        <input class="form-control" type="number" name="<%- field_name %>" step="<%- field.step || 1 %>" min="<%- field.min || 0 %>" max="<%- field.max || 10 %>" value="<%- field_value %>" />\n        <% } else if (field.type == "checkbox") { %>\n        <input type="checkbox" name="<%- field_name %>" <% if(field_value) { %>checked<% } %> />\n        <% } else if (field.type == "action") { %>\n        <button class="btn btn-default" data-settings-action="<%- key %>"><%= field.content %></button>\n        <% } else if (field.type == "textarea") { %>\n        <textarea class="form-control" name="<%- field_name %>" rows="<%- field.rows || 3 %>"><%- field_value %></textarea>\n        <% } else if (field.type == "select") { %>\n        <select class="form-control" name="<%- field_name %>">\n            <% _.each(field.options, function(opname, opkey) { %>\n                <option\n                    value="<%- opkey %>"\n                    <% if (field_value == opkey) { %>\n                        selected\n                    <% } %>\n                    ><%- opname %></option>\n            <% }) %>\n        </select>\n        <% } %>\n\n        <% if (field.help) { %>\n        <p class="help-block"><%= field.help %></p>\n        <% } %>\n    </div>\n</div>\n<% }) %>'}),define("views/settings/base",["hr/utils","hr/dom","hr/hr","text!resources/templates/settings/base.html"],function(e,t,n,r){var i=n.View.extend({template:r,defaults:{namespace:"",title:"",settings:{}},events:{"click button[data-settings-action]":"triggerFieldAction"},initialize:function(){i.__super__.initialize.apply(this,arguments);var e=require("core/user");this.namespace=this.options.namespace,this.title=this.options.title||this.namespace,this.fields=this.options.fields||{},this.defaults=this.options.defaults||{},this.user=e.settings(this.namespace)},setField:function(e,t){return this.fields[e]=t,this.trigger("field:change",e),this},templateContext:function(){return{fields:this.fields,defaults:this.defaults,namespace:this.namespace,section:this.section}},triggerFieldAction:function(e){e.preventDefault();var n=t(e.currentTarget),r=n.data("settings-action");if(!this.fields[r])return;n.button("loading"),this.fields[r].trigger(r).fin(function(){n.button("reset")})},submit:function(){var t={},n=this,r={text:function(e){return e.val()},password:function(e){return e.val()},textarea:function(e){return e.val()},number:function(e){return e.val()},select:function(e){return e.val()},checkbox:function(e){return e.is(":checked")},action:function(e){return null}};return e.each(this.fields,function(e,i){var s=r[e.type](n.$("*[name='"+n.namespace+"_"+i+"']"));s!==null&&(t[i]=s)}),t}});return i}),define("core/settings",["hr/hr","models/command","core/user","views/settings/base"],function(e,t,n,r){var i=e.Logger.addNamespace("settings"),s={sections:{},add:function(e,t){var o,u;_.isFunction(e)||(t=e,e=r);var a=new e(t),u=a.namespace||"main";i.log("add settings tab",u),s.sections[u]=a;var f=t.defaults||{},l=n.get("settings."+u,{});return l=_.defaults(l,f),n.set("settings."+u,l),a},each:function(e,t){_.each(s.sections,e,t)},save:function(){var e={};return this.each(function(t){e[t.namespace]=t.submit()}),n.saveSettings(_.extend({},n.get("settings"),e))},open:function(e){t.run("settings",e)},user:function(e){return n.settings(e)}};return s}),define("core/search",["hr/hr","hr/dom","hr/utils","hr/promise","models/command","core/user","core/settings"],function(e,t,n,r,i,s,o){var u=e.Logger.addNamespace("search"),a=e.Class.extend({defaults:{},initialize:function(){return a.__super__.initialize.apply(this,arguments),this.handlers={},this.settings=o.add({namespace:"search",title:"Search",fields:{}}),this},handler:function(e,t){if(!e.id||!e.title)throw new Error("Need 'id' and 'title' to define a search handler");return this.handlers[e.id]=n.defaults({getter:t},e,{}),this.settings.setField(e.id,{label:e.title,type:"checkbox","default":!0}),u.log("add search handler",e.id),this},normResult:function(e,t){return t instanceof i?t:new i({},n.defaults(t,{category:e.title}))},query:function(e){var t=this,i=[],o=r.defer(),u=n.size(this.handlers),a=0;return n.each(this.handlers,function(f,l){var c=function(r){a+=1,r&&o.notify({category:{title:f.title},results:n.chain(r).map(n.partial(t.normResult,f)).value(),query:e}),a==u&&(i.length==0?o.resolve(u):o.reject(i))};if(!s.get("settings.search."+l,!0))return c();r().then(function(){return f.getter(e)}).then(c,function(e){return i.push(e),c()})}),o.promise}});return new a}),define("core/box",["hr/promise","hr/hr","models/box","core/search","core/collaborators"],function(e,t,n,r,i){var s=new n;return s.on("box:users:add",function(e){i.add(e.data)}),s.on("box:users:remove",function(e){i.remove(i.getById(e.data.userId))}),s}),define("collections/commands",["hr/utils","hr/hr","models/command"],function(e,t,n){var r=t.Collection.extend({model:n,comparator:function(e){return e.get("position",2)}});return r}),define("core/globals",["require"],function(e){return window.codebox={require:e},window.codebox}),define("models/addon",["hr/promise","hr/utils","hr/dom","hr/hr","core/globals"],function(e,t,n,r){var i=r.Logger.addNamespace("addon"),s=r.Model.extend({defaults:{name:"",description:"",version:"0.0.1",author:"",client:{main:"client"},state:"notloaded"},url:function(){var e=window.location.pathname;return e=e.substring(0,e.lastIndexOf("/")+1),e+"static/addons/"+this.get("name")},load:function(n,r){var s,o,u,a,f=this,l=e.defer();i.log("Load",this.get("name")),s="addon."+this.get("name"),o=this.get("client.main","client"),u={context:s,baseUrl:this.url(),waitSeconds:200,paths:{},map:{"*":{css:"require-tools/css/css",less:"require-tools/less/less",text:"require-tools/text/text"}}},u.paths[o]="addon-built",a=require.config(u);var c=function(e,t){if(e){f.set("state","error"),i.error("Error loading ",f.get("name")),i.error(e),l.reject(e);return}f.set("state","loaded"),l.resolve(t)};return a([o],function(e){t.isFunction(e)?e(n,r,c):c(null,e)},c),l.promise.timeout(5e3,"This addon took to long to load (> 5seconds)")},version:function(){return parseInt(this.get("version").replace(/\./g,""))}});return s}),define("collections/addons",["hr/promise","hr/utils","hr/hr","core/backends/rpc","models/addon","utils/dialogs"],function(e,t,n,r,i,s){var o=n.Collection.extend({model:i,defaults:t.defaults({loader:"getInstalled",loaderArgs:[]},n.Collection.prototype.defaults),initialize:function(){return o.__super__.initialize.apply(this,arguments),this.resolved={},this.provides={},this},getInstalled:function(e){var n=this;return e=t.defaults(e||{},{}),r.execute("addons/list").then(function(e){n.add(t.values(e))})},getByName:function(e){return this.find(function(t){return t.get("name")==e})},isInstalled:function(e){return t.isString(e)||(e=e.get("name")),this.getByName(e)!=null},isDefault:function(e){t.isString(e)||(e=e.get("name"));var n=this.getByName(e);return n==null?!1:n.get("default")},isUpdated:function(e){var t=this.getByName(e.get("name"));return t?t.version()>=e.version():!0},getState:function(e){t.isString(e)||(e=e.get("name"));var n=this.getByName(e);return n==null?null:n.get("state")},install:function(e){var t=this;return r.execute("addons/install",{git:e}).then(function(e){return t.reset([]),t.getInstalled()})},uninstall:function(e){var t=this;return r.execute("addons/uninstall",{name:e}).then(function(){return t.reset([]),t.getInstalled()})},checkCycles:function(){var n=this,r=this.map(function(e,t){return{name:e.get("name"),provides:e.get("client.provides",[]).concat(),consumes:e.get("client.consumes",[]).concat(),i:t}}),i=!0,s=[];while(r.length&&i)i=!1,r.concat().forEach(function(e){var t=e.consumes.concat(),o=!0;for(var u=0;u<t.length;u++){var a=t[u];n.resolved[a]?e.consumes.splice(e.consumes.indexOf(a),1):o=!1}if(!o)return;r.splice(r.indexOf(e),1),e.provides.forEach(function(e){n.resolved[e]=!0}),s.push(n.models[e.i]),i=!0});if(r.length){var o={};return r.forEach(function(e){delete e.config,e.consumes.forEach(function(t){if(o[t]==0)return;o[t]||(o[t]=[]),o[t].push(e.name)}),e.provides.forEach(function(e){o[e]=!1})}),Object.keys(o).forEach(function(e){o[e]==0&&delete o[e]}),console.error("Could not resolve dependencies of these plugins:",r),console.error("Resolved services:",t.keys(n.resolved)),console.error("Missing services:",o),e.reject(new Error("Could not resolve dependencies"))}return e(s)},loadAll:function(){var n=this,r=[];return this.checkCycles().then(function(i){return t.reduce(i,function(i,s){return i.then(function(){return s.load({},t.pick(n.provides,s.get("client.consumes",[]))).fail(function(t){return t.addon=s,e.reject(t)}).then(function(r){return t.extend(n.provides,r||{}),e()},function(t){return r.push({error:t,addon:s.get("name")}),e()})})},e({}))}).then(function(){if(t.size(r)>0){var n=new Error("Error with "+t.size(r)+" addons");return n.addonsError=r,e.reject(n)}return e()})},loadFromIndex:function(i){var s,o=this,u=i,a=require("core/box"),f=function(n){return o.reset(t.map(n.addons,function(e){return t.extend(e["package"],{git:e.git})})),e(n)};return s=n.Cache.get("addons",u),s?f(s):r.execute("addons/registry",{url:i}).then(function(e){return n.Cache.set("addons",u,e,3600),f(e)})}});return o}),define("core/addons",["hr/hr","hr/promise","models/command","collections/commands","collections/addons","utils/dialogs","core/operations"],function(e,t,n,r,i,s,o){var u=new i;return n.register("addons.install",{category:"Add-ons",title:"Install",description:"Install with GIT Url",offline:!1,action:function(e){return t().then(function(){return e?e:s.prompt("Install a new addon","GIT url for the addon:","")}).then(function(e){return o.start("addon.install",function(t){return u.install(e)},{title:"Installing add-on"})})}}),n.register("addons.uninstall",{category:"Add-ons",title:"Uninstall",description:"Uninstall with name",offline:!1,search:!1,action:function(e){return t().then(function(){return e?e:s.prompt("Uninstall an addon","Name of the addon:","")}).then(function(e){return o.start("addon.uninstall",function(t){return u.uninstall(e)},{title:"Uninstalling add-on"})})}}),u}),define("core/session",["hr/utils","hr/hr","core/user","core/box","core/addons","core/collaborators","core/backends/rpc","core/localfs"],function(e,t,n,r,i,s,o,u){return t.Template.extendContext({session:{user:n,box:r,addons:i,collaborators:s}}),t.Offline.check=function(){return o.execute("box/ping").then(function(e){t.Offline.setState(e.ping==1);if(!t.Offline.isConnected())return Q.reject(new Error("No connected"))},function(){t.Offline.setState(!1)})},{prepare:function(){return t.Offline.check().then(function(){return r.status()}).then(function(){return u.init(r.get("name"))})},start:function(e,t){var o=this;return r.auth({email:e,token:t},n).then(function(){return i.getInstalled()}).then(function(){return s.getCollaborators()})},exit:function(){t.Cookies.remove("email"),t.Cookies.remove("token"),location.reload()}}}),define("collections/files",["hr/utils","hr/hr","models/file"],function(e,t,n){var r=t.Collection.extend({model:n});return r}),define("models/tab",["hr/utils","hr/hr"],function(e,t){var n=t.Model.extend({defaults:{id:null,title:"",state:"",active:!1},initialize:function(){n.__super__.initialize.apply(this,arguments),this.manager=this.options.manager,this._closed=!1;if(!this.manager)throw"Need a manager to create a tab"},getNthTab:function(e,t){var n=null;e=e||this.section;var r=e.indexOf(this);if(r<0)return;return r+=t,r<0||r>=e.size()?null:e.models[r]},prevTab:function(e){return this.getNthTab(e,-1)},nextTab:function(e){return this.getNthTab(e,1)},isActive:function(){return this.get("active")},active:function(){this.section.each(function(e){e.set("active",e.id==this.id)},this),this.manager.activeTab=this.id,this.manager.activeSection=this.section.sectionId,this.manager.trigger("active",this)},disactive:function(){this.model.set("active",!1)},changeSection:function(e){return this.manager.changeTabSection(this,e)},splitSection:function(){this.changeSection(e.uniqueId("section"))},close:function(e){var t=this,n=this.id,r=null;if(this._closed)return Q.reject(new Error("Tab already been closed"));var i=function(i){if(!i&&!e||this._closed)return;return t._closed=!0,t.isActive()&&(r=t.prevTab()||t.nextTab()||t.prevTab(t.manager.tabs)||t.nextTab(t.manager.tabs)),t.view.trigger("tab:close"),t.view.remove(),t.manager.trigger("tab:"+n+":close"),t.manager.trigger("tabs:close",n),r&&r.active(),t.destroy(),t.manager.checkSections(),t.manager.tabs.size()==0&&t.manager.openDefault(),Q(n)};return Q(this.view.tabCanBeClosed()).then(i,i)},closeOthers:function(){this.section.each(function(e){e.id!=this.id&&e.close()},this),this.active()},snapshot:function(){return{id:this.id,type:this.get("type"),section:this.section.sectionId,active:this.isActive()}}});return n}),define("collections/tabs",["hr/utils","hr/hr","models/tab"],function(e,t,n){var r=t.Collection.extend({model:n,getById:function(e){return this.find(function(t){return t.id==e})},getActive:function(){return this.find(function(e){return e.get("active")})}});return r}),define("views/commands/manager",["hr/hr","models/command","collections/commands","utils/keyboard"],function(e,t,n,r){var i=e.List.Item.extend({flagsClasses:{active:"active",disabled:"disabled",hidden:"hidden"},getFlagsClass:function(){return _.map(this.model.get("flags","").split(" "),function(e){return this.flagsClasses[e]||""},this).join(" ")}}),s=e.List.extend({Collection:n,register:function(e,n,r){n=_.extend({},n,{id:e,action:r});var i=t.register(n);return this.collection.add(i),i},getById:function(e){return this.collection.find(function(t){return t.id==e})},run:function(e){var t=this.getById(e);return t?t.run.apply(t,Array.prototype.slice.call(arguments,1)):!1}},{CommandItem:i});return s}),define("views/commands/menu",["hr/utils","hr/dom","hr/hr","views/commands/manager"],function(e,t,n,r){var i=r.CommandItem.extend({tagName:"li",className:"menu-item",flagsClasses:{active:"",disabled:"disabled",hidden:"hidden"},initialize:function(){return i.__super__.initialize.apply(this,arguments),this._submenu=null,this},remove:function(){return this._submenu&&this._submenu.remove(),i.__super__.remove.apply(this,arguments)},buildAction:function(e){var n=this,r=this.model.get("icons.menu",""),i=t("<a>",{text:this.model.get("title"),href:"#",testId:this.model.id,click:function(t){t.preventDefault(),n.list.trigger("action",n.model),e?e():n.model.run()}});this.model.label()&&t("<span>",{html:this.model.label(),"class":"menu-label"}).appendTo(i),n.model.hasFlag("active")&&(r="check"),n.model.hasFlag("running")&&(r="refresh fa-spin");var s=t("<i>",{"class":"menu-icon fa fa-"+r}).prependTo(i);return i},render:function(){var e=this,n=this.model.get("type"),r=this.model.get("title"),i=this.model.get("icons.menu",""),s=this.$el;s.empty(),s.attr("class",this.className+" "+this.getFlagsClass()+" menu-item-"+n);if(n=="action"){var o=this.buildAction();o.appendTo(s)}else if(n=="checkbox"){var o=this.buildAction(function(){e.model.toggleFlag("active"),e.model.run(e.model.hasFlag("active"))});o.appendTo(s)}else if(n=="divider")s.addClass("divider");else if(n=="label")s.addClass("dropdown-header"),s.text(r),i&&t("<i>",{"class":"menu-icon fa fa-"+i}).prependTo(s);else if(n=="menu"){s.addClass("dropdown-submenu"),s.one("mouseenter",function(){var t=e.submenu();t.$el.appendTo(e.$el),t.render()});var o=this.buildAction(function(){});o.attr("tabindex",-1),o.appendTo(s)}return this.ready()},submenu:function(){return this._submenu||(this._submenu=new s({collection:this.model.menu}),this.listenTo(this._submenu,"action",function(e){this.trigger("action",this.model,e)})),this._submenu}}),s=r.extend({tagName:"ul",className:"dropdown-menu ui-menu",Item:i,defaults:{displayEmptyList:!1},open:function(){this.$el.show()}});return s}),define("utils/contextmenu",["hr/dom","hr/utils","views/commands/menu"],function(e,t,n){var r={lastTimeOpened:0,origin:null,clear:function(){e(".ui-context-menu").removeClass("ui-context-menu"),e("#ui-context-menu").remove()},generateMenu:function(i){t.isFunction(i)&&(i=i());var s=new n;return s.collection.add(i),s.$el.appendTo(e("body")),s.on("action",function(){r.clear()}),s.render(),s},open:function(n,i){r.clear(),r.lastTimeOpened=Date.now();var s=r.generateMenu(n),o=s.$el.width(),u=s.$el.height(),a=e(window).width(),f=e(window).height();i.left+o>a&&(i.left=i.left-o,s.$el.addClass("submenus-right")),i.top+u>f&&(i.top=i.top-u,s.$el.addClass("submenus-top")),s.$el.css(t.extend({position:"fixed","z-index":100},i)),s.$el.attr("id","ui-context-menu"),s.open()},add:function(n,i,s){var o=e(n);s=t.defaults({},s,{textinput:!1});var u=function(e){r.origin=e.type;var t=e.target||e.srcElement;if(!s.textinput&&(t.tagName=="INPUT"||t.tagName=="SELECT"||t.tagName=="TEXTAREA"||t.isContentEditable))return;var n=e.pageX||e.originalEvent.touches[0].pageX,u=e.pageY||e.originalEvent.touches[0].pageY;return r.open(i,{left:n,top:u}),o.addClass("ui-context-menu"),!1};o.on("contextmenu",u),navigator.userAgent.match(/iPad/i)!=null&&o.taphold(u)}};return e(document).on("click",function(e){if(r.lastTimeOpened>Date.now()-600&&r.origin!="contextmenu")return;r.clear()}),e(document).on("contextmenu",function(){r.clear()}),e.fn.contextmenu=function(e){var t=this;return function(){r.add(t,e)}()},r}),define("views/tabs/tab",["hr/utils","hr/dom","hr/hr","models/command","utils/dragdrop","utils/keyboard","utils/contextmenu"],function(e,t,n,r,i,s,o){var u=n.List.Item.extend({className:"component-tab",defaults:{title:"",tabid:"",close:!0},events:{"mousedown .close":"close",dblclick:"open","click .close":"close",click:"open"},states:{modified:"fa-asterisk",warning:"fa-exclamation",offline:"fa-flash",sync:"fa-exchange",loading:"fa fa-refresh fa-spin"},initialize:function(){u.__super__.initialize.apply(this,arguments);var n=this,r=t(document);return this.dropArea=new i.DropArea({view:this,dragType:this.model.manager.drag,handler:function(e){var t=n.list.collection.indexOf(n.model),r=n.list.collection.indexOf(e);r>=0&&r<t&&(t-=1),console.log("drop tab at position",t),n.model.manager.changeTabSection(e,n.list.collection.sectionId,{at:t})}}),this.model.manager.drag.enableDrag({view:this,data:this.model,baseDropArea:this.list.dropArea,start:function(){n.open()}}),o.add(this.$el,e.compact([this.model.manager.options.newTab?{id:"tab.new",type:"action",title:"New Tab",action:function(){n.model.manager.openDefault()}}:null,this.model.manager.options.newTab?{type:"divider"}:null,{id:"tab.close",type:"action",title:"Close",action:function(){n.close()}},{id:"tab.close.others",type:"action",title:"Close Other Tabs",action:function(){n.closeOthers()}},{type:"divider"},{id:"tab.group.new",type:"action",title:"New Group",action:function(){n.model.splitSection()}},{type:"divider"},n.model.manager.layoutCommand])),this},render:function(){this.$el.empty();var n=t("<div>",{"class":"inner",html:this.model.get("title")}).appendTo(this.$el),r=this.model.get("state","").split(" ");return e.each(r,function(e){e&&this.states[e]&&t("<i>",{"class":"state fa "+this.states[e]+" state-"+e}).prependTo(n)},this),t("<a>",{"class":"close",href:"#",html:"&times;"}).prependTo(n),this.$el.toggleClass("active",this.model.isActive()),this.ready()},isActive:function(){return this.$el.hasClass("active")},open:function(e){e!=null&&(e.preventDefault(),e.stopPropagation()),this.model.active()},close:function(e){e!=null&&(e.preventDefault(),e.stopPropagation()),this.model.close()},closeOthers:function(e){this.model.closeOthers()}});return u}),define("views/tabs/base",["hr/utils","hr/dom","hr/hr","utils/dragdrop","utils/keyboard","utils/contextmenu","models/command","collections/commands"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({className:"component-tab-panel",events:{click:"openTab"},shortcuts:{"alt+w":"closeTab","alt+shift+tab":"tabGotoPrevious","alt+tab":"tabGotoNext"},menuTitle:"Tab",initialize:function(){a.__super__.initialize.apply(this,arguments);var e=require("core/commands/menu"),t=require("core/commands/statusbar");return this.tabs=this.parent,this.tab=this.options.tab,this.menu=new o({},{type:"menu",title:this.menuTitle,position:1}),this.tab.manager.options.tabMenu&&e.collection.add(this.menu),this.statusbar=new u,this.statusbar.pipe(t.collection),this.listenTo(this.tab.manager,"active",function(e){var t=e.id==this.tab.id;this.trigger("tab:state",t),this.menu.toggleFlag("hidden",!t),this.statusbar.each(function(e){e.toggleFlag("hidden",!t)})}),this.on("tab:close",function(){this.menu.destroy(),this.statusbar.stopListening(),this.statusbar.each(function(e){e.destroy()})},this),this.setShortcuts(this.shortcuts||{}),this},setShortcuts:function(t,n){var r={};n=n||this;if(!this.tab.manager.options.keyboardShortcuts)return;e.each(t,function(t,i){r[i]=function(){if(!this.isActiveTab())return;e.isFunction(t)||(t=n[t]);if(!t)return;t.apply(n,arguments)}},this),i.bind(r,this)},closeTab:function(e,t){e!=null&&e.preventDefault(),this.tab.close(t)},openTab:function(e){this.tab.active()},setTabTitle:function(e){return this.tab.set("title",e),this},setTabState:function(t,n){var r=(this.tab.get("state")||"").split(" ");return n==null&&(t=!e.contains(r,t)),n?r.push(t):r=e.without(r,t),this.tab.set("state",e.uniq(r).join(" ")),this},setTabId:function(e){return this.tab.set("id",e),this},isActiveTab:function(){return this.tab.manager.isActiveTab(this.tab)},tabCanBeClosed:function(){return!0},tabGotoPrevious:function(e){e&&e.preventDefault();var t=this;setTimeout(function(){var e=t.tab.prevTab();e&&e.active()},0)},tabGotoNext:function(e){e&&e.preventDefault();var t=this;setTimeout(function(){var e=t.tab.nextTab();e&&e.active()},0)}});return a}),define("views/tabs/section",["hr/utils","hr/dom","hr/hr","utils/dragdrop","collections/tabs","views/tabs/tab"],function(e,t,n,r,i,s){var o=n.List.Item.extend({className:"component-tab-content",events:{click:"click"},initialize:function(){o.__super__.initialize.apply(this,arguments),this.$el.append(this.model.view.$el)},render:function(){return this.$el.toggleClass("active",this.model.isActive()),this.ready()},remove:function(){return this.model.view.detach(),o.__super__.remove.apply(this,arguments)},click:function(){this.model.active()}}),u=n.List.extend({Collection:i}),a=u.extend({className:"tabs-section-content",Item:o}),f=u.extend({className:"tabs-section-header",Item:s,events:{dblclick:"openNewtab"},initialize:function(){f.__super__.initialize.apply(this,arguments);var e=this;return this.dropArea=new r.DropArea({view:this,dragType:this.parent.manager.drag,constrain:{x:20,y:20},handler:function(t){t.changeSection(e.parent.sectionId)}}),this},openNewtab:function(){this.parent.manager.activeSection=this.parent.sectionId,this.parent.manager.openDefault()}}),l=n.View.extend({className:"tabs-section",defaults:{},events:{},initialize:function(){l.__super__.initialize.apply(this,arguments);var e=this;return this.manager=this.parent,this.sectionId=this.options.sectionId,this.tabs=new i,this.tabs.sectionId=this.sectionId,this.header=new f({collection:this.tabs},this),this.content=new a({collection:this.tabs},this),this.header.$el.appendTo(this.$el),this.content.$el.appendTo(this.$el),this.on("grid:layout",function(){this.tabs.each(function(e){e.view.trigger("tab:layout")})},this),this},addTab:function(e,t){return e.section=this.tabs,this.tabs.add(e,t),this},removeTab:function(e){return this.tabs.remove(e),this},render:function(){return this.ready()}});return l}),define("views/tabs/manager",["hr/utils","hr/dom","hr/hr","models/command","models/tab","collections/tabs","utils/dragdrop","utils/keyboard","utils/contextmenu","views/grid","views/tabs/tab","views/tabs/base","views/tabs/section"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=n.View.extend({className:"cb-tabs",defaults:{layout:null,layouts:{"Auto Grid":0,"Columns: 1":1,"Columns: 2":2,"Columns: 3":3,"Columns: 4":4},tabMenu:!0,newTab:!0,maxTabsPerSection:-1,draggable:!0,keyboardShortcuts:!0},events:{},initialize:function(t){var n=this;return p.__super__.initialize.apply(this,arguments),this.activeTab=null,this.activeSection=0,this._restored=!1,this.layout=this.options.layout,this.grid=new f({},this),this.grid.$el.appendTo(this.$el),this.drag=new o.DraggableType,this.drag.toggle(this.options.draggable),this.drag.on("drop",function(e,t){!e&&t&&t.splitSection()}),this.layoutCommand=new r({},{type:"menu",title:"Layout"}),e.each(this.options.layouts,function(e,t){var i=new r({},{type:"action",title:t,action:function(){n.setLayout(e)}});this.layoutCommand.menu.add(i),this.on("layout",function(t){i.toggleFlag("active",e==t)})},this),this.tabs=new s,this.restorer={},this.setLayout(this.layout),this},getById:function(e){return this.tabs.getById(e)},getSection:function(t){var n=e.find(this.grid.views,function(e){return e.sectionId==t});return n||(n=new h({sectionId:t},this),this.grid.addView(n)),n},removeSection:function(e){var t=this.getSection(e);return this.grid.removeView(t),this},render:function(){return this.ready()},add:function(t,n,r){var s=null;r=e.defaults(r||{},{type:"unknown",silent:!1,open:!0,title:"untitled",uniqueId:null,section:this.activeSection}),r.uniqueId?s=this.tabs.getById(r.uniqueId):r.uniqueId=e.uniqueId("tab");if(!s){s=new i({manager:this},{type:r.type,id:r.uniqueId,title:r.title}),this.tabs.add(s),s.view=new t(e.extend(n||{},{tab:s}),this),s.view.update();var o=r.section;for(;;){var u=this.getSection(o);if(!(this.options.maxTabsPerSection>0&&u.tabs.size()>=this.options.maxTabsPerSection)){u.addTab(s);break}o=e.uniqueId("tabSection")}}return r.open&&s.active(),this.saveTabs(),s.view},openDefault:function(){this.trigger("tabs:opennew")},setLayout:function(t){if(!e.contains(e.values(this.options.layouts),t))return;this.grid.setLayout(t),this.trigger("layout",t),this.saveTabs()},isActiveTab:function(e){return this.activeTab==e.id},checkSections:function(){e.each(this.grid.views,function(e){if(e.tabs.size()==0){this.grid.removeView(e);return}e.tabs.getActive()==null&&e.tabs.first().active()},this),this.saveTabs()},changeTabSection:function(t,n,r){return e.isString(t)&&(t=this.tabs.getById(t)),t?(n=this.getSection(n),this.options.maxTabsPerSection>0&&n.tabs.size()>=this.options.maxTabsPerSection?!1:(t.section.remove(t),n.addTab(t,r),t.active(),this.checkSections(),!0)):!1},saveTabs:function(){if(!this._restored)return;var t={};t.sections=e.map(this.grid.views,function(e){return{id:e.sectionId,tabs:e.tabs.map(function(e){return e.snapshot()})}}),t.layout=this.grid.columns,n.Storage.set("tabs",t)},addRestorer:function(e,t){return this.restorer[e]=t,this},restoreTabs:function(t){var r=0,i=this;return t=t||n.Storage.get("tabs")||{},this.setLayout(t.layout),Q.all(e.chain(t.sections||[]).map(function(e){return i.getSection(e.id),e.tabs}).flatten().map(function(e){return Q().then(function(){if(!i.restorer[e.type])return;return Q(i.restorer[e.type](e))}).then(function(t){if(!t)return;t.changeSection(e.section),r+=1}).fail(function(){return Q()})}).value()).then(function(){return i._restored=!0,i.checkSections(),r})}},{Panel:c});return n.View.Template.registerComponent("component.tabs",p),p}),define("core/tabs",["views/tabs/manager"],function(e){var t=new e;return t}),define("views/tabs/file",["hr/utils","hr/dom","hr/promise","hr/hr","views/tabs/base","utils/dialogs"],function(e,t,n,r,i,s){var o=i.extend({defaults:{},menuTitle:"Editor",initialize:function(e){o.__super__.initialize.apply(this,arguments);var t=this;this.fileHandler=this.options.handler,this.fileOptions=this.options.fileOptions,this.fileView=null;if(!this.fileHandler||!this.fileHandler.View)throw"Invalid handler for file tab";return this.listenTo(this.model,"set",this.update),this.listenTo(this.model,"destroy",function(){this.closeTab()}),this.on("tab:ready",function(){this.adaptFile()},this),this},render:function(){return this.fileView&&this.fileView.remove(),this.$el.empty(),this.menu.clearMenu(),this.fileView=new this.fileHandler.View({model:this.model},this),this.fileView.update(),this.fileView.$el.appendTo(this.$el),this.adaptFile(),this.ready()},load:function(e,t){var n=this;return t&&(this.fileHandler=t),this.model.getByPath(e).then(null,function(){n.closeTab()}),this},adaptFile:function(){return this.setTabTitle(this.model.get("name","loading...")),this.setTabId(this.fileHandler.id+":"+this.model.syncEnvId()),this.setFileOptions(this.fileOptions),this},tabCanBeClosed:function(){var t=this;return this.model.modified&&!this.model.isNewfile()?s.confirm("Do you really want to close "+e.escape(this.model.get("name"))+" without saving changes?","Your changes will be lost if you don't save them.").then(function(e){return!0},function(){return!1}):!0},setFileOptions:function(e){this.fileOptions=e||{},this.fileView&&this.fileView.trigger("file:options",this.fileOptions)}});return o}),define("views/files/base",["hr/utils","hr/dom","hr/hr","views/tabs/base","models/file","core/box"],function(e,t,n,r,i,s){var o=n.View.extend({defaults:{path:null,base:"/",edition:!0,notifications:!0},events:{},shortcuts:{},initialize:function(e){return o.__super__.initialize.apply(this,arguments),this.model||(this.model=new i({codebox:s})),this.listenTo(this.model,"refresh set",this.update),this.options.path!=null&&this.load(this.options.path),this},templateContext:function(){return{options:this.options,file:this.model,view:this}},render:function(){if(this.model.path()==null)return;return o.__super__.render.apply(this,arguments)},finish:function(){return o.__super__.finish.apply(this,arguments)},load:function(e){var t=this;this.model.getByPath(e).then(function(){t.trigger("file:load")},function(){t.trigger("file:error")})}});return o}),define("views/files/tab",["hr/utils","hr/dom","hr/hr","views/files/base"],function(e,t,n,r){var i=r.extend({shortcuts:{},initialize:function(e){return i.__super__.initialize.apply(this,arguments),this.tab=this.parent,this.tab.setShortcuts(this.shortcuts||{},this),this.fileOptions={},this.on("file:options",function(e){this.fileOptions=e},this),this}});return i}),define("core/files",["hr/promise","hr/utils","hr/hr","models/file","collections/files","core/user","core/box","core/tabs","core/settings","utils/dialogs","views/tabs/file","views/files/base","views/files/tab"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.Logger.addNamespace("files"),a=a.add({namespace:"files",title:"Files",fields:{}}),h=s.settings("files"),p=new i;p.on("add",function(){p.size()>20&&p.shift()});var d=new i,v={};u.addRestorer("file",function(e){var t=e.id.split(":"),n=t[0],r=t.slice(1).join(":"),i=r.indexOf("temporary")==0;return i?null:E(r.replace("file://","")).then(function(){return u.getById(e.id)})});var m=function(e,n){if(!n||!e||!n.name||!n.valid||!n.View&&!n.open)throw"Invalid files handler format";return n=t.defaults(n,{setActive:!1,fallback:!1,position:10}),n.id=e,n.View&&(n.open=function(e,t){var r=e.path(),i=n.id+":"+e.syncEnvId();n.setActive&&d.add(e);var s=u.add(l,{model:e,handler:n,fileOptions:t},{uniqueId:i,type:"file"});s.on("tab:state",function(t){t&&o.setActiveFile(e)}),s.on("tab:close",function(t){n.setActive&&d.remove(e)}),s.setFileOptions(t)}),a.setField(e,{label:n.name,type:"checkbox","default":!0}),v[e]=n,v[e]},g=function(e){return t.chain(v).filter(function(t){return h.get(t.id,!0)&&t.valid(e)}).sortBy(function(e){return e.position||10}).value()},y=function(e){return t.filter(v,function(e){return h.get(e.id,!0)&&e.fallback==1})},b=function(n,r,i){return r.isNewfile()||p.add(r),i=t.defaults(i||{},{line:null,pattern:null}),e(n.open(r,i)).then(function(){o.setActiveFile(r)})},w=function(n,r){var i={};return t.each(v,function(e){i[e.id]=e.name}),t.size(i)==0?e.reject(new Error("No handlers for this file")):f.select("Can't open this file","Sorry, No handler has been found to open this file. Try to find and install an add-on to manage this file or select one of the following handlers:",i).then(function(t){var i=v[t];return e(b(i,n,r))})},E=function(n,i){i=t.defaults({},i||{},{userChoice:null,useFallback:!0,line:null});var s=t.pick(i,["line","pattern"]);if(t.isString(n)){var u=new r({codebox:o});return u.getByPath(n).then(function(){return E(u,i)})}var a=g(n);t.size(a)==0&&i.useFallback&&(a=y());if(t.size(a)==0)return w(n,s);if(t.size(a)==1||i.userChoice!=1)return e(b(t.first(a),n,s));var l={};return t.each(a,function(e){l[e.id]=e.name}),t.size(l)==0?e.reject(new Error("No handlers for this file")):f.select("Open with...","Select one of the following handlers to open this file:",l).then(function(t){var r=v[t];return e(b(r,n,s))})},S=function(e,t,n){e=e||"untitled";var i=new r({newFileContent:t||"",codebox:o},{name:e,size:0,mtime:0,mime:"text/plain",href:location.protocol+"//"+location.host+"/vfs/"+e,exists:!1});return E(i,n)};return{addHandler:m,getHandlers:g,open:E,openNew:S,recent:p,active:d}}),define("text!resources/templates/commands/command.html",[],function(){return'<a href="#" title="<%- command.get(\'title\') %>">\n    <i class="fa <% if (!command.hasFlag("running")) { %>fa-<%- command.get(\'icons.default\') %><% } else { %>fa-refresh fa-spin<% } %>"></i>\n</a>'}),define("views/commands/toolbar",["hr/hr","views/commands/manager","text!resources/templates/commands/command.html"],function(e,t,n){var r=t.CommandItem.extend({className:"menu-item",template:n,events:{"click a":"run"},templateContext:function(){return{command:this.model}},finish:function(){return this.$el.attr("class",this.className+" "+this.getFlagsClass()),this.$("a").tooltip({placement:"right",delay:{show:300,hide:0}}),this.model.get("visible")||this.$el.hide(),r.__super__.finish.apply(this,arguments)},run:function(e){e&&e.preventDefault(),this.model.run()}}),i=t.extend({className:"cb-commands-toolbar",Item:r});return i}),define("core/commands/toolbar",["hr/utils","hr/hr","views/commands/toolbar","core/search"],function(e,t,n,r){var i=new n;return i}),define("views/commands/menubar",["hr/hr","views/commands/manager","views/commands/menu"],function(e,t,n){var r=t.CommandItem.extend({tagName:"div",className:"btn-group menu-command-item",events:{},render:function(){var e=this;this.menu&&this.menu.$el.detach(),this.$el.empty(),this.$el.attr("class",this.className+" "+this.getFlagsClass());var t=$("<button>",{"class":"btn dropdown-toggle",text:this.model.get("title"),"data-toggle":"dropdown"}).appendTo(this.$el);return t.on("click",function(t){if(e.model.hasFlag("disabled")){t.stopPropagation(),t.preventDefault(),e.$el.removeClass("open");return}}),t.one("click",function(t){if(e.model.hasFlag("disabled"))return;e.menu||(e.menu=new n({collection:e.model.menu},e)),e.menu.$el.appendTo(e.$el)}),this.ready()}}),i=t.extend({tagName:"div",className:"cb-commands-menubar",Item:r,register:function(e,t){t=_.extend({},t,{type:"menu",search:!1,id:e});var n=i.__super__.register.call(this,e,t);return n}});return i}),define("views/panels/base",["hr/utils","hr/dom","hr/hr"],function(e,t,n){var r=n.View.extend({defaults:{title:""},events:{},initialize:function(e){return r.__super__.initialize.apply(this,arguments),this.panelId=this.options.panel,this.manager=this.parent,this},open:function(){return this.manager.open(this.panelId),this},close:function(){return this.manager.close(this.panelId),this},toggle:function(e){return e==null&&(e=!this.isActive()),e?this.open():this.close(),this},isActive:function(){return this.manager.isActive(this.panelId)},connectCommand:function(e){var t=this;e.set("action",function(){t.toggle()}),this.parent.panelsCommand.menu.add(e)}});return r}),define("views/panels/file",["hr/utils","hr/dom","hr/hr","views/panels/base"],function(e,t,n,r){var i=r.extend({defaults:{},events:{},FileView:n.View,initialize:function(e){i.__super__.initialize.apply(this,arguments);var t=codebox.require("core/box"),n=codebox.require("core/files");this.listenTo(n.active,"remove",this.detachFile),this.listenTo(t,"file.active",this.update),this.listenTo(t,"box:watch:change",function(e){this.updateFile(e.data.path)}),this.fileViews={}},render:function(){var t=codebox.require("core/box"),n=t.activeFile;return e.each(this.fileViews,function(e){e.detach()}),this.fileViews[n]||(this.fileViews[n]=new this.FileView({path:n})),this.fileViews[n].update(),this.fileViews[n].$el.appendTo(this.$el),this.ready()},detachFile:function(t){var n=e.isString(t)?t:t.path();if(!this.fileViews[n])return;this.fileViews[n].remove(),delete this.fileViews[n]},updateFile:function(t){var n=e.isString(t)?t:t.path();if(!this.fileViews[n])return;this.fileViews[n].update()}});return i}),define("views/panels/manager",["hr/utils","hr/dom","hr/hr","models/command","views/tabs/manager","views/panels/base","views/panels/file"],function(e,t,n,r,i){var s=n.View.extend({className:"cb-panels",defaults:{},events:{},initialize:function(e){var t=this;return s.__super__.initialize.apply(this,arguments),this.tabs=new i({layout:1,layouts:{"Columns: 1":1},tabMenu:!1,newTab:!1,draggable:!1,keyboardShortcuts:!1,maxTabsPerSection:1},this),this.tabs.$el.appendTo(this.$el),this.activePanel=null,this.panelsCommand=new r({},{type:"menu",title:"Panels"}),this.panels={},this},render:function(){return this.ready()},register:function(t,n,r){return r=e.extend({title:t},r||{},{panel:t}),this.panels[t]=new n(r,this),this.panels[t].update(),this.panels[t]},open:function(e){var t=!1;if(e&&this.panels[e]){t=!0;var n=this.tabs.add(i.Panel,{},{title:this.panels[e].options.title,uniqueId:e});n.$el.is(":empty")&&(n.once("tab:close",function(){this.panels[e].trigger("tab:close"),this.panels[e].$el.detach()},this),this.panels[e].$el.appendTo(n.$el),this.panels[e].update())}return this.activePanel=e,t?this.trigger("open",e):this.trigger("close"),this},isActive:function(e){var t=this.tabs.getById(e);return t!=null&&!!t.isActive()},close:function(e){var t=this.tabs.getById(e);t&&t.close()}});return s}),define("core/panels",["views/panels/manager"],function(e){var t=new e;return t}),define("core/commands/menu",["hr/utils","hr/hr","views/commands/menubar","core/box","core/panels","core/tabs","core/session","core/localfs","core/settings"],function(e,t,n,r,i,s,o,u,a){var f=new n;return f.register("view",{title:"View",position:5}).menuSection({id:"themes.settings",category:"View",title:"Settings",description:"Open Theme and View Settings",offline:!1,action:function(){a.open("themes")}}).menuSection([i.panelsCommand]).menuSection([s.layoutCommand]),f.register("file",{title:"File",position:0}).menuSection([{id:"quit",category:"Application",title:"Quit",description:"Close Current Session",shortcuts:["alt+q"],action:o.exit}],{position:1e3}),f}),define("views/commands/statusbar",["hr/hr","views/commands/manager","views/commands/menu"],function(e,t,n){var r=n.extend({className:"cb-commands-menubar"});return r}),define("core/commands/statusbar",["hr/utils","hr/hr","views/commands/statusbar"],function(e,t,n){var r=new n;return r.register("statusbar.sendfeedback",{title:"Send Feedback",position:5,offline:!1,search:!1},function(){window.open("https://github.com/FriendCode/codebox/issues")}),r}),define("text!resources/templates/commands/palette/input.html",[],function(){return'<input type="text" class="form-control palette-input input-sm" value="" placeholder="Search Files or Enter Command" />\n<div class="results"></div>'}),define("text!resources/templates/commands/palette/command.html",[],function(){return'<% if (_.size(command.get("shortcuts")) > 0) { %>\n<span class="label shortcut"><%= command.shortcutText() %></span>\n<% } %>\n\n<i class="fa fa-<%- command.get(\'icons.search\') %>"></i>\n<span class="title">\n<% if (command.get("category")) { %>\n<%- command.get("category") %>:\n<% } %>\n<%- command.get("description") || command.get("title") %>\n</span>\n<% if (command.get("label").length > 0) { %>\n<span class="command-label"><%- command.get("label") %></span>\n<% } %>'}),define("views/commands/palette",["hr/utils","hr/dom","hr/hr","models/command","collections/commands","utils/keyboard","utils/string","text!resources/templates/commands/palette/input.html","text!resources/templates/commands/palette/command.html"],function(e,t,n,r,i,s,o,u,a){var f=i.extend({comparator:function(e){return this.query?-e.textScore(this.query):f.__super__.comparator.apply(this,arguments)}}),l=n.List.Item.extend({className:"command",template:a,events:{click:"run"},templateContext:function(){return{command:this.model}},run:function(e){e&&e.preventDefault(),this.model.run(),this.list.parent.close()}}),c=n.List.extend({Item:l,Collection:f,className:"palette-commands"}),h=n.View.extend({className:"cb-commands-palette close",template:u,defaults:{},events:{"keydown input":"onKeydown","keyup input":"onKeyup",mousedown:"onMousedown"},initialize:function(t){return h.__super__.initialize.apply(this,arguments),this.commands=new c({},this),this.keydownInterval=null,this._keydown=e.bind(function(e){var t=e.which||e.keyCode;t==27&&this.close()},this),this._mousedown=e.bind(function(e){this.close()},this),this},finish:function(){return this.commands.appendTo(this.$(".results")),h.__super__.finish.apply(this,arguments)},isOpen:function(){return!this.$el.hasClass("close")},open:function(){if(this.isOpen())return;this.$el.removeClass("close"),this.$("input").val("").focus(),this.doSearch(""),this.selectItem(0),t(document).bind("keydown",this._keydown),t(document).bind("mousedown",this._mousedown)},close:function(){if(!this.isOpen())return;this.$el.addClass("close"),this.$("input").blur(),t(document).unbind("keydown",this._keydown),t(document).unbind("mousedown",this._mousedown)},toggle:function(){this.isOpen()?this.close():this.open()},clearResults:function(){return this.commands.collection.clear(),this},doSearch:function(t){var n=this,r=[];if(this.commands.collection.query==t)return;this.commands.collection.query&&t&&t.indexOf(this.commands.collection.query)==0?(this.commands.collection.query=t,this.commands.collection.each(function(e){e.textScore(t)==0&&r.push(e)}),this.commands.collection.remove(r),this.commands.collection.sort(),this.selectItem(this.getSelectedItem())):(this.commands.collection.query=t,this.commands.collection.reset([]),this.options.searchHandler(t).then(function(){},function(e){},function(t){n.commands.collection.add(e.filter(t.results,function(e){return!e.hasFlag("disabled")})),n.selectItem(n.getSelectedItem())}))},selectItem:function(e){var e,t=this.$(".results").height();this.selected=e,this.selected>=this.commands.collection.size()&&(this.selected=this.commands.collection.size()-1),this.selected<0&&(this.selected=0),e=0,this.commands.collection.each(function(n){var r,i,s=this.commands.items[n.id];s.$el.toggleClass("selected",e==this.selected),e==this.selected&&(i=s.$el.outerHeight(),r=s.$el.position().top,r>t-i/2?this.$(".results").scrollTop((e+1)*i-t):r<=i/2&&this.$(".results").scrollTop(e*i)),e+=1},this)},getSelectedItem:function(){var e=0;return this.commands.collection.each(function(t,n){var r=this.commands.items[t.id];if(r.$el.hasClass("selected"))return e=n,!1},this),e},openItem:function(e){e==null&&(e=this.getSelectedItem());var t,n=this.commands.collection.at(e);return n?(t=this.commands.items[n.id],t.run()):!1},onKeydown:function(e){var t=e.which||e.keyCode;(t==38||t==40||t==13)&&e.preventDefault();var n=function(){var e=this.getSelectedItem(),n=e;t==38?e-=1:t==40&&(e+=1),e!=n&&this.selectItem(e)}.bind(this);this.keydownInterval&&(clearInterval(this.keydownInterval),this.keydownInterval=null),n(),this.keydownInterval=setInterval(n,600)},onKeyup:function(e){var n=e.which||e.keyCode,r=t(e.currentTarget).val();if(n==27){e.preventDefault();return}n==13&&(e.preventDefault(),this.openItem()),this.keydownInterval&&(clearInterval(this.keydownInterval),this.keydownInterval=null),this.doSearch(r)},onMousedown:function(e){e.stopPropagation()}});return h}),define("core/commands/palette",["views/commands/palette","core/commands/toolbar","core/search"],function(e,t,n){var r=new e({searchHandler:_.bind(n.query,n)});return t.register("palette.toggle",{title:"Palette",description:"Toggle Command Palette",icons:{"default":"search"},position:0,shortcuts:["mod+shift+p","alt+s"]},function(){r.toggle()}),r}),define("utils/css",["hr/utils"],function(e){var t={convertJSON:function(t,n){var r=[];n=e.defaults(n||{},{base:"",namespace:{},joint:"\n"});var i=function(t,s){return e.map(t,function(t,n){var o="",u="",a,f="";return e.isString(t)?n+": "+t+";":(n[0]=="&"?(a=s,f=n):a=s?s+" "+n:n,r.push({selector:a,attr:f,content:i(t,a)}),"")}).join(n.joint)};return i(t),e.map(r,function(e){var t=n.base+" "+(n.namespace[e.selector]||e.selector);return t+=e.attr.replace("&",""),t+" {"+n.joint+e.content+n.joint+"}"}).join(n.joint)}};return e.bindAll(t)}),define("core/themes",["hr/hr","hr/dom","hr/utils","utils/css","core/settings","core/user"],function(e,t,n,r,i,s){var o=e.Logger.addNamespace("themes"),u=s.settings("themes"),a=null,f={},l=t("<style>",{type:"text/css"}),c=i.add({namespace:"themes",title:"Themes",defaults:{theme:"dark"},fields:{}}),h=function(){c.setField("theme",{label:"Themes",type:"select",options:n.object(n.map(f,function(e,t){return[e.id,e.title]}))})},p=function(e){if(!e.id||f[e.id])return!1;o.log("add theme",e.id,e),f[e.id]=n.defaults(e,{styles:{},description:"",editor:{}}),h(),a||d(e.id)},d=function(e){o.log("try change theme",e,f);var t,n=f[e];return n?e==a?!0:(o.log("change theme",e),a=e,t=r.convertJSON(n.styles,{namespace:{scrollbar:"::-webkit-scrollbar","scrollbar thumb":"::-webkit-scrollbar-thumb","scrollbar corner":"::-webkit-scrollbar-corner",menubar:".cb-menubar","menubar button":".cb-menubar .cb-commands-menubar .menu-command-item>.btn",statusbar:".cb-statusbar","statusbar button":".cb-statusbar .cb-commands-menubar .menu-command-item>.btn",lateralbar:".cb-lateralbar","lateralbar commands":".cb-lateralbar .lateral-commands","lateralbar body":".cb-panels",body:".cb-body","tabs section":".cb-tabs .section","tabs header":".cb-tabs .tabs-section .tabs-section-header","tabs content":".cb-tabs .tabs-section .tabs-section-content","tabs tab":".component-tab","operations operation":".cb-operations .operation-item",palette:".cb-commands-palette","palette input":".cb-commands-palette input","palette results":".cb-commands-palette .results","palette results command":".cb-commands-palette .results .command",alerts:".cb-alerts","alerts alert":".cb-alerts .cb-alert"},base:"body #codebox"}),l.html(t),!0):!1},a=function(){return f[a]},v=function(){return d(u.get("theme","default"))};p({id:"default",title:"White"});var m=function(){return l.appendTo(t("body")),u.change(v),v(),Q()};return{init:m,add:p,change:d,current:a}}),define("core/search/commands",["hr/promise","hr/utils","hr/hr","models/command","core/search"],function(e,t,n,r,i){i.handler({id:"commands",title:"Command"},function(e){return r.all.filter(function(t){return t.get("type")=="action"&&t.get("search")&&!t.hasFlag("disabled")&&(!e||t.textScore(e)>0)})})}),define("core/search/files",["hr/promise","hr/utils","hr/hr","core/box","core/search","core/files"],function(e,t,n,r,i,s){i.handler({id:"files",title:"Files"},function(n){return n?r.searchFiles(n).then(function(n){return e(t.map(n.files,t.bind(function(e){var n=t.last(e.split("/"));return n.length==0&&(n=e),{title:e,icons:{search:"file-o"},action:t.bind(function(){s.open(e)},this)}},this)))}):[]}),i.handler({id:"recentfiles",title:"Recent Files"},function(e){return s.recent.map(function(e){return{category:"Recent Files",title:e.path(),position:0,icons:{search:"file-o"},action:t.bind(function(){s.open(e)},this)}})})}),define("core/search/tags",["hr/promise","hr/utils","hr/hr","core/backends/rpc","core/search","core/files"],function(e,t,n,r,i,s){var o=function(e){return{title:e.name,label:e.file,icons:{search:"code"},action:t.bind(function(){s.open(e.file,{pattern:e.pattern.slice(2,-2)})},this)}};i.handler({id:"tags",title:"Tags"},function(n){return n?r.execute("codecomplete/get",{query:n}).then(function(e){return t.map(e.results,o)},function(){return e([])}):[]})}),define("core/search/addons",["hr/promise","hr/utils","hr/hr","models/command","collections/addons","core/box","core/addons","core/search","core/settings","utils/string"],function(e,t,n,r,i,s,o,u,a,f){var l=a.add({namespace:"manager",title:"Addons",defaults:{registry:"https://api.codebox.io"},fields:{registry:{label:"Registry",type:"text"}}}),c=function(e,t){return e.filter(function(e){var n=[e.get("name"),e.get("description")].join(" ");return f.score("Add-ons",t)>0||f.score(n,t)>0})},h=function(e,t,n){return{category:"Add-ons",title:e+" "+t.get("name"),label:t.get("version")+" - "+t.get("author.name"),icons:{search:"puzzle-piece"},offline:!1,action:n}},p=function(e){var t="Install";if(o.isInstalled(e)){if(!!o.isUpdated(e))return null;t="Update"}return h(t,e,function(){return r.run("addons.install",e.get("git"))})},d=function(e){return o.isDefault(e)?null:h("Uninstall",e,function(){return r.run("addons.uninstall",e.get("name"))})};u.handler({id:"addons:uninstall",title:"Uninstall Add-ons"},function(e){return e?t.chain(c(o,e)).map(d).compact().value():[]}),u.handler({id:"addons:install",title:"Install Add-ons"},function(e){if(!e)return[];var n=new i;return n.loadFromIndex(l.user.get("registry")).then(function(){return t.chain(c(n,e)).map(p).compact().value()})})}),define("core/search/code",["hr/promise","hr/utils","hr/hr","models/command","core/commands/menu","core/backends/rpc","core/search","core/files","utils/dialogs"],function(e,t,n,r,i,s,o,u,a){var f=n.Logger.addNamespace("codeSearch"),l=["query","path","casesensitive","replacement","pattern","maxresults","wholeword","regexp","replaceAll"],c=function(e){var n='Searching 1 file for "'+e.options.query+'"';return e.options.casesensitive&&(n+=" (case sensitive)"),n+="\n\n",t.each(e.files,function(e,r){n+=r+"\n",t.each(e,function(e){n+=e.line+"  "+e.content+"\n"}),n+="\n\n"}),n+=e.matches+" matches across "+t.size(e.files)+" files",n},h=function(e){return e=t.extend({},e||{}),s.execute("search/code",t.pick(e,l))},p=function(e,n,r){return function(i){t.isString(i)&&(i={query:i}),i=t.defaults(i||{},{});var s=function(e){return h(t.extend(e,r||{})).then(function(e){return c(e)},function(e){return f.error("error",e),"Error during search: "+(e.message||e)}).then(function(e){return u.openNew("Find Results",e)})};return i.query?s(i):a.fields(e,n,i).then(s)}},d=r.register("code.search",{title:"Find in Files",category:"Find",shortcuts:["mod+shift+f"],action:p("Find in Files",{query:{label:"Find",type:"text"},path:{label:"Where",type:"text"},regexp:{label:"Regular expression",type:"checkbox"},casesensitive:{label:"Case sensitive",type:"checkbox"},wholeword:{label:"Whole word",type:"checkbox"}})}),v=r.register("code.replace",{title:"Replace in Files",category:"Find",shortcuts:[],action:p("Find and Replace in Files",{query:{label:"Find",type:"text"},path:{label:"Where",type:"text"},replacement:{label:"Replace",type:"text"},regexp:{label:"Regular expression",type:"checkbox"},casesensitive:{label:"Case Sensitive",type:"checkbox"},wholeword:{label:"Whole word",type:"checkbox"}},{replaceAll:!0})});return i.register("find",{title:"Find",position:5}).menuSection([d,v]),{search:h}}),define("core/app",["hr/hr","utils/url","utils/dialogs","utils/alerts","utils/loading","views/grid","text!resources/templates/main.html","core/box","core/session","core/addons","core/box","core/files","core/commands/toolbar","core/commands/menu","core/commands/statusbar","core/commands/palette","core/tabs","core/panels","core/operations","core/localfs","core/themes","core/search/commands","core/search/files","core/search/tags","core/search/addons","core/search/code"],function(e,t,n,r,i,s,o,u,a,f,u,l,c,h,p,d,v,m,g,y,b){var w=e.Application.extend({name:"Codebox",template:o,metas:{robots:"noindex, nofollow",description:"Cloud IDE on a box.","apple-mobile-web-app-capable":"yes","apple-mobile-web-app-status-bar-style":"black",viewport:"width=device-width, initial-scale=1, user-scalable=no"},links:{icon:e.Urls.static("images/icons/32.png"),"apple-touch-icon":e.Urls.static("images/icons/ios.png")},events:{"click .cb-login .login-box #login-submit":"actionLoginBox"},initialize:function(){w.__super__.initialize.apply(this,arguments),this._autologin=!0,this.loginError=null,this.grid=new s({columns:1e3});var t=this.grid.addView(new e.View,{width:18});return m.$el.appendTo(t.$el),g.$el.appendTo(t.$el),g.on("add remove reset",function(){setTimeout(function(){m.$el.css("bottom",g.$el.height())},200)}),this.grid.addView(v),v.on("tabs:default tabs:opennew",function(){l.openNew()},this),e.Offline.on("state",function(e){e?n.confirm("Connection detected","Save changes before refreshing. Do you want to refresh now (unsaved changes will be lost) ?").then(function(){location.reload()}):(r.show("Caution: Connection lost, Workspace is now in Offline mode",5e3),y.isSyncEnabled()||n.alert("Caution: Connection lost","Offline file synchronization is not enabled for this workspace, enable it first when online."))}),e.Offline.on("update",function(){location.reload()}),u.on("change:name",function(){this.title(u.get("name"))},this),this},templateContext:function(){return{email:e.Cookies.get("email"),token:e.Cookies.get("token"),loginError:this.loginError}},render:function(){var t=e.Cookies.get("email"),n=e.Cookies.get("token");if(!u.isAuth()&&(t&&n||t&&u.get("public"))&&this._autologin){this.doLogin(t,n);return}return w.__super__.render.apply(this,arguments)},finish:function(){var t=this;return u.isAuth()&&(h.$el.appendTo(this.$(".cb-menubar")),h.render(),p.$el.appendTo(this.$(".cb-statusbar")),p.render(),c.$el.appendTo(this.$(".cb-commands")),c.render(),this.grid.$el.appendTo(this.$(".cb-body")),d.$el.appendTo(this.$(".cb-body")),d.render(),i.show(f.loadAll()).fail(function(e){return n.alert("Error loading Add-ons","<p>Error when initializing addons. Please check addons states using the addons manager and reinstall problematic add-ons.</p><p>Error message: "+(e.message||e)+"</p>"+_.map(e.addonsError||[],function(e){return"<p> - <b>"+_.escape(e.addon)+"</b>: "+(e.error.message||e.error)+"</p>"}).join("\n"))}).fin(b.init).fin(function(){f.on("add",function(e){e.load()}),e.Offline.checkUpdate(),t.trigger("ready"),v.restoreTabs().then(function(e){l.active.size()==0&&e==0&&l.openNew()})})),w.__super__.finish.apply(this,arguments)},actionLoginBox:function(e){var t=this;e&&e.preventDefault();var n=this.$(".login-box #login-email").val(),r=this.$(".login-box #login-token").val();this.doLogin(n,r)},doLogin:function(t,n){var r=this;return u.get("public")&&(n=Math.random().toString(36).substring(8)),this.$(".login-box .form-group").removeClass("has-error"),t?n?a.start(t,n).then(function(){e.Cookies.set("email",t),e.Cookies.set("token",n),r.render()}).fail(function(e){r._autologin=!1,r.loginError=e,i.stop(),r.render()}):(this.$(".login-box #login-token").parent(".form-group").addClass("has-error"),Q.reject(new Error("No password"))):(this.$(".login-box #login-email").parent(".form-group").addClass("has-error"),Q.reject(new Error("No email")))},toggleMode:function(e,t){$("#codebox").toggleClass("mode-"+e,t),t=this.hasMode(e),$(".cb-active-mode-"+e).toggleClass("active",t),$(".cb-inactive-mode-"+e).toggleClass("active",!t)},hasMode:function(e,t){return $("#codebox").hasClass("mode-"+e)}}),E=new w;return E}),require(["hr/utils","hr/hr","hr/args","resources/resources","core/app","core/session"],function(e,t,n,r,i,s){t.configure(n,{logLevel:n.debug?"log":"error"}),s.prepare().then(function(){i.run()},function(e){console.error("Error when starting the application:",e)})}),define("main",function(){});